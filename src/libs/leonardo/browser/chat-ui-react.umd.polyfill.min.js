/*!
 * chat-ui-react v0.3.0
 * 
 * Copyright (c) 2020 twihike. All rights reserved.
 * This source code is licensed under the MIT license.
 */
/*!
 * @package audio-recorder-polyfill
 * @version 0.4.1
 * @license MIT
 * @author Andrey Sitnik
 * @url https://github.com/ai/audio-recorder-polyfill
 */
/*!
 * @package @babel/runtime-corejs3
 * @version 7.15.4
 * @license MIT
 * @author The Babel Team
 * @url https://github.com/babel/babel
 */
/*!
 * @package dayjs
 * @version 1.10.7
 * @license MIT
 * @author iamkun
 * @url https://github.com/iamkun/dayjs
 */
/*!
 * @package regenerator-runtime
 * @version 0.13.9
 * @license MIT
 * @author Ben Newman
 * @url https://github.com/facebook/regenerator/tree/master/packages/runtime
 */
/*!
 * @package core-js-pure
 * @version 3.17.3
 * @license MIT
 * @author undefined
 * @url https://github.com/zloirock/core-js
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@mui/material"),require("react")):"function"==typeof define&&define.amd?define(["exports","@mui/material","react"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ChatUiReact={},t.MaterialUI,t.React)}(this,(function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=r(n),i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=function(t){return t&&t.Math==Math&&t},u=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof i&&i)||function(){return this}()||Function("return this")(),c={},s=function(t){try{return!!t()}catch(t){return!0}},l=!s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),f={},d={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,p=h&&!d.call({1:2},1);f.f=p?function(t){var e=h(this,t);return!!e&&e.enumerable}:d;var v,y,m=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},g={}.toString,w=function(t){return g.call(t).slice(8,-1)},b=w,x="".split,E=s((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==b(t)?x.call(t,""):Object(t)}:Object,O=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},S=E,A=O,M=function(t){return S(A(t))},k=function(t){return"object"==typeof t?null!==t:"function"==typeof t},j={},T=j,C=u,D=function(t){return"function"==typeof t?t:void 0},L=function(t,e){return arguments.length<2?D(T[t])||D(C[t]):T[t]&&T[t][e]||C[t]&&C[t][e]},P=L("navigator","userAgent")||"",$=u,R=P,I=$.process,_=$.Deno,B=I&&I.versions||_&&_.version,W=B&&B.v8;W?y=(v=W.split("."))[0]<4?1:v[0]+v[1]:R&&(!(v=R.match(/Edge\/(\d+)/))||v[1]>=74)&&(v=R.match(/Chrome\/(\d+)/))&&(y=v[1]);var N=y&&+y,q=N,U=s,F=!!Object.getOwnPropertySymbols&&!U((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&q&&q<41})),Y=F&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,G=L,H=Y?function(t){return"symbol"==typeof t}:function(t){var e=G("Symbol");return"function"==typeof e&&Object(t)instanceof e},z=k,V={exports:{}},J=u,K=function(t,e){try{Object.defineProperty(J,t,{value:e,configurable:!0,writable:!0})}catch(n){J[t]=e}return e},Z="__core-js_shared__",Q=u[Z]||K(Z,{}),X=Q;(V.exports=function(t,e){return X[t]||(X[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.17.3",mode:"pure",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"});var tt=O,et=function(t){return Object(tt(t))},nt=et,rt={}.hasOwnProperty,ot=Object.hasOwn||function(t,e){return rt.call(nt(t),e)},it=0,at=Math.random(),ut=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++it+at).toString(36)},ct=u,st=V.exports,lt=ot,ft=ut,dt=F,ht=Y,pt=st("wks"),vt=ct.Symbol,yt=ht?vt:vt&&vt.withoutSetter||ft,mt=function(t){return lt(pt,t)&&(dt||"string"==typeof pt[t])||(dt&&lt(vt,t)?pt[t]=vt[t]:pt[t]=yt("Symbol."+t)),pt[t]},gt=k,wt=H,bt=function(t,e){var n,r;if("string"===e&&"function"==typeof(n=t.toString)&&!z(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!z(r=n.call(t)))return r;if("string"!==e&&"function"==typeof(n=t.toString)&&!z(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},xt=mt("toPrimitive"),Et=function(t,e){if(!gt(t)||wt(t))return t;var n,r=t[xt];if(void 0!==r){if(void 0===e&&(e="default"),n=r.call(t,e),!gt(n)||wt(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),bt(t,e)},Ot=H,St=function(t){var e=Et(t,"string");return Ot(e)?e:String(e)},At=k,Mt=u.document,kt=At(Mt)&&At(Mt.createElement),jt=function(t){return kt?Mt.createElement(t):{}},Tt=jt,Ct=!l&&!s((function(){return 7!=Object.defineProperty(Tt("div"),"a",{get:function(){return 7}}).a})),Dt=l,Lt=f,Pt=m,$t=M,Rt=St,It=ot,_t=Ct,Bt=Object.getOwnPropertyDescriptor;c.f=Dt?Bt:function(t,e){if(t=$t(t),e=Rt(e),_t)try{return Bt(t,e)}catch(t){}if(It(t,e))return Pt(!Lt.f.call(t,e),t[e])};var Wt=s,Nt=/#|\.prototype\./,qt=function(t,e){var n=Ft[Ut(t)];return n==Gt||n!=Yt&&("function"==typeof e?Wt(e):!!e)},Ut=qt.normalize=function(t){return String(t).replace(Nt,".").toLowerCase()},Ft=qt.data={},Yt=qt.NATIVE="N",Gt=qt.POLYFILL="P",Ht=qt,zt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Vt=zt,Jt=function(t,e,n){if(Vt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Kt={},Zt=k,Qt=function(t){if(!Zt(t))throw TypeError(String(t)+" is not an object");return t},Xt=l,te=Ct,ee=Qt,ne=St,re=Object.defineProperty;Kt.f=Xt?re:function(t,e,n){if(ee(t),e=ne(e),ee(n),te)try{return re(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var oe,ie=Kt,ae=m,ue=l?function(t,e,n){return ie.f(t,e,ae(1,n))}:function(t,e,n){return t[e]=n,t},ce=u,se=c.f,le=Ht,fe=j,de=Jt,he=ue,pe=ot,ve=function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e},ye=function(t,e){var n,r,o,i,a,u,c,s,l=t.target,f=t.global,d=t.stat,h=t.proto,p=f?ce:d?ce[l]:(ce[l]||{}).prototype,v=f?fe:fe[l]||he(fe,l,{})[l],y=v.prototype;for(o in e)n=!le(f?o:l+(d?".":"#")+o,t.forced)&&p&&pe(p,o),a=v[o],n&&(u=t.noTargetGet?(s=se(p,o))&&s.value:p[o]),i=n&&u?u:e[o],n&&typeof a==typeof i||(c=t.bind&&n?de(i,ce):t.wrap&&n?ve(i):h&&"function"==typeof i?de(Function.call,i):i,(t.sham||i&&i.sham||a&&a.sham)&&he(c,"sham",!0),he(v,o,c),h&&(pe(fe,r=l+"Prototype")||he(fe,r,{}),he(fe[r],o,i),t.real&&y&&!y[o]&&he(y,o,i)))},me=V.exports,ge=ut,we=me("keys"),be=function(t){return we[t]||(we[t]=ge(t))},xe=!s((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Ee=ot,Oe=et,Se=xe,Ae=be("IE_PROTO"),Me=Object.prototype,ke=Se?Object.getPrototypeOf:function(t){return t=Oe(t),Ee(t,Ae)?t[Ae]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Me:null},je=k,Te=Qt,Ce=function(t){if(!je(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t},De=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Te(n),Ce(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Le=Math.ceil,Pe=Math.floor,$e=function(t){return isNaN(t=+t)?0:(t>0?Pe:Le)(t)},Re=$e,Ie=Math.min,_e=function(t){return t>0?Ie(Re(t),9007199254740991):0},Be=$e,We=Math.max,Ne=Math.min,qe=function(t,e){var n=Be(t);return n<0?We(n+e,0):Ne(n,e)},Ue=M,Fe=_e,Ye=qe,Ge=function(t){return function(e,n,r){var o,i=Ue(e),a=Fe(i.length),u=Ye(r,a);if(t&&n!=n){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},He={includes:Ge(!0),indexOf:Ge(!1)},ze={},Ve=ot,Je=M,Ke=He.indexOf,Ze=ze,Qe=function(t,e){var n,r=Je(t),o=0,i=[];for(n in r)!Ve(Ze,n)&&Ve(r,n)&&i.push(n);for(;e.length>o;)Ve(r,n=e[o++])&&(~Ke(i,n)||i.push(n));return i},Xe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],tn=Qe,en=Xe,nn=Object.keys||function(t){return tn(t,en)},rn=Kt,on=Qt,an=nn,un=l?Object.defineProperties:function(t,e){on(t);for(var n,r=an(e),o=r.length,i=0;o>i;)rn.f(t,n=r[i++],e[n]);return t},cn=L("document","documentElement"),sn=Qt,ln=un,fn=Xe,dn=ze,hn=cn,pn=jt,vn=be("IE_PROTO"),yn=function(){},mn=function(t){return"<script>"+t+"</"+"script>"},gn=function(t){t.write(mn("")),t.close();var e=t.parentWindow.Object;return t=null,e},wn=function(){try{oe=new ActiveXObject("htmlfile")}catch(t){}var t,e;wn="undefined"!=typeof document?document.domain&&oe?gn(oe):((e=pn("iframe")).style.display="none",hn.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(mn("document.F=Object")),t.close(),t.F):gn(oe);for(var n=fn.length;n--;)delete wn.prototype[fn[n]];return wn()};dn[vn]=!0;var bn=Object.create||function(t,e){var n;return null!==t?(yn.prototype=sn(t),n=new yn,yn.prototype=null,n[vn]=t):n=wn(),void 0===e?n:ln(n,e)},xn={},En=xn,On=mt("iterator"),Sn=Array.prototype,An=function(t){return void 0!==t&&(En.Array===t||Sn[On]===t)},Mn={};Mn[mt("toStringTag")]="z";var kn="[object z]"===String(Mn),jn=kn,Tn=w,Cn=mt("toStringTag"),Dn="Arguments"==Tn(function(){return arguments}()),Ln=jn?Tn:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Cn))?n:Dn?Tn(e):"Object"==(r=Tn(e))&&"function"==typeof e.callee?"Arguments":r},Pn=Ln,$n=xn,Rn=mt("iterator"),In=function(t){if(null!=t)return t[Rn]||t["@@iterator"]||$n[Pn(t)]},_n=Qt,Bn=In,Wn=function(t,e){var n=arguments.length<2?Bn(t):e;if("function"!=typeof n)throw TypeError(String(t)+" is not iterable");return _n(n.call(t))},Nn=Qt,qn=function(t,e,n){var r,o;Nn(t);try{if(void 0===(r=t.return)){if("throw"===e)throw n;return n}r=r.call(t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return Nn(r),n},Un=Qt,Fn=An,Yn=_e,Gn=Jt,Hn=Wn,zn=In,Vn=qn,Jn=function(t,e){this.stopped=t,this.result=e},Kn=function(t,e,n){var r,o,i,a,u,c,s,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),p=Gn(e,l,1+f+h),v=function(t){return r&&Vn(r,"normal",t),new Jn(!0,t)},y=function(t){return f?(Un(t),h?p(t[0],t[1],v):p(t[0],t[1])):h?p(t,v):p(t)};if(d)r=t;else{if("function"!=typeof(o=zn(t)))throw TypeError("Target is not iterable");if(Fn(o)){for(i=0,a=Yn(t.length);a>i;i++)if((u=y(t[i]))&&u instanceof Jn)return u;return new Jn(!1)}r=Hn(t,o)}for(c=r.next;!(s=c.call(r)).done;){try{u=y(s.value)}catch(t){Vn(r,"throw",t)}if("object"==typeof u&&u&&u instanceof Jn)return u}return new Jn(!1)},Zn=H,Qn=function(t){if(Zn(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)},Xn=ye,tr=ke,er=De,nr=bn,rr=ue,or=m,ir=Kn,ar=Qn,ur=function(t,e){var n=this;if(!(n instanceof ur))return new ur(t,e);er&&(n=er(new Error(void 0),tr(n))),void 0!==e&&rr(n,"message",ar(e));var r=[];return ir(t,r.push,{that:r}),rr(n,"errors",r),n};ur.prototype=nr(Error.prototype,{constructor:or(5,ur),message:or(5,""),name:or(5,"AggregateError")}),Xn({global:!0},{AggregateError:ur});var cr=Q,sr=Function.toString;"function"!=typeof cr.inspectSource&&(cr.inspectSource=function(t){return sr.call(t)});var lr,fr,dr,hr=cr.inspectSource,pr=hr,vr=u.WeakMap,yr="function"==typeof vr&&/native code/.test(pr(vr)),mr=k,gr=ue,wr=ot,br=Q,xr=be,Er=ze,Or="Object already initialized",Sr=u.WeakMap;if(yr||br.state){var Ar=br.state||(br.state=new Sr),Mr=Ar.get,kr=Ar.has,jr=Ar.set;lr=function(t,e){if(kr.call(Ar,t))throw new TypeError(Or);return e.facade=t,jr.call(Ar,t,e),e},fr=function(t){return Mr.call(Ar,t)||{}},dr=function(t){return kr.call(Ar,t)}}else{var Tr=xr("state");Er[Tr]=!0,lr=function(t,e){if(wr(t,Tr))throw new TypeError(Or);return e.facade=t,gr(t,Tr,e),e},fr=function(t){return wr(t,Tr)?t[Tr]:{}},dr=function(t){return wr(t,Tr)}}var Cr,Dr,Lr,Pr={set:lr,get:fr,has:dr,enforce:function(t){return dr(t)?fr(t):lr(t,{})},getterFor:function(t){return function(e){var n;if(!mr(e)||(n=fr(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},$r=s,Rr=bn,Ir=ke,_r=ue,Br=mt("iterator"),Wr=!1;[].keys&&("next"in(Lr=[].keys())?(Dr=Ir(Ir(Lr)))!==Object.prototype&&(Cr=Dr):Wr=!0);var Nr=null==Cr||$r((function(){var t={};return Cr[Br].call(t)!==t}));"function"!=typeof(Cr=Nr?{}:Rr(Cr))[Br]&&_r(Cr,Br,(function(){return this}));var qr={IteratorPrototype:Cr,BUGGY_SAFARI_ITERATORS:Wr},Ur=Ln,Fr=kn?{}.toString:function(){return"[object "+Ur(this)+"]"},Yr=kn,Gr=Kt.f,Hr=ue,zr=ot,Vr=Fr,Jr=mt("toStringTag"),Kr=function(t,e,n,r){if(t){var o=n?t:t.prototype;zr(o,Jr)||Gr(o,Jr,{configurable:!0,value:e}),r&&!Yr&&Hr(o,"toString",Vr)}},Zr=qr.IteratorPrototype,Qr=bn,Xr=m,to=Kr,eo=xn,no=function(){return this},ro=ue,oo=function(t,e,n,r){r&&r.enumerable?t[e]=n:ro(t,e,n)},io=ye,ao=function(t,e,n){var r=e+" Iterator";return t.prototype=Qr(Zr,{next:Xr(1,n)}),to(t,r,!1,!0),eo[r]=no,t},uo=ke,co=Kr,so=ue,lo=oo,fo=xn,ho=qr.BUGGY_SAFARI_ITERATORS,po=mt("iterator"),vo="keys",yo="values",mo="entries",go=function(){return this},wo=function(t,e,n,r,o,i,a){ao(n,e,r);var u,c,s,l=function(t){if(t===o&&v)return v;if(!ho&&t in h)return h[t];switch(t){case vo:case yo:case mo:return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",d=!1,h=t.prototype,p=h[po]||h["@@iterator"]||o&&h[o],v=!ho&&p||l(o),y="Array"==e&&h.entries||p;if(y&&(u=uo(y.call(new t)))!==Object.prototype&&u.next&&(co(u,f,!0,!0),fo[f]=go),o==yo&&p&&p.name!==yo&&(d=!0,v=function(){return p.call(this)}),a&&h[po]!==v&&so(h,po,v),fo[e]=v,o)if(c={values:l(yo),keys:i?v:l(vo),entries:l(mo)},a)for(s in c)(ho||d||!(s in h))&&lo(h,s,c[s]);else io({target:e,proto:!0,forced:ho||d},c);return c},bo=M,xo=xn,Eo=Pr,Oo=wo,So="Array Iterator",Ao=Eo.set,Mo=Eo.getterFor(So);Oo(Array,"Array",(function(t,e){Ao(this,{type:So,target:bo(t),index:0,kind:e})}),(function(){var t=Mo(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),xo.Arguments=xo.Array;var ko=u.Promise,jo=oo,To=L,Co=Kt,Do=l,Lo=mt("species"),Po=mt("iterator"),$o=!1;try{var Ro=0,Io={next:function(){return{done:!!Ro++}},return:function(){$o=!0}};Io[Po]=function(){return this},Array.from(Io,(function(){throw 2}))}catch(Yf){}var _o,Bo,Wo,No,qo=function(t,e){if(!e&&!$o)return!1;var n=!1;try{var r={};r[Po]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Uo=Qt,Fo=zt,Yo=mt("species"),Go=function(t,e){var n,r=Uo(t).constructor;return void 0===r||null==(n=Uo(r)[Yo])?e:Fo(n)},Ho=/(?:ipad|iphone|ipod).*applewebkit/i.test(P),zo="process"==w(u.process),Vo=u,Jo=s,Ko=Jt,Zo=cn,Qo=jt,Xo=Ho,ti=zo,ei=Vo.setImmediate,ni=Vo.clearImmediate,ri=Vo.process,oi=Vo.MessageChannel,ii=Vo.Dispatch,ai=0,ui={},ci="onreadystatechange";try{_o=Vo.location}catch(Yf){}var si=function(t){if(ui.hasOwnProperty(t)){var e=ui[t];delete ui[t],e()}},li=function(t){return function(){si(t)}},fi=function(t){si(t.data)},di=function(t){Vo.postMessage(String(t),_o.protocol+"//"+_o.host)};ei&&ni||(ei=function(t){for(var e=[],n=arguments.length,r=1;n>r;)e.push(arguments[r++]);return ui[++ai]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Bo(ai),ai},ni=function(t){delete ui[t]},ti?Bo=function(t){ri.nextTick(li(t))}:ii&&ii.now?Bo=function(t){ii.now(li(t))}:oi&&!Xo?(No=(Wo=new oi).port2,Wo.port1.onmessage=fi,Bo=Ko(No.postMessage,No,1)):Vo.addEventListener&&"function"==typeof postMessage&&!Vo.importScripts&&_o&&"file:"!==_o.protocol&&!Jo(di)?(Bo=di,Vo.addEventListener("message",fi,!1)):Bo=ci in Qo("script")?function(t){Zo.appendChild(Qo("script")).onreadystatechange=function(){Zo.removeChild(this),si(t)}}:function(t){setTimeout(li(t),0)});var hi,pi,vi,yi,mi,gi,wi,bi,xi={set:ei,clear:ni},Ei=u,Oi=/ipad|iphone|ipod/i.test(P)&&void 0!==Ei.Pebble,Si=/web0s(?!.*chrome)/i.test(P),Ai=u,Mi=c.f,ki=xi.set,ji=Ho,Ti=Oi,Ci=Si,Di=zo,Li=Ai.MutationObserver||Ai.WebKitMutationObserver,Pi=Ai.document,$i=Ai.process,Ri=Ai.Promise,Ii=Mi(Ai,"queueMicrotask"),_i=Ii&&Ii.value;_i||(hi=function(){var t,e;for(Di&&(t=$i.domain)&&t.exit();pi;){e=pi.fn,pi=pi.next;try{e()}catch(t){throw pi?yi():vi=void 0,t}}vi=void 0,t&&t.enter()},ji||Di||Ci||!Li||!Pi?!Ti&&Ri&&Ri.resolve?((wi=Ri.resolve(void 0)).constructor=Ri,bi=wi.then,yi=function(){bi.call(wi,hi)}):yi=Di?function(){$i.nextTick(hi)}:function(){ki.call(Ai,hi)}:(mi=!0,gi=Pi.createTextNode(""),new Li(hi).observe(gi,{characterData:!0}),yi=function(){gi.data=mi=!mi}));var Bi=_i||function(t){var e={fn:t,next:void 0};vi&&(vi.next=e),pi||(pi=e,yi()),vi=e},Wi={},Ni=zt,qi=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Ni(e),this.reject=Ni(n)};Wi.f=function(t){return new qi(t)};var Ui,Fi,Yi,Gi=Qt,Hi=k,zi=Wi,Vi=function(t,e){if(Gi(t),Hi(e)&&e.constructor===t)return e;var n=zi.f(t);return(0,n.resolve)(e),n.promise},Ji=u,Ki=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Zi="object"==typeof window,Qi=ye,Xi=u,ta=L,ea=ko,na=function(t,e,n){for(var r in e)n&&n.unsafe&&t[r]?t[r]=e[r]:jo(t,r,e[r],n);return t},ra=Kr,oa=function(t){var e=To(t),n=Co.f;Do&&e&&!e[Lo]&&n(e,Lo,{configurable:!0,get:function(){return this}})},ia=k,aa=zt,ua=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},ca=hr,sa=Kn,la=qo,fa=Go,da=xi.set,ha=Bi,pa=Vi,va=function(t,e){var n=Ji.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))},ya=Wi,ma=Ki,ga=Pr,wa=Ht,ba=Zi,xa=zo,Ea=N,Oa=mt("species"),Sa="Promise",Aa=ga.get,Ma=ga.set,ka=ga.getterFor(Sa),ja=ea&&ea.prototype,Ta=ea,Ca=ja,Da=Xi.TypeError,La=Xi.document,Pa=Xi.process,$a=ya.f,Ra=$a,Ia=!!(La&&La.createEvent&&Xi.dispatchEvent),_a="function"==typeof PromiseRejectionEvent,Ba="unhandledrejection",Wa=wa(Sa,(function(){var t=ca(Ta),e=t!==String(Ta);if(!e&&66===Ea)return!0;if(!Ca.finally)return!0;if(Ea>=51&&/native code/.test(t))return!1;var n=new Ta((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[Oa]=r,!(n.then((function(){}))instanceof r)||!e&&ba&&!_a})),Na=Wa||!la((function(t){Ta.all(t).catch((function(){}))})),qa=function(t){var e;return!(!ia(t)||"function"!=typeof(e=t.then))&&e},Ua=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;ha((function(){for(var r=t.value,o=1==t.state,i=0;n.length>i;){var a,u,c,s=n[i++],l=o?s.ok:s.fail,f=s.resolve,d=s.reject,h=s.domain;try{l?(o||(2===t.rejection&&Ha(t),t.rejection=1),!0===l?a=r:(h&&h.enter(),a=l(r),h&&(h.exit(),c=!0)),a===s.promise?d(Da("Promise-chain cycle")):(u=qa(a))?u.call(a,f,d):f(a)):d(r)}catch(t){h&&!c&&h.exit(),d(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Ya(t)}))}},Fa=function(t,e,n){var r,o;Ia?((r=La.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),Xi.dispatchEvent(r)):r={promise:e,reason:n},!_a&&(o=Xi["on"+t])?o(r):t===Ba&&va("Unhandled promise rejection",n)},Ya=function(t){da.call(Xi,(function(){var e,n=t.facade,r=t.value;if(Ga(t)&&(e=ma((function(){xa?Pa.emit("unhandledRejection",r,n):Fa(Ba,n,r)})),t.rejection=xa||Ga(t)?2:1,e.error))throw e.value}))},Ga=function(t){return 1!==t.rejection&&!t.parent},Ha=function(t){da.call(Xi,(function(){var e=t.facade;xa?Pa.emit("rejectionHandled",e):Fa("rejectionhandled",e,t.value)}))},za=function(t,e,n){return function(r){t(e,r,n)}},Va=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Ua(t,!0))},Ja=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Da("Promise can't be resolved itself");var r=qa(e);r?ha((function(){var n={done:!1};try{r.call(e,za(Ja,n,t),za(Va,n,t))}catch(e){Va(n,e,t)}})):(t.value=e,t.state=1,Ua(t,!1))}catch(e){Va({done:!1},e,t)}}};Wa&&(Ta=function(t){ua(this,Ta,Sa),aa(t),Ui.call(this);var e=Aa(this);try{t(za(Ja,e),za(Va,e))}catch(t){Va(e,t)}},Ca=Ta.prototype,(Ui=function(t){Ma(this,{type:Sa,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=na(Ca,{then:function(t,e){var n=ka(this),r=$a(fa(this,Ta));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=xa?Pa.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Ua(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Fi=function(){var t=new Ui,e=Aa(t);this.promise=t,this.resolve=za(Ja,e),this.reject=za(Va,e)},ya.f=$a=function(t){return t===Ta||t===Yi?new Fi(t):Ra(t)}),Qi({global:!0,wrap:!0,forced:Wa},{Promise:Ta}),ra(Ta,Sa,!1,!0),oa(Sa),Yi=ta(Sa),Qi({target:Sa,stat:!0,forced:Wa},{reject:function(t){var e=$a(this);return e.reject.call(void 0,t),e.promise}}),Qi({target:Sa,stat:!0,forced:true},{resolve:function(t){return pa(this===Yi?Ta:this,t)}}),Qi({target:Sa,stat:!0,forced:Na},{all:function(t){var e=this,n=$a(e),r=n.resolve,o=n.reject,i=ma((function(){var n=aa(e.resolve),i=[],a=0,u=1;sa(t,(function(t){var c=a++,s=!1;i.push(void 0),u++,n.call(e,t).then((function(t){s||(s=!0,i[c]=t,--u||r(i))}),o)})),--u||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=$a(e),r=n.reject,o=ma((function(){var o=aa(e.resolve);sa(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var Ka=zt,Za=Wi,Qa=Ki,Xa=Kn;ye({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=Za.f(e),r=n.resolve,o=n.reject,i=Qa((function(){var n=Ka(e.resolve),o=[],i=0,a=1;Xa(t,(function(t){var u=i++,c=!1;o.push(void 0),a++,n.call(e,t).then((function(t){c||(c=!0,o[u]={status:"fulfilled",value:t},--a||r(o))}),(function(t){c||(c=!0,o[u]={status:"rejected",reason:t},--a||r(o))}))})),--a||r(o)}));return i.error&&o(i.value),n.promise}});var tu=zt,eu=L,nu=Wi,ru=Ki,ou=Kn,iu="No one promise resolved";ye({target:"Promise",stat:!0},{any:function(t){var e=this,n=nu.f(e),r=n.resolve,o=n.reject,i=ru((function(){var n=tu(e.resolve),i=[],a=0,u=1,c=!1;ou(t,(function(t){var s=a++,l=!1;i.push(void 0),u++,n.call(e,t).then((function(t){l||c||(c=!0,r(t))}),(function(t){l||c||(l=!0,i[s]=t,--u||o(new(eu("AggregateError"))(i,iu)))}))})),--u||o(new(eu("AggregateError"))(i,iu))}));return i.error&&o(i.value),n.promise}});var au=ko,uu=L,cu=Go,su=Vi;ye({target:"Promise",proto:!0,real:!0,forced:!!au&&s((function(){au.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=cu(this,uu("Promise")),n="function"==typeof t;return this.then(n?function(n){return su(e,t()).then((function(){return n}))}:t,n?function(n){return su(e,t()).then((function(){throw n}))}:t)}});var lu=$e,fu=Qn,du=O,hu=function(t){return function(e,n){var r,o,i=fu(du(e)),a=lu(n),u=i.length;return a<0||a>=u?t?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===u||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):r:t?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}},pu={codeAt:hu(!1),charAt:hu(!0)}.charAt,vu=Qn,yu=Pr,mu=wo,gu="String Iterator",wu=yu.set,bu=yu.getterFor(gu);mu(String,"String",(function(t){wu(this,{type:gu,string:vu(t),index:0})}),(function(){var t,e=bu(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=pu(n,r),e.index+=t.length,{value:t,done:!1})}));var xu=j.Promise,Eu={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ou=u,Su=Ln,Au=ue,Mu=xn,ku=mt("toStringTag");for(var ju in Eu){var Tu=Ou[ju],Cu=Tu&&Tu.prototype;Cu&&Su(Cu)!==ku&&Au(Cu,ku,ju),Mu[ju]=Mu.Array}var Du=xu,Lu=Wi,Pu=Ki;ye({target:"Promise",stat:!0},{try:function(t){var e=Lu.f(this),n=Pu(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var $u=Du;function Ru(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):$u.resolve(c).then(r,o)}function Iu(t){return function(){var e=this,n=arguments;return new $u((function(r,o){var i=t.apply(e,n);function a(t){Ru(i,r,o,a,u,"next",t)}function u(t){Ru(i,r,o,a,u,"throw",t)}a(void 0)}))}}var _u=w,Bu=Array.isArray||function(t){return"Array"==_u(t)};ye({target:"Array",stat:!0},{isArray:Bu});var Wu=j.Array.isArray;function Nu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var qu=St,Uu=Kt,Fu=m,Yu=function(t,e,n){var r=qu(e);r in t?Uu.f(t,r,Fu(0,n)):t[r]=n},Gu=k,Hu=Bu,zu=mt("species"),Vu=function(t){var e;return Hu(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Hu(e.prototype)?Gu(e)&&null===(e=e[zu])&&(e=void 0):e=void 0),void 0===e?Array:e},Ju=function(t,e){return new(Vu(t))(0===e?0:e)},Ku=s,Zu=N,Qu=mt("species"),Xu=function(t){return Zu>=51||!Ku((function(){var e=[];return(e.constructor={})[Qu]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},tc=ye,ec=s,nc=Bu,rc=k,oc=et,ic=_e,ac=Yu,uc=Ju,cc=Xu,sc=N,lc=mt("isConcatSpreadable"),fc=9007199254740991,dc="Maximum allowed index exceeded",hc=sc>=51||!ec((function(){var t=[];return t[lc]=!1,t.concat()[0]!==t})),pc=cc("concat"),vc=function(t){if(!rc(t))return!1;var e=t[lc];return void 0!==e?!!e:nc(t)};tc({target:"Array",proto:!0,forced:!hc||!pc},{concat:function(t){var e,n,r,o,i,a=oc(this),u=uc(a,0),c=0;for(e=-1,r=arguments.length;e<r;e++)if(vc(i=-1===e?a:arguments[e])){if(c+(o=ic(i.length))>fc)throw TypeError(dc);for(n=0;n<o;n++,c++)n in i&&ac(u,c,i[n])}else{if(c>=fc)throw TypeError(dc);ac(u,c++,i)}return u.length=c,u}});var yc={},mc=Qe,gc=Xe.concat("length","prototype");yc.f=Object.getOwnPropertyNames||function(t){return mc(t,gc)};var wc={},bc=M,xc=yc.f,Ec={}.toString,Oc="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];wc.f=function(t){return Oc&&"[object Window]"==Ec.call(t)?function(t){try{return xc(t)}catch(t){return Oc.slice()}}(t):xc(bc(t))};var Sc={};Sc.f=Object.getOwnPropertySymbols;var Ac={},Mc=mt;Ac.f=Mc;var kc=j,jc=ot,Tc=Ac,Cc=Kt.f,Dc=function(t){var e=kc.Symbol||(kc.Symbol={});jc(e,t)||Cc(e,t,{value:Tc.f(t)})},Lc=Jt,Pc=E,$c=et,Rc=_e,Ic=Ju,_c=[].push,Bc=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(c,s,l,f){for(var d,h,p=$c(c),v=Pc(p),y=Lc(s,l,3),m=Rc(v.length),g=0,w=f||Ic,b=e?w(c,m):n||a?w(c,0):void 0;m>g;g++)if((u||g in v)&&(h=y(d=v[g],g,p),t))if(e)b[g]=h;else if(h)switch(t){case 3:return!0;case 5:return d;case 6:return g;case 2:_c.call(b,d)}else switch(t){case 4:return!1;case 7:_c.call(b,d)}return i?-1:r||o?o:b}},Wc={forEach:Bc(0),map:Bc(1),filter:Bc(2),some:Bc(3),every:Bc(4),find:Bc(5),findIndex:Bc(6),filterReject:Bc(7)},Nc=ye,qc=u,Uc=L,Fc=l,Yc=F,Gc=s,Hc=ot,zc=Bu,Vc=k,Jc=H,Kc=Qt,Zc=et,Qc=M,Xc=St,ts=Qn,es=m,ns=bn,rs=nn,os=yc,is=wc,as=Sc,us=c,cs=Kt,ss=f,ls=ue,fs=oo,ds=V.exports,hs=ze,ps=ut,vs=mt,ys=Ac,ms=Dc,gs=Kr,ws=Pr,bs=Wc.forEach,xs=be("hidden"),Es="Symbol",Os=vs("toPrimitive"),Ss=ws.set,As=ws.getterFor(Es),Ms=Object.prototype,ks=qc.Symbol,js=Uc("JSON","stringify"),Ts=us.f,Cs=cs.f,Ds=is.f,Ls=ss.f,Ps=ds("symbols"),$s=ds("op-symbols"),Rs=ds("string-to-symbol-registry"),Is=ds("symbol-to-string-registry"),_s=ds("wks"),Bs=qc.QObject,Ws=!Bs||!Bs.prototype||!Bs.prototype.findChild,Ns=Fc&&Gc((function(){return 7!=ns(Cs({},"a",{get:function(){return Cs(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Ts(Ms,e);r&&delete Ms[e],Cs(t,e,n),r&&t!==Ms&&Cs(Ms,e,r)}:Cs,qs=function(t,e){var n=Ps[t]=ns(ks.prototype);return Ss(n,{type:Es,tag:t,description:e}),Fc||(n.description=e),n},Us=function(t,e,n){t===Ms&&Us($s,e,n),Kc(t);var r=Xc(e);return Kc(n),Hc(Ps,r)?(n.enumerable?(Hc(t,xs)&&t[xs][r]&&(t[xs][r]=!1),n=ns(n,{enumerable:es(0,!1)})):(Hc(t,xs)||Cs(t,xs,es(1,{})),t[xs][r]=!0),Ns(t,r,n)):Cs(t,r,n)},Fs=function(t,e){Kc(t);var n=Qc(e),r=rs(n).concat(zs(n));return bs(r,(function(e){Fc&&!Ys.call(n,e)||Us(t,e,n[e])})),t},Ys=function(t){var e=Xc(t),n=Ls.call(this,e);return!(this===Ms&&Hc(Ps,e)&&!Hc($s,e))&&(!(n||!Hc(this,e)||!Hc(Ps,e)||Hc(this,xs)&&this[xs][e])||n)},Gs=function(t,e){var n=Qc(t),r=Xc(e);if(n!==Ms||!Hc(Ps,r)||Hc($s,r)){var o=Ts(n,r);return!o||!Hc(Ps,r)||Hc(n,xs)&&n[xs][r]||(o.enumerable=!0),o}},Hs=function(t){var e=Ds(Qc(t)),n=[];return bs(e,(function(t){Hc(Ps,t)||Hc(hs,t)||n.push(t)})),n},zs=function(t){var e=t===Ms,n=Ds(e?$s:Qc(t)),r=[];return bs(n,(function(t){!Hc(Ps,t)||e&&!Hc(Ms,t)||r.push(Ps[t])})),r};if(Yc||(ks=function(){if(this instanceof ks)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?ts(arguments[0]):void 0,e=ps(t),n=function(t){this===Ms&&n.call($s,t),Hc(this,xs)&&Hc(this[xs],e)&&(this[xs][e]=!1),Ns(this,e,es(1,t))};return Fc&&Ws&&Ns(Ms,e,{configurable:!0,set:n}),qs(e,t)},fs(ks.prototype,"toString",(function(){return As(this).tag})),fs(ks,"withoutSetter",(function(t){return qs(ps(t),t)})),ss.f=Ys,cs.f=Us,us.f=Gs,os.f=is.f=Hs,as.f=zs,ys.f=function(t){return qs(vs(t),t)},Fc&&Cs(ks.prototype,"description",{configurable:!0,get:function(){return As(this).description}})),Nc({global:!0,wrap:!0,forced:!Yc,sham:!Yc},{Symbol:ks}),bs(rs(_s),(function(t){ms(t)})),Nc({target:Es,stat:!0,forced:!Yc},{for:function(t){var e=ts(t);if(Hc(Rs,e))return Rs[e];var n=ks(e);return Rs[e]=n,Is[n]=e,n},keyFor:function(t){if(!Jc(t))throw TypeError(t+" is not a symbol");if(Hc(Is,t))return Is[t]},useSetter:function(){Ws=!0},useSimple:function(){Ws=!1}}),Nc({target:"Object",stat:!0,forced:!Yc,sham:!Fc},{create:function(t,e){return void 0===e?ns(t):Fs(ns(t),e)},defineProperty:Us,defineProperties:Fs,getOwnPropertyDescriptor:Gs}),Nc({target:"Object",stat:!0,forced:!Yc},{getOwnPropertyNames:Hs,getOwnPropertySymbols:zs}),Nc({target:"Object",stat:!0,forced:Gc((function(){as.f(1)}))},{getOwnPropertySymbols:function(t){return as.f(Zc(t))}}),js){var Vs=!Yc||Gc((function(){var t=ks();return"[null]"!=js([t])||"{}"!=js({a:t})||"{}"!=js(Object(t))}));Nc({target:"JSON",stat:!0,forced:Vs},{stringify:function(t,e,n){for(var r,o=[t],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=e,(Vc(e)||void 0!==t)&&!Jc(t))return zc(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Jc(e))return e}),o[1]=e,js.apply(null,o)}})}ks.prototype[Os]||ls(ks.prototype,Os,ks.prototype.valueOf),gs(ks,Es),hs[xs]=!0,Dc("asyncIterator"),Dc("hasInstance"),Dc("isConcatSpreadable"),Dc("iterator"),Dc("match"),Dc("matchAll"),Dc("replace"),Dc("search"),Dc("species"),Dc("split"),Dc("toPrimitive"),Dc("toStringTag"),Dc("unscopables"),Kr(u.JSON,"JSON",!0);var Js=j.Symbol;Dc("asyncDispose"),Dc("dispose"),Dc("matcher"),Dc("metadata"),Dc("observable"),Dc("patternMatch"),Dc("replaceAll");var Ks=Js,Zs=In,Qs=Qt,Xs=qn,tl=Jt,el=et,nl=function(t,e,n,r){try{return r?e(Qs(n)[0],n[1]):e(n)}catch(e){Xs(t,"throw",e)}},rl=An,ol=_e,il=Yu,al=Wn,ul=In,cl=function(t){var e,n,r,o,i,a,u=el(t),c="function"==typeof this?this:Array,s=arguments.length,l=s>1?arguments[1]:void 0,f=void 0!==l,d=ul(u),h=0;if(f&&(l=tl(l,s>2?arguments[2]:void 0,2)),null==d||c==Array&&rl(d))for(n=new c(e=ol(u.length));e>h;h++)a=f?l(u[h],h):u[h],il(n,h,a);else for(i=(o=al(u,d)).next,n=new c;!(r=i.call(o)).done;h++)a=f?nl(o,l,[r.value,h],!0):r.value,il(n,h,a);return n.length=h,n};ye({target:"Array",stat:!0,forced:!qo((function(t){Array.from(t)}))},{from:cl});var sl=j.Array.from;var ll=ye,fl=k,dl=Bu,hl=qe,pl=_e,vl=M,yl=Yu,ml=mt,gl=Xu("slice"),wl=ml("species"),bl=[].slice,xl=Math.max;ll({target:"Array",proto:!0,forced:!gl},{slice:function(t,e){var n,r,o,i=vl(this),a=pl(i.length),u=hl(t,a),c=hl(void 0===e?a:e,a);if(dl(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!dl(n.prototype)?fl(n)&&null===(n=n[wl])&&(n=void 0):n=void 0,n===Array||void 0===n))return bl.call(i,u,c);for(r=new(void 0===n?Array:n)(xl(c-u,0)),o=0;u<c;u++,o++)u in i&&yl(r,o,i[u]);return r.length=o,r}});var El=j,Ol=function(t){return El[t+"Prototype"]},Sl=Ol("Array").slice,Al=Array.prototype,Ml=function(t){var e=t.slice;return t===Al||t instanceof Array&&e===Al.slice?Sl:e};function kl(t,e){var n;if(t){if("string"==typeof t)return Nu(t,e);var r=Ml(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?sl(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nu(t,e):void 0}}function jl(t){return function(t){if(Wu(t))return Nu(t)}(t)||function(t){if(void 0!==Ks&&null!=Zs(t)||null!=t["@@iterator"])return sl(t)}(t)||kl(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Tl=et,Cl=nn;ye({target:"Object",stat:!0,forced:s((function(){Cl(1)}))},{keys:function(t){return Cl(Tl(t))}});var Dl=j.Object.keys,Ll=j.Object.getOwnPropertySymbols,Pl=Wc.filter;ye({target:"Array",proto:!0,forced:!Xu("filter")},{filter:function(t){return Pl(this,t,arguments.length>1?arguments[1]:void 0)}});var $l=Ol("Array").filter,Rl=Array.prototype,Il=function(t){var e=t.filter;return t===Rl||t instanceof Array&&e===Rl.filter?$l:e},_l={exports:{}},Bl=ye,Wl=s,Nl=M,ql=c.f,Ul=l,Fl=Wl((function(){ql(1)}));Bl({target:"Object",stat:!0,forced:!Ul||Fl,sham:!Ul},{getOwnPropertyDescriptor:function(t,e){return ql(Nl(t),e)}});var Yl=j.Object,Gl=_l.exports=function(t,e){return Yl.getOwnPropertyDescriptor(t,e)};Yl.getOwnPropertyDescriptor.sham&&(Gl.sham=!0);var Hl=_l.exports,zl=s,Vl=function(t,e){var n=[][t];return!!n&&zl((function(){n.call(null,e||function(){throw 1},1)}))},Jl=Wc.forEach,Kl=Vl("forEach")?[].forEach:function(t){return Jl(this,t,arguments.length>1?arguments[1]:void 0)};ye({target:"Array",proto:!0,forced:[].forEach!=Kl},{forEach:Kl});var Zl=Ol("Array").forEach,Ql=Ln,Xl=Array.prototype,tf={DOMTokenList:!0,NodeList:!0},ef=function(t){var e=t.forEach;return t===Xl||t instanceof Array&&e===Xl.forEach||tf.hasOwnProperty(Ql(t))?Zl:e},nf=yc,rf=Sc,of=Qt,af=L("Reflect","ownKeys")||function(t){var e=nf.f(of(t)),n=rf.f;return n?e.concat(n(t)):e},uf=af,cf=M,sf=c,lf=Yu;ye({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(t){for(var e,n,r=cf(t),o=sf.f,i=uf(r),a={},u=0;i.length>u;)void 0!==(n=o(r,e=i[u++]))&&lf(a,e,n);return a}});var ff=j.Object.getOwnPropertyDescriptors,df={exports:{}};ye({target:"Object",stat:!0,forced:!l,sham:!l},{defineProperties:un});var hf=j.Object,pf=df.exports=function(t,e){return hf.defineProperties(t,e)};hf.defineProperties.sham&&(pf.sham=!0);var vf=df.exports,yf={exports:{}};ye({target:"Object",stat:!0,forced:!l,sham:!l},{defineProperty:Kt.f});var mf=j.Object,gf=yf.exports=function(t,e,n){return mf.defineProperty(t,e,n)};mf.defineProperty.sham&&(gf.sham=!0);var wf=yf.exports;function bf(t,e,n){return e in t?wf(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xf(t,e){var n=Dl(t);if(Ll){var r=Ll(t);e&&(r=Il(r).call(r,(function(e){return Hl(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ef(t){for(var e=1;e<arguments.length;e++){var n,r=null!=arguments[e]?arguments[e]:{};if(e%2)ef(n=xf(Object(r),!0)).call(n,(function(e){bf(t,e,r[e])}));else if(ff)vf(t,ff(r));else{var o;ef(o=xf(Object(r))).call(o,(function(e){wf(t,e,Hl(r,e))}))}}return t}function Of(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),wf(t,r.key,r)}}function Af(t,e,n){return e&&Sf(t.prototype,e),n&&Sf(t,n),t}var Mf={exports:{}};!function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,i=Object.create(o.prototype),a=new j(r||[]);return i._invoke=function(t,e,n){var r=f;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=A(a,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=l(t,e,n);if("normal"===c.type){if(r=n.done?p:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",v={};function y(){}function m(){}function g(){}var w={};c(w,i,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(T([])));x&&x!==n&&r.call(x,i)&&(w=x);var E=g.prototype=y.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function A(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:C}}function C(){return{value:e,done:!0}}return m.prototype=g,c(E,"constructor",g),c(g,"constructor",m),m.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},O(S.prototype),c(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new S(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,u,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(Mf);var kf=Mf.exports,jf=Wc.map;ye({target:"Array",proto:!0,forced:!Xu("map")},{map:function(t){return jf(this,t,arguments.length>1?arguments[1]:void 0)}});var Tf=Ol("Array").map,Cf=Array.prototype,Df=function(t){var e=t.map;return t===Cf||t instanceof Array&&e===Cf.map?Tf:e},Lf=ye,Pf=He.indexOf,$f=Vl,Rf=[].indexOf,If=!!Rf&&1/[1].indexOf(1,-0)<0,_f=$f("indexOf");Lf({target:"Array",proto:!0,forced:If||!_f},{indexOf:function(t){return If?Rf.apply(this,arguments)||0:Pf(this,t,arguments.length>1?arguments[1]:void 0)}});var Bf=Ol("Array").indexOf,Wf=Array.prototype,Nf=function(t){var e=t.indexOf;return t===Wf||t instanceof Array&&e===Wf.indexOf?Bf:e},qf=function(){function t(e){Of(this,t),bf(this,"state",void 0),bf(this,"defaultOption",{delay:300}),bf(this,"emptyAction",{request:{type:"empty"},responses:[],onResnponsed:[]}),bf(this,"defaultActionRequest",{always:!1,addMessage:!0}),this.state={option:Ef(Ef({},this.defaultOption),e),messages:[],action:this.emptyAction,actionHistory:[],onMessagesChanged:[],onActionChanged:[]}}var e;return Af(t,[{key:"addMessage",value:function(t){var e=this;return new $u((function(n){setTimeout((function(){var r=e.state.messages.push(t)-1;e.state.messages[r].createdAt=new Date,e.callOnMessagesChanged(),n(r)}),e.state.option.delay)}))}},{key:"updateMessage",value:function(t,e){if(e!==this.state.messages[t]){var n=this.state.messages[t].createdAt;this.state.messages[t]=e,this.state.messages[t].createdAt=n}this.state.messages[t].updatedAt=new Date,this.callOnMessagesChanged()}},{key:"removeMessage",value:function(t){this.state.messages[t].deletedAt=new Date,this.callOnMessagesChanged()}},{key:"getMessages",value:function(){return this.state.messages}},{key:"setMessages",value:function(t){this.clearMessages(),this.state.messages=jl(t),this.callOnMessagesChanged()}},{key:"clearMessages",value:function(){this.state.messages=[],this.callOnMessagesChanged()}},{key:"callOnMessagesChanged",value:function(){var t,e=this;Df(t=this.state.onMessagesChanged).call(t,(function(t){return t(e.state.messages)}))}},{key:"addOnMessagesChanged",value:function(t){this.state.onMessagesChanged.push(t)}},{key:"removeOnMessagesChanged",value:function(t){var e,n=Nf(e=this.state.onMessagesChanged).call(e,t);this.state.onActionChanged[n]=function(){}}},{key:"setActionRequest",value:function(t,e){var n=this,r={request:Ef(Ef({},this.defaultActionRequest),t),responses:[],onResnponsed:[]};return new $u((function(o,i){if(!t.always){r.onResnponsed.push((function(t){t.error?i(t.error):o(t)}))}e&&r.onResnponsed.push(e),n.state.action=r,n.state.actionHistory.push(r),n.callOnActionChanged(r.request),t.always&&o({type:"text",value:"dummy"})}))}},{key:"cancelActionRequest",value:function(){this.state.action=this.emptyAction,this.callOnActionChanged(this.emptyAction.request)}},{key:"getActionRequest",value:function(){var t=this.state.action,e=t.request,n=t.responses;if(e.always||!(n.length>0))return e}},{key:"setActionResponse",value:(e=Iu(kf.mark((function t(e,n){var r,o,i,a;return kf.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.state.action,o=r.request,i=r.responses,a=r.onResnponsed,e===o){t.next=3;break}throw new Error("Invalid action.");case 3:if(e.always||0!==a.length){t.next=5;break}throw new Error("onResponsed is not set.");case 5:if(i.push(n),this.callOnActionChanged(e,n),!e.addMessage){t.next=10;break}return t.next=10,this.addMessage({type:"text",content:n.value,self:!0});case 10:Df(a).call(a,(function(t){return t(n)}));case 11:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"getActionResponses",value:function(){return this.state.action.responses}},{key:"callOnActionChanged",value:function(t,e){var n;Df(n=this.state.onActionChanged).call(n,(function(n){return n(t,e)}))}},{key:"addOnActionChanged",value:function(t){this.state.onActionChanged.push(t)}},{key:"removeOnActionChanged",value:function(t){var e,n=Nf(e=this.state.onActionChanged).call(e,t);this.state.onActionChanged[n]=function(){}}},{key:"getOption",value:function(){return this.state.option}}]),t}();let Uf,Ff=window.AudioContext||window.webkitAudioContext,Yf=t=>{let e=new Event("error");return e.data=new Error("Wrong state for "+t),e};class Gf{constructor(t,e=null){this.stream=t,this.config=e,this.state="inactive",this.em=document.createDocumentFragment(),this.encoder=(t=>{let e=t.toString().replace(/^(\(\)\s*=>|function\s*\(\))\s*{/,"").replace(/}$/,""),n=new Blob([e]);return new Worker(URL.createObjectURL(n))})(Gf.encoder);let n=this;this.encoder.addEventListener("message",(t=>{let e=new Event("dataavailable");e.data=new Blob([t.data],{type:n.mimeType}),n.em.dispatchEvent(e),"inactive"===n.state&&n.em.dispatchEvent(new Event("stop"))}))}start(t){if("inactive"!==this.state)return this.em.dispatchEvent(Yf("start"));this.state="recording",Uf||(Uf=new Ff(this.config)),this.clone=this.stream.clone(),this.input=Uf.createMediaStreamSource(this.clone),this.processor=Uf.createScriptProcessor(2048,1,1),this.encoder.postMessage(["init",Uf.sampleRate]),this.processor.onaudioprocess=t=>{"recording"===this.state&&this.encoder.postMessage(["encode",t.inputBuffer.getChannelData(0)])},this.input.connect(this.processor),this.processor.connect(Uf.destination),this.em.dispatchEvent(new Event("start")),t&&(this.slicing=setInterval((()=>{"recording"===this.state&&this.requestData()}),t))}stop(){return"inactive"===this.state?this.em.dispatchEvent(Yf("stop")):(this.requestData(),this.state="inactive",this.clone.getTracks().forEach((t=>{t.stop()})),this.processor.disconnect(),this.input.disconnect(),clearInterval(this.slicing))}pause(){return"recording"!==this.state?this.em.dispatchEvent(Yf("pause")):(this.state="paused",this.em.dispatchEvent(new Event("pause")))}resume(){return"paused"!==this.state?this.em.dispatchEvent(Yf("resume")):(this.state="recording",this.em.dispatchEvent(new Event("resume")))}requestData(){return"inactive"===this.state?this.em.dispatchEvent(Yf("requestData")):this.encoder.postMessage(["dump",Uf.sampleRate])}addEventListener(...t){this.em.addEventListener(...t)}removeEventListener(...t){this.em.removeEventListener(...t)}dispatchEvent(...t){this.em.dispatchEvent(...t)}}Gf.prototype.mimeType="audio/wav",Gf.isTypeSupported=t=>Gf.prototype.mimeType===t,Gf.notSupported=!navigator.mediaDevices||!Ff,Gf.encoder=()=>{let t=[];onmessage=e=>{"encode"===e.data[0]?function(e){let n=e.length,r=new Uint8Array(2*n);for(let t=0;t<n;t++){let n=2*t,o=e[t];o>1?o=1:o<-1&&(o=-1),o*=32768,r[n]=o,r[n+1]=o>>8}t.push(r)}(e.data[1]):"dump"===e.data[0]&&function(e){let n=t.length?t[0].length:0,r=t.length*n,o=new Uint8Array(44+r),i=new DataView(o.buffer);i.setUint32(0,1380533830,!1),i.setUint32(4,36+r,!0),i.setUint32(8,1463899717,!1),i.setUint32(12,1718449184,!1),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,1,!0),i.setUint32(24,e,!0),i.setUint32(28,2*e,!0),i.setUint16(32,2,!0),i.setUint16(34,16,!0),i.setUint32(36,1684108385,!1),i.setUint32(40,r,!0);for(let e=0;e<t.length;e++)o.set(t[e],e*n+44);t=[],postMessage(o.buffer,[o.buffer])}(e.data[1])}};var Hf=function(){function t(){Of(this,t),bf(this,"md",void 0),bf(this,"recordChunks",void 0),window.MediaRecorder||(window.MediaRecorder=Gf),this.recordChunks=[]}var e,n,r;return Af(t,[{key:"initialize",value:(r=Iu(kf.mark((function t(){var e;return kf.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.md){t.next=2;break}return t.abrupt("return",this);case 2:return t.next=4,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 4:return e=t.sent,this.md=new MediaRecorder(e),this.recordChunks=[],t.abrupt("return",this);case 8:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"startRecord",value:(n=Iu(kf.mark((function t(){var e=this;return kf.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new $u((function(t){if(!e.md)throw new Error("Must be initialized.");e.recordChunks=[],e.md.addEventListener("start",(function(){t()})),e.md.addEventListener("dataavailable",(function(t){t.data.size>0&&e.recordChunks.push(t.data)})),e.md.start()})));case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"stopRecord",value:(e=Iu(kf.mark((function t(){var e=this;return kf.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new $u((function(t){if(!e.md)throw new Error("Must be initialized.");e.md.addEventListener("stop",(function(){t(new Blob(e.recordChunks))})),e.md.stop()})));case 1:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new t),this.instance}}]),t}();function zf(t,e){return function(t){if(Wu(t))return t}(t)||function(t,e){var n=null==t?null:void 0!==Ks&&Zs(t)||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||kl(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}bf(Hf,"instance",void 0);var Vf={exports:{}};!function(t,e){t.exports=function(){var t=1e3,e=6e4,n=36e5,r="millisecond",o="second",i="minute",a="hour",u="day",c="week",s="month",l="quarter",f="year",d="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(r,s),i=n-o<0,a=e.clone().add(r+(i?-1:1),s);return+(-(r+(n-o)/(i?o-a:a-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:s,y:f,w:c,d:u,D:d,h:a,m:i,s:o,ms:r,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},w="en",b={};b[w]=y;var x=function(t){return t instanceof A},E=function(t,e,n){var r;if(!t)return w;if("string"==typeof t)b[t]&&(r=t),e&&(b[t]=e,r=t);else{var o=t.name;b[o]=t,r=o}return!n&&r&&(w=r),r||!n&&w},O=function(t,e){if(x(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new A(n)},S=g;S.l=E,S.i=x,S.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var A=function(){function y(t){this.$L=E(t.locale,null,!0),this.parse(t)}var m=y.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(S.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(p);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return S},m.isValid=function(){return!(this.$d.toString()===h)},m.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,n){return S.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!S.u(e)||e,l=S.p(t),h=function(t,e){var o=S.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?o:o.endOf(u)},p=function(t,e){return S.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},v=this.$W,y=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(l){case f:return r?h(1,0):h(31,11);case s:return r?h(1,y):h(0,y+1);case c:var w=this.$locale().weekStart||0,b=(v<w?v+7:v)-w;return h(r?m-b:m+(6-b),y);case u:case d:return p(g+"Hours",0);case a:return p(g+"Minutes",1);case i:return p(g+"Seconds",2);case o:return p(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,c=S.p(t),l="set"+(this.$u?"UTC":""),h=(n={},n[u]=l+"Date",n[d]=l+"Date",n[s]=l+"Month",n[f]=l+"FullYear",n[a]=l+"Hours",n[i]=l+"Minutes",n[o]=l+"Seconds",n[r]=l+"Milliseconds",n)[c],p=c===u?this.$D+(e-this.$W):e;if(c===s||c===f){var v=this.clone().set(d,1);v.$d[h](p),v.init(),this.$d=v.set(d,Math.min(this.$D,v.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[S.p(t)]()},m.add=function(r,l){var d,h=this;r=Number(r);var p=S.p(l),v=function(t){var e=O(h);return S.w(e.date(e.date()+Math.round(t*r)),h)};if(p===s)return this.set(s,this.$M+r);if(p===f)return this.set(f,this.$y+r);if(p===u)return v(1);if(p===c)return v(7);var y=(d={},d[i]=e,d[a]=n,d[o]=t,d)[p]||1,m=this.$d.getTime()+r*y;return S.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=t||"YYYY-MM-DDTHH:mm:ssZ",o=S.z(this),i=this.$H,a=this.$m,u=this.$M,c=n.weekdays,s=n.months,l=function(t,n,o,i){return t&&(t[n]||t(e,r))||o[n].substr(0,i)},f=function(t){return S.s(i%12||12,t,"0")},d=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:S.s(u+1,2,"0"),MMM:l(n.monthsShort,u,s,3),MMMM:l(s,u),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,c,2),ddd:l(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:S.s(i,2,"0"),h:f(1),hh:f(2),a:d(i,a,!0),A:d(i,a,!1),m:String(a),mm:S.s(a,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:o};return r.replace(v,(function(t,e){return e||p[t]||o.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,h){var p,v=S.p(d),y=O(r),m=(y.utcOffset()-this.utcOffset())*e,g=this-y,w=S.m(this,y);return w=(p={},p[f]=w/12,p[s]=w,p[l]=w/3,p[c]=(g-m)/6048e5,p[u]=(g-m)/864e5,p[a]=g/n,p[i]=g/e,p[o]=g/t,p)[v]||g,h?w:S.a(w)},m.daysInMonth=function(){return this.endOf(s).$D},m.$locale=function(){return b[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=E(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return S.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},y}(),M=A.prototype;return O.prototype=M,[["$ms",r],["$s",o],["$m",i],["$H",a],["$W",u],["$M",s],["$y",f],["$D",d]].forEach((function(t){M[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,A,O),t.$i=!0),O},O.locale=E,O.isDayjs=x,O.unix=function(t){return O(1e3*t)},O.en=b[w],O.Ls=b,O.p={},O}()}(Vf);var Jf=Vf.exports;function Kf(t){var n=t.chatController,r=t.actionRequest,i=n,a=zf(o.default.useState(Hf.getInstance()),1)[0],u=zf(o.default.useState(!0),2),c=u[0],s=u[1],l=zf(o.default.useState(),2),f=l[0],d=l[1],h=o.default.useCallback((function(t){var e={type:"audio",value:t.message,error:t};i.setActionResponse(r,e)}),[r,i]),p=o.default.useCallback(Iu(kf.mark((function t(){return kf.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.initialize();case 3:return t.next=5,a.startRecord();case 5:s(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),h(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),[a,h]),v=o.default.useCallback(Iu(kf.mark((function t(){var e;return kf.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.stopRecord();case 3:e=t.sent,d(e),s(!0),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),h(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),[a,h]),y=o.default.useCallback((function(){if(f){var t={type:"audio",value:"Audio",audio:f};i.setActionResponse(r,t),d(void 0)}}),[r,f,i]),m=r.sendButtonText?r.sendButtonText:"">>>"";return o.default.createElement(e.Box,{sx:{flex:"1 1 auto",display:"flex","& > *":{flex:"1 1 auto",minWidth:0},"& > * + *":{ml:1}}},c&&o.default.createElement(e.Button,{type:"button",onClick:p,disabled:!c,variant:"contained",color:"primary",startIcon:o.default.createElement(e.Icon,null,"keyboard_voice")},"Rec start"),!c&&o.default.createElement(e.Button,{type:"button",onClick:v,disabled:c,variant:"contained",color:"primary",startIcon:o.default.createElement(e.Icon,null,"stop")},"Rec stop"),o.default.createElement(e.Button,{type:"button",onClick:y,disabled:!f,variant:"contained",color:"primary",startIcon:o.default.createElement(e.Icon,null,"send")},m))}var Zf=Ol("Array").concat,Qf=Array.prototype,Xf=function(t){var e=t.concat;return t===Qf||t instanceof Array&&e===Qf.concat?Zf:e};function td(t){var n=t.chatController,r=t.actionRequest,i=n,a=zf(o.default.useState([]),2),u=a[0],c=a[1],s=o.default.useCallback((function(t){var e=[];if(t)for(var n=0;n<t.length;n+=1){var r=t.item(n);r&&e.push(r)}c(e)}),[]),l=o.default.useCallback((function(){if(u.length>0){var t={type:"file",value:Df(u).call(u,(function(t){return t.name})).toString(),files:u};i.setActionResponse(r,t)}}),[r,i,u]),f=r.sendButtonText?r.sendButtonText:"">>>"";return o.default.createElement(e.Box,{sx:{flex:"1 1 auto",maxWidth:"100%",display:"flex",flexDirection:"column","& > *":{flex:"0 0 auto",maxWidth:"100%"},"& > * + *":{mt:1}}},o.default.createElement(e.List,null,Df(u).call(u,(function(t){var n;return o.default.createElement("div",{key:Xf(n="".concat(t.name,"-")).call(n,t.size)},o.default.createElement(e.Divider,null),o.default.createElement(e.ListItem,{key:t.name},o.default.createElement(e.ListItemIcon,null,o.default.createElement(e.Icon,null,"attach_file")),o.default.createElement(e.Typography,{style:{overflowWrap:"break-word",minWidth:0}},t.name)))}))),o.default.createElement(e.Box,{sx:{display:"flex","& > *":{flex:"1 1 auto",minWidth:0},"& > * + *":{ml:1}}},o.default.createElement(e.Button,{disabled:!1,component:"label",variant:"contained",color:"primary",startIcon:o.default.createElement(e.Icon,null,"folder")},"Select file",o.default.createElement("input",{type:"file",accept:r.accept,multiple:r.multiple,onChange:function(t){return s(t.target.files)},style:{display:"none"}})),o.default.createElement(e.Button,{type:"button",onClick:l,disabled:0===u.length,variant:"contained",color:"primary",startIcon:o.default.createElement(e.Icon,null,"send")},f)))}function ed(t){var n=t.id,r=t.message,i=t.showDate,a=t.showTime;if(r.deletedAt)return o.default.createElement("div",{id:n});var u=r.updatedAt?r.updatedAt:r.createdAt,c=o.default.createElement(e.Box,{minWidth:0,flexShrink:0,ml:r.self?1:0,mr:r.self?0:1},o.default.createElement(e.Avatar,{alt:r.username,src:r.avatar})),s=o.default.createElement(e.Box,{maxWidth:"100%",mx:1},o.default.createElement(e.Typography,{variant:"body2",align:r.self?"right":"left"},r.username)),l=o.default.createElement(e.Box,{maxWidth:"100%",mx:1},o.default.createElement(e.Typography,{variant:"body2",align:r.self?"right":"left",color:"textSecondary"},null==u?void 0:u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})));return o.default.createElement(e.Grow,{in:!0},o.default.createElement(e.Box,{maxWidth:"100%",display:"flex",flexDirection:"column"},i&&o.default.createElement(e.Typography,{align:"center"},null==u?void 0:u.toLocaleDateString()),o.default.createElement(e.Box,{id:n,maxWidth:"100%",my:1,pl:r.self?"20%":0,pr:r.self?0:"20%",display:"flex",justifyContent:r.self?"flex-end":"flex-start",style:{overflowWrap:"break-word"}},r.avatar&&!r.self&&c,o.default.createElement(e.Box,{minWidth:0,display:"flex",flexDirection:"column"},r.username&&s,o.default.createElement(e.Box,{maxWidth:"100%",py:1,px:2,bgcolor:r.self?"primary.main":"background.paper",color:r.self?"primary.contrastText":"text.primary",borderRadius:4,boxShadow:2},"text"===r.type&&o.default.createElement(e.Typography,{variant:"body1",style:{whiteSpace:"pre-wrap"}},r.content),"jsx"===r.type&&o.default.createElement("div",null,r.content)),a&&l),r.avatar&&r.self&&c)))}var nd=He.includes;ye({target:"Array",proto:!0},{includes:function(t){return nd(this,t,arguments.length>1?arguments[1]:void 0)}});var rd=Ol("Array").includes,od=k,id=w,ad=mt("match"),ud=function(t){var e;return od(t)&&(void 0!==(e=t[ad])?!!e:"RegExp"==id(t))},cd=mt("match"),sd=function(t){if(ud(t))throw TypeError("The method doesn't accept regular expressions");return t},ld=O,fd=Qn;ye({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[cd]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~fd(ld(this)).indexOf(fd(sd(t)),arguments.length>1?arguments[1]:void 0)}});var dd=Ol("String").includes,hd=rd,pd=dd,vd=Array.prototype,yd=String.prototype,md=function(t){var e=t.includes;return t===vd||t instanceof Array&&e===vd.includes?hd:"string"==typeof t||t===yd||t instanceof String&&e===yd.includes?pd:e};function gd(t){var n,r=t.chatController,i=t.actionRequest,a=r,u=zf(o.default.useState([]),2),c=u[0],s=u[1],l=o.default.useCallback((function(t){var e;md(c).call(c,t)?s(Il(c).call(c,(function(e){return e!==t}))):s(Xf(e=[]).call(e,jl(c),[t]))}),[c]),f=o.default.useCallback((function(){var t,e=Il(t=i.options).call(t,(function(t){return md(c).call(c,t.value)})),n={type:"multi-select",value:Df(e).call(e,(function(t){return t.text})).toString(),options:e};a.setActionResponse(i,n),s([])}),[i,a,c]),d=i.sendButtonText?i.sendButtonText:"">>>"";return o.default.createElement(e.Box,{sx:{flex:"1 1 auto",display:"flex",flexDirection:"column","& > *":{flex:"0 0 auto",maxWidth:"100%"},"& > * + *":{mt:1}}},Df(n=i.options).call(n,(function(t){var n;return o.default.createElement(e.Button,{key:Nf(n=i.options).call(n,t),type:"button",value:t.value,onClick:function(t){return l(t.currentTarget.value)},variant:md(c).call(c,t.value)?"contained":"outlined",color:"primary"},t.text)})),o.default.createElement(e.Button,{type:"button",onClick:f,disabled:0===c.length,variant:"contained",color:"primary",startIcon:o.default.createElement(e.Icon,null,"send")},d))}var wd=ye,bd=Wc.find,xd="find",Ed=!0;xd in[]&&Array(1).find((function(){Ed=!1})),wd({target:"Array",proto:!0,forced:Ed},{find:function(t){return bd(this,t,arguments.length>1?arguments[1]:void 0)}});var Od=Ol("Array").find,Sd=Array.prototype,Ad=function(t){var e=t.find;return t===Sd||t instanceof Array&&e===Sd.find?Od:e};function Md(t){var n,r=t.chatController,i=t.actionRequest,a=r,u=o.default.useCallback((function(t){var e,n=Ad(e=i.options).call(e,(function(e){return e.value===t}));if(!n)throw new Error("Unknown value: ".concat(t));var r={type:"select",value:n.text,option:n};a.setActionResponse(i,r)}),[i,a]);return o.default.createElement(e.Box,{sx:{flex:"1 1 auto",display:"flex",flexDirection:"column","& > *":{flex:"0 0 auto",maxWidth:"100%"},"& > * + *":{mt:1}}},Df(n=i.options).call(n,(function(t){var n;return o.default.createElement(e.Button,{key:Nf(n=i.options).call(n,t),type:"button",value:t.value,onClick:function(t){return u(t.currentTarget.value)},variant:"contained",color:"primary"},t.text)})))}function kd(t){var n=t.chatController,r=t.actionRequest,i=n,a=zf(o.default.useState(r.defaultValue),2),u=a[0],c=a[1],s=o.default.useCallback((function(){if(u){var t={type:"text",value:u};i.setActionResponse(r,t),c("")}}),[r,i,u]),l=o.default.useCallback((function(t){t.nativeEvent.isComposing||"Enter"!==t.key||t.shiftKey||(t.preventDefault(),s())}),[s]),f=r.sendButtonText?r.sendButtonText:"">>>"";return o.default.createElement(e.Box,{sx:{flex:"1 1 auto",display:"flex","& > *":{flex:"1 1 auto",minWidth:0},"& > * + *":{ml:1},"& :last-child":{flex:"0 1 auto"}}},o.default.createElement(e.TextField,{placeholder:r.placeholder,value:u,onChange:function(t){return c(t.target.value)},autoFocus:!0,multiline:!0,inputProps:{onKeyDown:l},variant:"outlined",maxRows:10}),o.default.createElement(e.Button,{type:"button",onClick:s,disabled:!u,variant:"contained",color:"primary",startIcon:o.default.createElement(e.Icon,null,"send")},f))}t.AudioMediaRecorder=Hf,t.ChatController=qf,t.MuiAudioInput=Kf,t.MuiChat=function(t){var n=t.chatController,r=zf(o.default.useState(n.getMessages()),2),i=r[0],a=r[1],u=zf(o.default.useState(n.getActionRequest()),2),c=u[0],s=u[1],l=o.default.useRef(null),f=o.default.useCallback((function(){l.current&&(l.current.scrollTop=l.current.scrollHeight)}),[l]);o.default.useEffect((function(){n.addOnMessagesChanged((function(){a(jl(n.getMessages())),f()})),n.addOnActionChanged((function(){s(n.getActionRequest()),f()}))}),[n,f]);var d=o.default.useMemo((function(){return c&&"custom"===c.type?c.Component:null}),[c]),h={type:"text",content:"Unknown message.",self:!1},p=Jf(0),v=Jf(0);return o.default.createElement(e.Box,{sx:{height:"100%",width:"100%",p:1,bgcolor:"background.default",display:"flex",flexDirection:"column","& > *":{maxWidth:"100%"},"& > * + *":{mt:1}}},o.default.createElement(e.Box,{sx:{flex:"1 1 0%",overflowY:"auto",WebkitOverflowScrolling:"touch",display:"flex",flexDirection:"column","& > *":{maxWidth:"100%"}},ref:l},Df(i).call(i,(function(t){var e=!1,r=!!n.getOption().showDateTime;if(n.getOption().showDateTime&&!t.deletedAt){var a=Jf(t.updatedAt?t.updatedAt:t.createdAt);a.format("YYYYMMDD")!==p.format("YYYYMMDD")&&(e=!0),p=a,a.diff(v)<6e4?r=!1:v=a}return"text"===t.type||"jsx"===t.type?o.default.createElement(ed,{key:Nf(i).call(i,t),id:"cu-msg-".concat(Nf(i).call(i,t)+1),message:t,showDate:e,showTime:r}):o.default.createElement(ed,{key:Nf(i).call(i,t),id:"cu-msg-".concat(Nf(i).call(i,t)+1),message:h,showDate:e,showTime:r})}))),o.default.createElement(e.Box,{sx:{flex:"0 1 auto",display:"flex",alignContent:"flex-end","& > *":{minWidth:0}}},c&&"text"===c.type&&o.default.createElement(kd,{chatController:n,actionRequest:c}),c&&"select"===c.type&&o.default.createElement(Md,{chatController:n,actionRequest:c}),c&&"multi-select"===c.type&&o.default.createElement(gd,{chatController:n,actionRequest:c}),c&&"file"===c.type&&o.default.createElement(td,{chatController:n,actionRequest:c}),c&&"audio"===c.type&&o.default.createElement(Kf,{chatController:n,actionRequest:c}),c&&"custom"===c.type&&o.default.createElement(d,{chatController:n,actionRequest:c})))},t.MuiFileInput=td,t.MuiMessage=ed,t.MuiMultiSelectInput=gd,t.MuiSelectInput=Md,t.MuiTextInput=kd,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=chat-ui-react.umd.polyfill.min.js.map
