{"version":3,"file":"chat-ui-react.umd.min.js","sources":["../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../node_modules/@babel/runtime/helpers/esm/createClass.js","../../node_modules/regenerator-runtime/runtime.js","../../node_modules/@babel/runtime/regenerator/index.js","../../src/chat-controller.ts","../../node_modules/audio-recorder-polyfill/index.js","../../node_modules/audio-recorder-polyfill/wave-encoder/index.js","../../src/audio-media-recorder.ts","../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../node_modules/dayjs/dayjs.min.js","../../src/mui/MuiAudioInput.tsx","../../src/mui/MuiFileInput.tsx","../../src/mui/MuiMessage.tsx","../../src/mui/MuiMultiSelectInput.tsx","../../src/mui/MuiSelectInput.tsx","../../src/mui/MuiTextInput.tsx","../../src/mui/MuiChat.tsx"],"sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","module.exports = require(\"regenerator-runtime\");\n","import {\n  ActionRequest,\n  ActionResponse,\n  ChatOption,\n  Message,\n  MessageContent,\n  OnActionChanged,\n  OnActionResponsed,\n  OnMessagesChanged,\n} from './chat-types';\n\ninterface ChatState {\n  option: ChatOption;\n  messages: Message<MessageContent>[];\n  action: Action;\n  actionHistory: Action[];\n  onMessagesChanged: OnMessagesChanged[];\n  onActionChanged: OnActionChanged[];\n}\n\ninterface Action {\n  request: ActionRequest;\n  responses: ActionResponse[];\n  onResnponsed: OnActionResponsed[];\n}\n\nexport class ChatController {\n  private state: ChatState;\n\n  private defaultOption: ChatOption = {\n    delay: 300,\n  };\n\n  private emptyAction: Action = {\n    request: { type: 'empty' },\n    responses: [],\n    onResnponsed: [],\n  };\n\n  private defaultActionRequest = {\n    always: false,\n    addMessage: true,\n  };\n\n  constructor(option?: ChatOption) {\n    this.state = {\n      option: { ...this.defaultOption, ...option },\n      messages: [],\n      action: this.emptyAction,\n      actionHistory: [],\n      onMessagesChanged: [],\n      onActionChanged: [],\n    };\n  }\n\n  addMessage(message: Message<MessageContent>): Promise<number> {\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        const len = this.state.messages.push(message);\n        const idx = len - 1;\n        this.state.messages[idx].createdAt = new Date();\n        this.callOnMessagesChanged();\n\n        resolve(idx);\n      }, this.state.option.delay);\n    });\n  }\n\n  updateMessage(index: number, message: Message<MessageContent>): void {\n    if (message !== this.state.messages[index]) {\n      const { createdAt } = this.state.messages[index];\n      this.state.messages[index] = message;\n      this.state.messages[index].createdAt = createdAt;\n    }\n\n    this.state.messages[index].updatedAt = new Date();\n    this.callOnMessagesChanged();\n  }\n\n  removeMessage(index: number): void {\n    this.state.messages[index].deletedAt = new Date();\n    this.callOnMessagesChanged();\n  }\n\n  getMessages(): Message<MessageContent>[] {\n    return this.state.messages;\n  }\n\n  setMessages(messages: Message<MessageContent>[]): void {\n    this.clearMessages();\n    this.state.messages = [...messages];\n    this.callOnMessagesChanged();\n  }\n\n  clearMessages(): void {\n    this.state.messages = [];\n    this.callOnMessagesChanged();\n  }\n\n  private callOnMessagesChanged(): void {\n    this.state.onMessagesChanged.map((h) => h(this.state.messages));\n  }\n\n  addOnMessagesChanged(callback: OnMessagesChanged): void {\n    this.state.onMessagesChanged.push(callback);\n  }\n\n  removeOnMessagesChanged(callback: OnMessagesChanged): void {\n    const idx = this.state.onMessagesChanged.indexOf(callback);\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    this.state.onActionChanged[idx] = (): void => {};\n  }\n\n  setActionRequest<T extends ActionRequest>(\n    request: T,\n    onResponse?: OnActionResponsed,\n  ): Promise<ActionResponse> {\n    const action: Action = {\n      request: { ...this.defaultActionRequest, ...request },\n      responses: [],\n      onResnponsed: [],\n    };\n\n    // See setActionResponse method\n    return new Promise((resolve, reject) => {\n      if (!request.always) {\n        const returnResponse = (response: ActionResponse): void => {\n          if (!response.error) {\n            resolve(response);\n          } else {\n            reject(response.error);\n          }\n        };\n        action.onResnponsed.push(returnResponse);\n      }\n\n      if (onResponse) {\n        action.onResnponsed.push(onResponse);\n      }\n\n      this.state.action = action;\n      this.state.actionHistory.push(action);\n      this.callOnActionChanged(action.request);\n\n      if (request.always) {\n        resolve({ type: 'text', value: 'dummy' });\n      }\n    });\n  }\n\n  cancelActionRequest(): void {\n    this.state.action = this.emptyAction;\n    this.callOnActionChanged(this.emptyAction.request);\n  }\n\n  getActionRequest(): ActionRequest | undefined {\n    const { request, responses } = this.state.action;\n    if (!request.always && responses.length > 0) {\n      return undefined;\n    }\n\n    return request;\n  }\n\n  async setActionResponse(\n    request: ActionRequest,\n    response: ActionResponse,\n  ): Promise<void> {\n    const { request: origReq, responses, onResnponsed } = this.state.action;\n    if (request !== origReq) {\n      throw new Error('Invalid action.');\n    }\n    if (!request.always && onResnponsed.length === 0) {\n      throw new Error('onResponsed is not set.');\n    }\n\n    responses.push(response);\n    this.callOnActionChanged(request, response);\n\n    if (request.addMessage) {\n      await this.addMessage({\n        type: 'text',\n        content: response.value,\n        self: true,\n      });\n    }\n\n    onResnponsed.map((h) => h(response));\n  }\n\n  getActionResponses(): ActionResponse[] {\n    return this.state.action.responses;\n  }\n\n  private callOnActionChanged(\n    request: ActionRequest,\n    response?: ActionResponse,\n  ): void {\n    this.state.onActionChanged.map((h) => h(request, response));\n  }\n\n  addOnActionChanged(callback: OnActionChanged): void {\n    this.state.onActionChanged.push(callback);\n  }\n\n  removeOnActionChanged(callback: OnActionChanged): void {\n    const idx = this.state.onActionChanged.indexOf(callback);\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    this.state.onActionChanged[idx] = (): void => {};\n  }\n\n  getOption(): ChatOption {\n    return this.state.option;\n  }\n}\n","import waveEncoder from './wave-encoder/index.js'\n\nlet AudioContext = window.AudioContext || window.webkitAudioContext\n\nlet createWorker = fn => {\n  let js = fn\n    .toString()\n    .replace(/^(\\(\\)\\s*=>|function\\s*\\(\\))\\s*{/, '')\n    .replace(/}$/, '')\n  let blob = new Blob([js])\n  return new Worker(URL.createObjectURL(blob))\n}\n\nlet error = method => {\n  let event = new Event('error')\n  event.data = new Error('Wrong state for ' + method)\n  return event\n}\n\nlet context\n\n/**\n * Audio Recorder with MediaRecorder API.\n *\n * @example\n * navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {\n *   let recorder = new MediaRecorder(stream)\n * })\n */\nclass MediaRecorder {\n  /**\n   * @param {MediaStream} stream The audio stream to record.\n   */\n  constructor (stream, config = null) {\n    /**\n     * The `MediaStream` passed into the constructor.\n     * @type {MediaStream}\n     */\n    this.stream = stream\n    this.config = config\n    /**\n     * The current state of recording process.\n     * @type {\"inactive\"|\"recording\"|\"paused\"}\n     */\n    this.state = 'inactive'\n\n    this.em = document.createDocumentFragment()\n    this.encoder = createWorker(MediaRecorder.encoder)\n\n    let recorder = this\n    this.encoder.addEventListener('message', e => {\n      let event = new Event('dataavailable')\n      event.data = new Blob([e.data], { type: recorder.mimeType })\n      recorder.em.dispatchEvent(event)\n      if (recorder.state === 'inactive') {\n        recorder.em.dispatchEvent(new Event('stop'))\n      }\n    })\n  }\n\n  /**\n   * Begins recording media.\n   *\n   * @param {number} [timeslice] The milliseconds to record into each `Blob`.\n   *                             If this parameter isn’t included, single `Blob`\n   *                             will be recorded.\n   *\n   * @return {undefined}\n   *\n   * @example\n   * recordButton.addEventListener('click', () => {\n   *   recorder.start()\n   * })\n   */\n  start (timeslice) {\n    if (this.state !== 'inactive') {\n      return this.em.dispatchEvent(error('start'))\n    }\n\n    this.state = 'recording'\n\n    if (!context) {\n      context = new AudioContext(this.config)\n    }\n    this.clone = this.stream.clone()\n    this.input = context.createMediaStreamSource(this.clone)\n    this.processor = context.createScriptProcessor(2048, 1, 1)\n\n    this.encoder.postMessage(['init', context.sampleRate])\n\n    this.processor.onaudioprocess = e => {\n      if (this.state === 'recording') {\n        this.encoder.postMessage(['encode', e.inputBuffer.getChannelData(0)])\n      }\n    }\n\n    this.input.connect(this.processor)\n    this.processor.connect(context.destination)\n\n    this.em.dispatchEvent(new Event('start'))\n\n    if (timeslice) {\n      this.slicing = setInterval(() => {\n        if (this.state === 'recording') this.requestData()\n      }, timeslice)\n    }\n\n    return undefined\n  }\n\n  /**\n   * Stop media capture and raise `dataavailable` event with recorded data.\n   *\n   * @return {undefined}\n   *\n   * @example\n   * finishButton.addEventListener('click', () => {\n   *   recorder.stop()\n   * })\n   */\n  stop () {\n    if (this.state === 'inactive') {\n      return this.em.dispatchEvent(error('stop'))\n    }\n\n    this.requestData()\n    this.state = 'inactive'\n    this.clone.getTracks().forEach(track => {\n      track.stop()\n    })\n    this.processor.disconnect()\n    this.input.disconnect()\n    return clearInterval(this.slicing)\n  }\n\n  /**\n   * Pauses recording of media streams.\n   *\n   * @return {undefined}\n   *\n   * @example\n   * pauseButton.addEventListener('click', () => {\n   *   recorder.pause()\n   * })\n   */\n  pause () {\n    if (this.state !== 'recording') {\n      return this.em.dispatchEvent(error('pause'))\n    }\n\n    this.state = 'paused'\n    return this.em.dispatchEvent(new Event('pause'))\n  }\n\n  /**\n   * Resumes media recording when it has been previously paused.\n   *\n   * @return {undefined}\n   *\n   * @example\n   * resumeButton.addEventListener('click', () => {\n   *   recorder.resume()\n   * })\n   */\n  resume () {\n    if (this.state !== 'paused') {\n      return this.em.dispatchEvent(error('resume'))\n    }\n\n    this.state = 'recording'\n    return this.em.dispatchEvent(new Event('resume'))\n  }\n\n  /**\n   * Raise a `dataavailable` event containing the captured media.\n   *\n   * @return {undefined}\n   *\n   * @example\n   * this.on('nextData', () => {\n   *   recorder.requestData()\n   * })\n   */\n  requestData () {\n    if (this.state === 'inactive') {\n      return this.em.dispatchEvent(error('requestData'))\n    }\n\n    return this.encoder.postMessage(['dump', context.sampleRate])\n  }\n\n  /**\n   * Add listener for specified event type.\n   *\n   * @param {\"start\"|\"stop\"|\"pause\"|\"resume\"|\"dataavailable\"|\"error\"}\n   * type Event type.\n   * @param {function} listener The listener function.\n   *\n   * @return {undefined}\n   *\n   * @example\n   * recorder.addEventListener('dataavailable', e => {\n   *   audio.src = URL.createObjectURL(e.data)\n   * })\n   */\n  addEventListener (...args) {\n    this.em.addEventListener(...args)\n  }\n\n  /**\n   * Remove event listener.\n   *\n   * @param {\"start\"|\"stop\"|\"pause\"|\"resume\"|\"dataavailable\"|\"error\"}\n   * type Event type.\n   * @param {function} listener The same function used in `addEventListener`.\n   *\n   * @return {undefined}\n   */\n  removeEventListener (...args) {\n    this.em.removeEventListener(...args)\n  }\n\n  /**\n   * Calls each of the listeners registered for a given event.\n   *\n   * @param {Event} event The event object.\n   *\n   * @return {boolean} Is event was no canceled by any listener.\n   */\n  dispatchEvent (...args) {\n    this.em.dispatchEvent(...args)\n  }\n}\n\n/**\n * The MIME type that is being used for recording.\n * @type {string}\n */\nMediaRecorder.prototype.mimeType = 'audio/wav'\n\n/**\n * Returns `true` if the MIME type specified is one the polyfill can record.\n *\n * This polyfill supports `audio/wav` and `audio/mpeg`.\n *\n * @param {string} mimeType The mimeType to check.\n *\n * @return {boolean} `true` on `audio/wav` and `audio/mpeg` MIME type.\n */\nMediaRecorder.isTypeSupported = mimeType => {\n  return MediaRecorder.prototype.mimeType === mimeType\n}\n\n/**\n * `true` if MediaRecorder can not be polyfilled in the current browser.\n * @type {boolean}\n *\n * @example\n * if (MediaRecorder.notSupported) {\n *   showWarning('Audio recording is not supported in this browser')\n * }\n */\nMediaRecorder.notSupported = !navigator.mediaDevices || !AudioContext\n\n/**\n * Converts RAW audio buffer to compressed audio files.\n * It will be loaded to Web Worker.\n * By default, WAVE encoder will be used.\n * @type {function}\n *\n * @example\n * MediaRecorder.prototype.mimeType = 'audio/ogg'\n * MediaRecorder.encoder = oggEncoder\n */\nMediaRecorder.encoder = waveEncoder\n\nexport default MediaRecorder\n","// Copied from https://github.com/chris-rudmin/Recorderjs\n\nexport default () => {\n  let BYTES_PER_SAMPLE = 2\n\n  let recorded = []\n\n  function encode (buffer) {\n    let length = buffer.length\n    let data = new Uint8Array(length * BYTES_PER_SAMPLE)\n    for (let i = 0; i < length; i++) {\n      let index = i * BYTES_PER_SAMPLE\n      let sample = buffer[i]\n      if (sample > 1) {\n        sample = 1\n      } else if (sample < -1) {\n        sample = -1\n      }\n      sample = sample * 32768\n      data[index] = sample\n      data[index + 1] = sample >> 8\n    }\n    recorded.push(data)\n  }\n\n  function dump (sampleRate) {\n    let bufferLength = recorded.length ? recorded[0].length : 0\n    let length = recorded.length * bufferLength\n    let wav = new Uint8Array(44 + length)\n    let view = new DataView(wav.buffer)\n\n    // RIFF identifier 'RIFF'\n    view.setUint32(0, 1380533830, false)\n    // file length minus RIFF identifier length and file description length\n    view.setUint32(4, 36 + length, true)\n    // RIFF type 'WAVE'\n    view.setUint32(8, 1463899717, false)\n    // format chunk identifier 'fmt '\n    view.setUint32(12, 1718449184, false)\n    // format chunk length\n    view.setUint32(16, 16, true)\n    // sample format (raw)\n    view.setUint16(20, 1, true)\n    // channel count\n    view.setUint16(22, 1, true)\n    // sample rate\n    view.setUint32(24, sampleRate, true)\n    // byte rate (sample rate * block align)\n    view.setUint32(28, sampleRate * BYTES_PER_SAMPLE, true)\n    // block align (channel count * bytes per sample)\n    view.setUint16(32, BYTES_PER_SAMPLE, true)\n    // bits per sample\n    view.setUint16(34, 8 * BYTES_PER_SAMPLE, true)\n    // data chunk identifier 'data'\n    view.setUint32(36, 1684108385, false)\n    // data chunk length\n    view.setUint32(40, length, true)\n\n    // eslint-disable-next-line unicorn/no-for-loop\n    for (let i = 0; i < recorded.length; i++) {\n      wav.set(recorded[i], i * bufferLength + 44)\n    }\n\n    recorded = []\n    postMessage(wav.buffer, [wav.buffer])\n  }\n\n  onmessage = e => {\n    if (e.data[0] === 'encode') {\n      encode(e.data[1])\n    } else if (e.data[0] === 'dump') {\n      dump(e.data[1])\n    }\n  }\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport AudioRecorder from 'audio-recorder-polyfill';\n\nexport class AudioMediaRecorder {\n  private static instance: AudioMediaRecorder;\n\n  static getInstance(): AudioMediaRecorder {\n    if (!this.instance) {\n      this.instance = new AudioMediaRecorder();\n    }\n\n    return this.instance;\n  }\n\n  private md?: MediaRecorder;\n\n  private recordChunks: Blob[];\n\n  constructor() {\n    if (!window.MediaRecorder) {\n      window.MediaRecorder = AudioRecorder;\n    }\n    this.recordChunks = [];\n  }\n\n  async initialize(): Promise<AudioMediaRecorder> {\n    if (this.md) {\n      return this;\n    }\n\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: true,\n      video: false,\n    });\n    this.md = new MediaRecorder(stream);\n    this.recordChunks = [];\n\n    return this;\n  }\n\n  async startRecord(): Promise<void> {\n    return new Promise((resolve) => {\n      if (!this.md) {\n        throw new Error('Must be initialized.');\n      }\n\n      this.recordChunks = [];\n\n      this.md.addEventListener('start', () => {\n        resolve();\n      });\n\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      this.md.addEventListener('dataavailable', (e: BlobEvent) => {\n        if (e.data.size > 0) {\n          this.recordChunks.push(e.data);\n        }\n      });\n\n      this.md.start();\n    });\n  }\n\n  async stopRecord(): Promise<Blob> {\n    return new Promise((resolve) => {\n      if (!this.md) {\n        throw new Error('Must be initialized.');\n      }\n\n      this.md.addEventListener('stop', () => {\n        resolve(new Blob(this.recordChunks));\n      });\n\n      this.md.stop();\n    });\n  }\n}\n","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",f=\"month\",h=\"quarter\",c=\"year\",d=\"date\",$=\"Invalid Date\",l=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},D=\"en\",v={};v[D]=M;var p=function(t){return t instanceof _},S=function(t,e,n){var r;if(!t)return D;if(\"string\"==typeof t)v[t]&&(r=t),e&&(v[t]=e,r=t);else{var i=t.name;v[i]=t,r=i}return!n&&r&&(D=r),r||!n&&D},w=function(t,e){if(p(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=g;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===$)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),$=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},l=function(t,e){return O.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,g=\"set\"+(this.$u?\"UTC\":\"\");switch(h){case c:return r?$(1,0):$(31,11);case f:return r?$(1,M):$(0,M+1);case o:var D=this.$locale().weekStart||0,v=(y<D?y+7:y)-D;return $(r?m-v:m+(6-v),M);case a:case d:return l(g+\"Hours\",0);case u:return l(g+\"Minutes\",1);case s:return l(g+\"Seconds\",2);case i:return l(g+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h=\"set\"+(this.$u?\"UTC\":\"\"),$=(n={},n[a]=h+\"Date\",n[d]=h+\"Date\",n[f]=h+\"Month\",n[c]=h+\"FullYear\",n[u]=h+\"Hours\",n[s]=h+\"Minutes\",n[i]=h+\"Seconds\",n[r]=h+\"Milliseconds\",n)[o],l=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[$](l),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,$=this;r=Number(r);var l=O.p(h),y=function(t){var e=w($);return O.w(e.date(e.date()+Math.round(t*r)),$)};if(l===f)return this.set(f,this.$M+r);if(l===c)return this.set(c,this.$y+r);if(l===a)return y(1);if(l===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[l]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||$;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].substr(0,s)},c=function(t){return O.s(s%12||12,t,\"0\")},d=n.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,\"0\"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,\"0\"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,\"0\"),s:String(this.$s),ss:O.s(this.$s,2,\"0\"),SSS:O.s(this.$ms,3,\"0\"),Z:i};return r.replace(y,(function(t,e){return e||l[t]||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,$){var l,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,g=this-M,D=O.m(this,M);return D=(l={},l[c]=D/12,l[f]=D,l[h]=D/3,l[o]=(g-m)/6048e5,l[a]=(g-m)/864e5,l[u]=g/n,l[s]=g/e,l[i]=g/t,l)[y]||g,$?D:O.a(D)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return v[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),b=_.prototype;return w.prototype=b,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",f],[\"$y\",c],[\"$D\",d]].forEach((function(t){b[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=v[D],w.Ls=v,w.p={},w}));","import { Box, Button, Icon } from '@mui/material';\nimport React from 'react';\n\nimport { AudioMediaRecorder } from '../audio-media-recorder';\nimport { ChatController } from '../chat-controller';\nimport { AudioActionRequest, AudioActionResponse } from '../chat-types';\n\nexport function MuiAudioInput({\n  chatController,\n  actionRequest,\n}: {\n  chatController: ChatController;\n  actionRequest: AudioActionRequest;\n}): React.ReactElement {\n  const chatCtl = chatController;\n  const [audioRec] = React.useState(AudioMediaRecorder.getInstance());\n  const [stopped, setStopped] = React.useState(true);\n  const [audio, setAudio] = React.useState<Blob | undefined>();\n\n  const handleError = React.useCallback(\n    (error: Error): void => {\n      const value: AudioActionResponse = {\n        type: 'audio',\n        value: error.message,\n        error,\n      };\n      chatCtl.setActionResponse(actionRequest, value);\n    },\n    [actionRequest, chatCtl],\n  );\n\n  const handleStart = React.useCallback(async (): Promise<void> => {\n    try {\n      await audioRec.initialize();\n      await audioRec.startRecord();\n      setStopped(false);\n    } catch (error) {\n      handleError(error as Error);\n    }\n  }, [audioRec, handleError]);\n\n  const handleStop = React.useCallback(async (): Promise<void> => {\n    try {\n      const a = await audioRec.stopRecord();\n      setAudio(a);\n      setStopped(true);\n    } catch (error) {\n      handleError(error as Error);\n    }\n  }, [audioRec, handleError]);\n\n  const sendResponse = React.useCallback((): void => {\n    if (audio) {\n      const value: AudioActionResponse = {\n        type: 'audio',\n        value: 'Audio',\n        audio,\n      };\n      chatCtl.setActionResponse(actionRequest, value);\n      setAudio(undefined);\n    }\n  }, [actionRequest, audio, chatCtl]);\n\n  const sendButtonText = actionRequest.sendButtonText\n    ? actionRequest.sendButtonText\n    : 'Send';\n\n  return (\n    <Box\n      sx={{\n        flex: '1 1 auto',\n        display: 'flex',\n        '& > *': {\n          flex: '1 1 auto',\n          minWidth: 0,\n        },\n        '& > * + *': {\n          ml: 1,\n        },\n      }}\n    >\n      {stopped && (\n        <Button\n          type=\"button\"\n          onClick={handleStart}\n          disabled={!stopped}\n          variant=\"contained\"\n          color=\"primary\"\n          startIcon={<Icon>keyboard_voice</Icon>}\n        >\n          Rec start\n        </Button>\n      )}\n      {!stopped && (\n        <Button\n          type=\"button\"\n          onClick={handleStop}\n          disabled={stopped}\n          variant=\"contained\"\n          color=\"primary\"\n          startIcon={<Icon>stop</Icon>}\n        >\n          Rec stop\n        </Button>\n      )}\n      <Button\n        type=\"button\"\n        onClick={sendResponse}\n        disabled={!audio}\n        variant=\"contained\"\n        color=\"primary\"\n        startIcon={<Icon>send</Icon>}\n      >\n        {sendButtonText}\n      </Button>\n    </Box>\n  );\n}\n","import {\n  Box,\n  Button,\n  Divider,\n  Icon,\n  List,\n  ListItem,\n  ListItemIcon,\n  Typography,\n} from '@mui/material';\nimport React from 'react';\n\nimport { ChatController } from '../chat-controller';\nimport { FileActionRequest, FileActionResponse } from '../chat-types';\n\nexport function MuiFileInput({\n  chatController,\n  actionRequest,\n}: {\n  chatController: ChatController;\n  actionRequest: FileActionRequest;\n}): React.ReactElement {\n  const chatCtl = chatController;\n  const [files, setFiles] = React.useState<File[]>([]);\n\n  const handleFileChange = React.useCallback(\n    (fileList: FileList | null): void => {\n      // Convert FileList to File[]\n      const fileArray: File[] = [];\n      if (fileList) {\n        for (let i = 0; i < fileList.length; i += 1) {\n          const file = fileList.item(i);\n          if (file) {\n            fileArray.push(file);\n          }\n        }\n      }\n      setFiles(fileArray);\n    },\n    [],\n  );\n\n  const setResponse = React.useCallback((): void => {\n    if (files.length > 0) {\n      const value = files.map((f) => f.name).toString();\n      const res: FileActionResponse = { type: 'file', value, files };\n      chatCtl.setActionResponse(actionRequest, res);\n    }\n  }, [actionRequest, chatCtl, files]);\n\n  const sendButtonText = actionRequest.sendButtonText\n    ? actionRequest.sendButtonText\n    : 'Send';\n\n  return (\n    <Box\n      sx={{\n        flex: '1 1 auto',\n        maxWidth: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        '& > *': {\n          flex: '0 0 auto',\n          maxWidth: '100%',\n        },\n        '& > * + *': {\n          mt: 1,\n        },\n      }}\n    >\n      <List>\n        {files.map((f) => (\n          <div key={`${f.name}-${f.size}`}>\n            <Divider />\n            <ListItem key={f.name}>\n              <ListItemIcon>\n                <Icon>attach_file</Icon>\n              </ListItemIcon>\n              <Typography style={{ overflowWrap: 'break-word', minWidth: 0 }}>\n                {f.name}\n              </Typography>\n              {/* <ListItemText primary={f.name} /> */}\n            </ListItem>\n          </div>\n        ))}\n      </List>\n      <Box\n        sx={{\n          display: 'flex',\n          '& > *': {\n            flex: '1 1 auto',\n            minWidth: 0,\n          },\n          '& > * + *': {\n            ml: 1,\n          },\n        }}\n      >\n        <Button\n          disabled={false}\n          component=\"label\"\n          variant=\"contained\"\n          color=\"primary\"\n          startIcon={<Icon>folder</Icon>}\n        >\n          Select file\n          <input\n            type=\"file\"\n            accept={actionRequest.accept}\n            multiple={actionRequest.multiple}\n            onChange={(e): void => handleFileChange(e.target.files)}\n            style={{ display: 'none' }}\n          />\n        </Button>\n        <Button\n          type=\"button\"\n          onClick={setResponse}\n          disabled={files.length === 0}\n          variant=\"contained\"\n          color=\"primary\"\n          startIcon={<Icon>send</Icon>}\n        >\n          {sendButtonText}\n        </Button>\n      </Box>\n    </Box>\n  );\n}\n","import { Avatar, Box, Grow, Typography } from '@mui/material';\nimport React from 'react';\n\nimport { Message, MessageContent } from '../chat-types';\n\nexport function MuiMessage({\n  id,\n  message,\n  showDate,\n  showTime,\n}: {\n  id: string;\n  message: Message<MessageContent>;\n  showDate: boolean;\n  showTime: boolean;\n}): React.ReactElement {\n  if (message.deletedAt) {\n    return <div id={id} />;\n  }\n\n  const dispDate = message.updatedAt ? message.updatedAt : message.createdAt;\n\n  const ChatAvator = (\n    <Box\n      minWidth={0}\n      flexShrink={0}\n      ml={message.self ? 1 : 0}\n      mr={message.self ? 0 : 1}\n    >\n      <Avatar alt={message.username} src={message.avatar} />\n    </Box>\n  );\n\n  const ChatUsername = (\n    <Box maxWidth=\"100%\" mx={1}>\n      <Typography variant=\"body2\" align={message.self ? 'right' : 'left'}>\n        {message.username}\n      </Typography>\n    </Box>\n  );\n\n  const ChatDate = (\n    <Box maxWidth=\"100%\" mx={1}>\n      <Typography\n        variant=\"body2\"\n        align={message.self ? 'right' : 'left'}\n        color=\"textSecondary\"\n      >\n        {dispDate?.toLocaleTimeString([], {\n          hour: '2-digit',\n          minute: '2-digit',\n        })}\n      </Typography>\n    </Box>\n  );\n\n  return (\n    <Grow in>\n      <Box maxWidth=\"100%\" display=\"flex\" flexDirection=\"column\">\n        {showDate && (\n          <Typography align=\"center\">\n            {dispDate?.toLocaleDateString()}\n          </Typography>\n        )}\n        <Box\n          id={id}\n          maxWidth=\"100%\"\n          my={1}\n          pl={message.self ? '20%' : 0}\n          pr={message.self ? 0 : '20%'}\n          display=\"flex\"\n          justifyContent={message.self ? 'flex-end' : 'flex-start'}\n          style={{ overflowWrap: 'break-word' }}\n        >\n          {message.avatar && !message.self && ChatAvator}\n          <Box minWidth={0} display=\"flex\" flexDirection=\"column\">\n            {message.username && ChatUsername}\n            <Box\n              maxWidth=\"100%\"\n              py={1}\n              px={2}\n              bgcolor={message.self ? 'primary.main' : 'background.paper'}\n              color={message.self ? 'primary.contrastText' : 'text.primary'}\n              borderRadius={4}\n              boxShadow={2}\n            >\n              {message.type === 'text' && (\n                <Typography variant=\"body1\" style={{ whiteSpace: 'pre-wrap' }}>\n                  {message.content}\n                </Typography>\n              )}\n              {message.type === 'jsx' && <div>{message.content}</div>}\n            </Box>\n            {showTime && ChatDate}\n          </Box>\n          {message.avatar && message.self && ChatAvator}\n        </Box>\n      </Box>\n    </Grow>\n  );\n}\n","import { Box, Button, Icon } from '@mui/material';\nimport React from 'react';\n\nimport { ChatController } from '../chat-controller';\nimport {\n  MultiSelectActionRequest,\n  MultiSelectActionResponse,\n} from '../chat-types';\n\nexport function MuiMultiSelectInput({\n  chatController,\n  actionRequest,\n}: {\n  chatController: ChatController;\n  actionRequest: MultiSelectActionRequest;\n}): React.ReactElement {\n  const chatCtl = chatController;\n  const [values, setValues] = React.useState<string[]>([]);\n\n  const handleSelect = React.useCallback(\n    (value: string): void => {\n      if (!values.includes(value)) {\n        setValues([...values, value]);\n      } else {\n        setValues(values.filter((v) => v !== value));\n      }\n    },\n    [values],\n  );\n\n  const setResponse = React.useCallback((): void => {\n    const options = actionRequest.options.filter((o) =>\n      values.includes(o.value),\n    );\n\n    const res: MultiSelectActionResponse = {\n      type: 'multi-select',\n      value: options.map((o) => o.text).toString(),\n      options,\n    };\n    chatCtl.setActionResponse(actionRequest, res);\n    setValues([]);\n  }, [actionRequest, chatCtl, values]);\n\n  const sendButtonText = actionRequest.sendButtonText\n    ? actionRequest.sendButtonText\n    : 'Send';\n\n  return (\n    <Box\n      sx={{\n        flex: '1 1 auto',\n        display: 'flex',\n        flexDirection: 'column',\n        '& > *': {\n          flex: '0 0 auto',\n          maxWidth: '100%',\n        },\n        '& > * + *': {\n          mt: 1,\n        },\n      }}\n    >\n      {actionRequest.options.map((o) => (\n        <Button\n          key={actionRequest.options.indexOf(o)}\n          type=\"button\"\n          value={o.value}\n          onClick={(e): void => handleSelect(e.currentTarget.value)}\n          variant={!values.includes(o.value) ? 'outlined' : 'contained'}\n          color=\"primary\"\n        >\n          {o.text}\n        </Button>\n      ))}\n      <Button\n        type=\"button\"\n        onClick={setResponse}\n        disabled={values.length === 0}\n        variant=\"contained\"\n        color=\"primary\"\n        startIcon={<Icon>send</Icon>}\n      >\n        {sendButtonText}\n      </Button>\n    </Box>\n  );\n}\n","import { Box, Button } from '@mui/material';\nimport React from 'react';\n\nimport { ChatController } from '../chat-controller';\nimport { SelectActionRequest, SelectActionResponse } from '../chat-types';\n\nexport function MuiSelectInput({\n  chatController,\n  actionRequest,\n}: {\n  chatController: ChatController;\n  actionRequest: SelectActionRequest;\n}): React.ReactElement {\n  const chatCtl = chatController;\n\n  const setResponse = React.useCallback(\n    (value: string): void => {\n      const option = actionRequest.options.find((o) => o.value === value);\n      if (!option) {\n        throw new Error(`Unknown value: ${value}`);\n      }\n      const res: SelectActionResponse = {\n        type: 'select',\n        value: option.text,\n        option,\n      };\n      chatCtl.setActionResponse(actionRequest, res);\n    },\n    [actionRequest, chatCtl],\n  );\n\n  return (\n    <Box\n      sx={{\n        flex: '1 1 auto',\n        display: 'flex',\n        flexDirection: 'column',\n        '& > *': {\n          flex: '0 0 auto',\n          maxWidth: '100%',\n        },\n        '& > * + *': {\n          mt: 1,\n        },\n      }}\n    >\n      {actionRequest.options.map((o) => (\n        <Button\n          key={actionRequest.options.indexOf(o)}\n          type=\"button\"\n          value={o.value}\n          onClick={(e): void => setResponse(e.currentTarget.value)}\n          variant=\"contained\"\n          color=\"primary\"\n        >\n          {o.text}\n        </Button>\n      ))}\n    </Box>\n  );\n}\n","import { Box, Button, Icon, TextField } from '@mui/material';\nimport React from 'react';\n\nimport { ChatController } from '../chat-controller';\nimport { TextActionRequest, TextActionResponse } from '../chat-types';\n\nexport function MuiTextInput({\n  chatController,\n  actionRequest,\n}: {\n  chatController: ChatController;\n  actionRequest: TextActionRequest;\n}): React.ReactElement {\n  const chatCtl = chatController;\n  const [value, setValue] = React.useState(actionRequest.defaultValue);\n\n  const setResponse = React.useCallback((): void => {\n    if (value) {\n      const res: TextActionResponse = { type: 'text', value };\n      chatCtl.setActionResponse(actionRequest, res);\n      setValue('');\n    }\n  }, [actionRequest, chatCtl, value]);\n\n  const handleKeyDown = React.useCallback(\n    (e: React.KeyboardEvent<HTMLTextAreaElement>): void => {\n      if (e.nativeEvent.isComposing) {\n        return;\n      }\n\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        setResponse();\n      }\n    },\n    [setResponse],\n  );\n\n  const sendButtonText = actionRequest.sendButtonText\n    ? actionRequest.sendButtonText\n    : 'Send';\n\n  return (\n    <Box\n      sx={{\n        flex: '1 1 auto',\n        display: 'flex',\n        '& > *': {\n          flex: '1 1 auto',\n          minWidth: 0,\n        },\n        '& > * + *': {\n          ml: 1,\n        },\n        '& :last-child': {\n          flex: '0 1 auto',\n        },\n      }}\n    >\n      <TextField\n        placeholder={actionRequest.placeholder}\n        value={value}\n        onChange={(e): void => setValue(e.target.value)}\n        autoFocus\n        multiline\n        inputProps={{ onKeyDown: handleKeyDown }}\n        variant=\"outlined\"\n        maxRows={10}\n      />\n      <Button\n        type=\"button\"\n        onClick={setResponse}\n        disabled={!value}\n        variant=\"contained\"\n        color=\"primary\"\n        startIcon={<Icon>send</Icon>}\n      >\n        {sendButtonText}\n      </Button>\n    </Box>\n  );\n}\n","import { Box } from '@mui/material';\nimport dayjs from 'dayjs';\nimport React from 'react';\n\nimport { ChatController } from '../chat-controller';\nimport {\n  ActionRequest,\n  AudioActionRequest,\n  CustomActionRequest,\n  FileActionRequest,\n  MultiSelectActionRequest,\n  SelectActionRequest,\n  TextActionRequest,\n} from '../chat-types';\n\nimport { MuiAudioInput } from './MuiAudioInput';\nimport { MuiFileInput } from './MuiFileInput';\nimport { MuiMessage } from './MuiMessage';\nimport { MuiMultiSelectInput } from './MuiMultiSelectInput';\nimport { MuiSelectInput } from './MuiSelectInput';\nimport { MuiTextInput } from './MuiTextInput';\n\nexport function MuiChat({\n  chatController,\n}: React.PropsWithChildren<{\n  chatController: ChatController;\n}>): React.ReactElement {\n  const chatCtl = chatController;\n  const [messages, setMessages] = React.useState(chatCtl.getMessages());\n  const [actReq, setActReq] = React.useState(chatCtl.getActionRequest());\n\n  const msgRef = React.useRef<HTMLDivElement>(null);\n  const scroll = React.useCallback((): void => {\n    if (msgRef.current) {\n      msgRef.current.scrollTop = msgRef.current.scrollHeight;\n      // msgRef.current.scrollIntoView(true);\n    }\n  }, [msgRef]);\n  React.useEffect(() => {\n    function handleMassagesChanged(): void {\n      setMessages([...chatCtl.getMessages()]);\n      scroll();\n    }\n    function handleActionChanged(): void {\n      setActReq(chatCtl.getActionRequest());\n      scroll();\n    }\n    chatCtl.addOnMessagesChanged(handleMassagesChanged);\n    chatCtl.addOnActionChanged(handleActionChanged);\n  }, [chatCtl, scroll]);\n\n  type CustomComponentType = React.FC<{\n    chatController: ChatController;\n    actionRequest: ActionRequest;\n  }>;\n  const CustomComponent = React.useMemo((): CustomComponentType => {\n    if (!actReq || actReq.type !== 'custom') {\n      return null as unknown as CustomComponentType;\n    }\n    return (actReq as CustomActionRequest)\n      .Component as unknown as CustomComponentType;\n  }, [actReq]);\n\n  const unknownMsg = {\n    type: 'text',\n    content: 'Unknown message.',\n    self: false,\n  };\n\n  let prevDate = dayjs(0);\n  let prevTime = dayjs(0);\n\n  return (\n    <Box\n      sx={{\n        height: '100%',\n        width: '100%',\n        p: 1,\n        bgcolor: 'background.default',\n        display: 'flex',\n        flexDirection: 'column',\n        '& > *': {\n          maxWidth: '100%',\n        },\n        '& > * + *': {\n          mt: 1,\n        },\n      }}\n    >\n      <Box\n        sx={{\n          flex: '1 1 0%',\n          overflowY: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          display: 'flex',\n          flexDirection: 'column',\n          '& > *': {\n            maxWidth: '100%',\n          },\n        }}\n        ref={msgRef}\n      >\n        {messages.map((msg): React.ReactElement => {\n          let showDate = false;\n          let showTime = !!chatCtl.getOption().showDateTime;\n          if (!!chatCtl.getOption().showDateTime && !msg.deletedAt) {\n            const current = dayjs(\n              msg.updatedAt ? msg.updatedAt : msg.createdAt,\n            );\n\n            if (current.format('YYYYMMDD') !== prevDate.format('YYYYMMDD')) {\n              showDate = true;\n            }\n            prevDate = current;\n\n            if (current.diff(prevTime) < 60_000) {\n              showTime = false;\n            } else {\n              prevTime = current;\n            }\n          }\n          if (msg.type === 'text' || msg.type === 'jsx') {\n            return (\n              <MuiMessage\n                key={messages.indexOf(msg)}\n                id={`cu-msg-${messages.indexOf(msg) + 1}`}\n                message={msg}\n                showDate={showDate}\n                showTime={showTime}\n              />\n            );\n          }\n          return (\n            <MuiMessage\n              key={messages.indexOf(msg)}\n              id={`cu-msg-${messages.indexOf(msg) + 1}`}\n              message={unknownMsg}\n              showDate={showDate}\n              showTime={showTime}\n            />\n          );\n        })}\n      </Box>\n      <Box\n        sx={{\n          flex: '0 1 auto',\n          display: 'flex',\n          alignContent: 'flex-end',\n          '& > *': {\n            minWidth: 0,\n          },\n        }}\n      >\n        {actReq && actReq.type === 'text' && (\n          <MuiTextInput\n            chatController={chatCtl}\n            actionRequest={actReq as TextActionRequest}\n          />\n        )}\n        {actReq && actReq.type === 'select' && (\n          <MuiSelectInput\n            chatController={chatCtl}\n            actionRequest={actReq as SelectActionRequest}\n          />\n        )}\n        {actReq && actReq.type === 'multi-select' && (\n          <MuiMultiSelectInput\n            chatController={chatCtl}\n            actionRequest={actReq as MultiSelectActionRequest}\n          />\n        )}\n        {actReq && actReq.type === 'file' && (\n          <MuiFileInput\n            chatController={chatCtl}\n            actionRequest={actReq as FileActionRequest}\n          />\n        )}\n        {actReq && actReq.type === 'audio' && (\n          <MuiAudioInput\n            chatController={chatCtl}\n            actionRequest={actReq as AudioActionRequest}\n          />\n        )}\n        {actReq && actReq.type === 'custom' && (\n          <CustomComponent\n            chatController={chatCtl}\n            actionRequest={actReq as CustomActionRequest}\n          />\n        )}\n      </Box>\n    </Box>\n  );\n}\n"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","_arrayLikeToArray","arr","len","length","i","arr2","Array","_unsupportedIterableToArray","o","minLen","arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_toConsumableArray","isArray","arrayWithoutHoles","iter","Symbol","iterator","iterableToArray","unsupportedIterableToArray","TypeError","nonIterableSpread","_defineProperty","obj","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","_objectSpread2","target","source","forEach","getOwnPropertyDescriptors","defineProperties","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","runtime","exports","Op","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","result","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","globalThis","Function","regenerator","require$$0","ChatController","option","delay","request","responses","onResnponsed","always","addMessage","defaultOption","messages","action","emptyAction","actionHistory","onMessagesChanged","onActionChanged","message","setTimeout","idx","_this","createdAt","Date","callOnMessagesChanged","index","updatedAt","deletedAt","clearMessages","map","h","_this2","callback","indexOf","onResponse","defaultActionRequest","response","_this3","callOnActionChanged","origReq","content","AudioContext","window","webkitAudioContext","event","Event","data","MediaRecorder","stream","config","em","document","createDocumentFragment","encoder","js","replace","blob","Blob","Worker","URL","createObjectURL","createWorker","recorder","addEventListener","e","mimeType","dispatchEvent","start","timeslice","clone","input","createMediaStreamSource","processor","createScriptProcessor","postMessage","sampleRate","onaudioprocess","inputBuffer","getChannelData","connect","destination","slicing","setInterval","requestData","getTracks","track","disconnect","clearInterval","pause","resume","removeEventListener","isTypeSupported","notSupported","navigator","mediaDevices","recorded","onmessage","buffer","Uint8Array","sample","encode","bufferLength","wav","view","DataView","setUint32","setUint16","set","dump","AudioMediaRecorder","AudioRecorder","recordChunks","md","getUserMedia","audio","video","size","_slicedToArray","arrayWithHoles","_i","_s","_e","_arr","_n","_d","iterableToArrayLimit","nonIterableRest","t","r","s","u","a","f","c","d","$","l","y","M","weekdays","split","months","m","String","join","g","z","utcOffset","Math","abs","floor","date","year","month","add","ceil","p","w","D","ms","Q","toLowerCase","v","_","S","O","locale","$L","utc","$u","x","$x","$offset","parse","$d","NaN","match","substring","UTC","init","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","isSame","startOf","endOf","isAfter","isBefore","$g","unix","valueOf","getTime","toDate","$locale","weekStart","$set","min","daysInMonth","get","Number","round","subtract","format","invalidDate","substr","meridiem","YY","YYYY","MM","MMM","monthsShort","MMMM","DD","dd","weekdaysMin","ddd","weekdaysShort","dddd","H","HH","hh","A","mm","ss","SSS","Z","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","b","extend","$i","isDayjs","en","Ls","MuiAudioInput","chatController","actionRequest","chatCtl","audioRec","React","useState","getInstance","stopped","setStopped","setAudio","handleError","useCallback","setActionResponse","handleStart","initialize","startRecord","handleStop","stopRecord","sendResponse","sendButtonText","Box","sx","flex","display","minWidth","ml","Button","onClick","disabled","variant","color","startIcon","Icon","MuiFileInput","files","setFiles","handleFileChange","fileList","fileArray","file","item","setResponse","res","maxWidth","flexDirection","mt","List","Divider","ListItem","ListItemIcon","Typography","style","overflowWrap","component","accept","multiple","onChange","MuiMessage","id","showDate","showTime","dispDate","ChatAvator","flexShrink","mr","Avatar","alt","username","src","avatar","ChatUsername","mx","align","ChatDate","toLocaleTimeString","hour","minute","Grow","in","toLocaleDateString","my","pl","pr","justifyContent","py","px","bgcolor","borderRadius","boxShadow","whiteSpace","MuiMultiSelectInput","setValues","handleSelect","includes","options","text","currentTarget","MuiSelectInput","find","MuiTextInput","defaultValue","setValue","handleKeyDown","nativeEvent","isComposing","shiftKey","preventDefault","TextField","placeholder","autoFocus","multiline","inputProps","onKeyDown","maxRows","getMessages","setMessages","getActionRequest","actReq","setActReq","msgRef","useRef","scroll","current","scrollTop","scrollHeight","useEffect","addOnMessagesChanged","addOnActionChanged","CustomComponent","useMemo","Component","unknownMsg","prevDate","dayjs","prevTime","height","width","overflowY","WebkitOverflowScrolling","ref","msg","getOption","showDateTime","alignContent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iaAAA,SAASA,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GACpE,IACE,IAAIC,EAAOP,EAAIK,GAAKC,GAChBE,EAAQD,EAAKC,MACjB,MAAOC,GAEP,YADAP,EAAOO,GAILF,EAAKG,KACPT,EAAQO,GAERG,QAAQV,QAAQO,GAAOI,KAAKT,EAAOC,GAIxB,SAASS,EAAkBC,GACxC,OAAO,WACL,IAAIC,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAIP,SAAQ,SAAUV,EAASC,GACpC,IAAIF,EAAMc,EAAGK,MAAMJ,EAAME,GAEzB,SAASd,EAAMK,GACbT,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQI,GAGlE,SAASJ,EAAOgB,GACdrB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASgB,GAGnEjB,OAAMkB,OC/BG,SAASC,EAAkBC,EAAKC,IAClC,MAAPA,GAAeA,EAAMD,EAAIE,UAAQD,EAAMD,EAAIE,QAE/C,IAAK,IAAIC,EAAI,EAAGC,EAAO,IAAIC,MAAMJ,GAAME,EAAIF,EAAKE,IAC9CC,EAAKD,GAAKH,EAAIG,GAGhB,OAAOC,ECNM,SAASE,EAA4BC,EAAGC,GACrD,GAAKD,EAAL,CACA,GAAiB,iBAANA,EAAgB,OAAOE,EAAiBF,EAAGC,GACtD,IAAIE,EAAIC,OAAOC,UAAUC,SAASC,KAAKP,GAAGQ,MAAM,GAAI,GAEpD,MADU,WAANL,GAAkBH,EAAES,cAAaN,EAAIH,EAAES,YAAYC,MAC7C,QAANP,GAAqB,QAANA,EAAoBL,MAAMa,KAAKX,GACxC,cAANG,GAAqB,2CAA2CS,KAAKT,GAAWD,EAAiBF,EAAGC,QAAxG,GCHa,SAASY,EAAmBpB,GACzC,OCJa,SAA4BA,GACzC,GAAIK,MAAMgB,QAAQrB,GAAM,OAAOS,EAAiBT,GDGzCsB,CAAkBtB,IELZ,SAA0BuB,GACvC,GAAsB,oBAAXC,QAAmD,MAAzBD,EAAKC,OAAOC,WAA2C,MAAtBF,EAAK,cAAuB,OAAOlB,MAAMa,KAAKK,GFInFG,CAAgB1B,IAAQ2B,EAA2B3B,IGLvE,WACb,MAAM,IAAI4B,UAAU,wIHIwEC,GIL/E,SAASC,EAAgBC,EAAKjD,EAAKG,GAYhD,OAXIH,KAAOiD,EACTpB,OAAOqB,eAAeD,EAAKjD,EAAK,CAC9BG,MAAOA,EACPgD,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZJ,EAAIjD,GAAOG,EAGN8C,ECVT,SAASK,EAAQC,EAAQC,GACvB,IAAIC,EAAO5B,OAAO4B,KAAKF,GAEvB,GAAI1B,OAAO6B,sBAAuB,CAChC,IAAIC,EAAU9B,OAAO6B,sBAAsBH,GAEvCC,IACFG,EAAUA,EAAQC,QAAO,SAAUC,GACjC,OAAOhC,OAAOiC,yBAAyBP,EAAQM,GAAKV,eAIxDM,EAAKM,KAAKjD,MAAM2C,EAAME,GAGxB,OAAOF,EAGM,SAASO,EAAeC,GACrC,IAAK,IAAI5C,EAAI,EAAGA,EAAIR,UAAUO,OAAQC,IAAK,CACzC,IAAI6C,EAAyB,MAAhBrD,UAAUQ,GAAaR,UAAUQ,GAAK,GAE/CA,EAAI,EACNiC,EAAQzB,OAAOqC,IAAS,GAAMC,SAAQ,SAAUnE,GAC9CkD,EAAee,EAAQjE,EAAKkE,EAAOlE,OAE5B6B,OAAOuC,0BAChBvC,OAAOwC,iBAAiBJ,EAAQpC,OAAOuC,0BAA0BF,IAEjEZ,EAAQzB,OAAOqC,IAASC,SAAQ,SAAUnE,GACxC6B,OAAOqB,eAAee,EAAQjE,EAAK6B,OAAOiC,yBAAyBI,EAAQlE,OAKjF,OAAOiE,ECrCM,SAASK,EAAgBC,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAI1B,UAAU,qCCFxB,SAAS2B,EAAkBR,EAAQS,GACjC,IAAK,IAAIrD,EAAI,EAAGA,EAAIqD,EAAMtD,OAAQC,IAAK,CACrC,IAAIsD,EAAaD,EAAMrD,GACvBsD,EAAWxB,WAAawB,EAAWxB,aAAc,EACjDwB,EAAWvB,cAAe,EACtB,UAAWuB,IAAYA,EAAWtB,UAAW,GACjDxB,OAAOqB,eAAee,EAAQU,EAAW3E,IAAK2E,IAInC,SAASC,EAAaJ,EAAaK,EAAYC,GAG5D,OAFID,GAAYJ,EAAkBD,EAAY1C,UAAW+C,GACrDC,GAAaL,EAAkBD,EAAaM,GACzCN,+KCNT,IAAIO,EAAW,SAAUC,GAGvB,IAEIhE,EAFAiE,EAAKpD,OAAOC,UACZoD,EAASD,EAAGE,eAEZC,EAA4B,mBAAX1C,OAAwBA,OAAS,GAClD2C,EAAiBD,EAAQzC,UAAY,aACrC2C,EAAsBF,EAAQG,eAAiB,kBAC/CC,EAAoBJ,EAAQK,aAAe,gBAE/C,SAASC,EAAOzC,EAAKjD,EAAKG,GAOxB,OANA0B,OAAOqB,eAAeD,EAAKjD,EAAK,CAC9BG,MAAOA,EACPgD,YAAY,EACZC,cAAc,EACdC,UAAU,IAELJ,EAAIjD,GAEb,IAEE0F,EAAO,GAAI,IACX,MAAO3E,GACP2E,EAAS,SAASzC,EAAKjD,EAAKG,GAC1B,OAAO8C,EAAIjD,GAAOG,GAItB,SAASwF,EAAKC,EAASC,EAASnF,EAAMoF,GAEpC,IAAIC,EAAiBF,GAAWA,EAAQ/D,qBAAqBkE,EAAYH,EAAUG,EAC/EC,EAAYpE,OAAOqE,OAAOH,EAAejE,WACzCqE,EAAU,IAAIC,EAAQN,GAAe,IAMzC,OAFAG,EAAUI,QAuMZ,SAA0BT,EAASlF,EAAMyF,GACvC,IAAIG,EAAQC,EAEZ,OAAO,SAAgBC,EAAQvG,GAC7B,GAAIqG,IAAUG,EACZ,MAAM,IAAIC,MAAM,gCAGlB,GAAIJ,IAAUK,EAAmB,CAC/B,GAAe,UAAXH,EACF,MAAMvG,EAKR,OAAO2G,IAMT,IAHAT,EAAQK,OAASA,EACjBL,EAAQlG,IAAMA,IAED,CACX,IAAI4G,EAAWV,EAAQU,SACvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAUV,GACnD,GAAIW,EAAgB,CAClB,GAAIA,IAAmBE,EAAkB,SACzC,OAAOF,GAIX,GAAuB,SAAnBX,EAAQK,OAGVL,EAAQc,KAAOd,EAAQe,MAAQf,EAAQlG,SAElC,GAAuB,UAAnBkG,EAAQK,OAAoB,CACrC,GAAIF,IAAUC,EAEZ,MADAD,EAAQK,EACFR,EAAQlG,IAGhBkG,EAAQgB,kBAAkBhB,EAAQlG,SAEN,WAAnBkG,EAAQK,QACjBL,EAAQiB,OAAO,SAAUjB,EAAQlG,KAGnCqG,EAAQG,EAER,IAAIY,EAASC,EAAS1B,EAASlF,EAAMyF,GACrC,GAAoB,WAAhBkB,EAAOE,KAAmB,CAO5B,GAJAjB,EAAQH,EAAQ9F,KACZsG,EACAa,EAEAH,EAAOpH,MAAQ+G,EACjB,SAGF,MAAO,CACL7G,MAAOkH,EAAOpH,IACdI,KAAM8F,EAAQ9F,MAGS,UAAhBgH,EAAOE,OAChBjB,EAAQK,EAGRR,EAAQK,OAAS,QACjBL,EAAQlG,IAAMoH,EAAOpH,OA/QPwH,CAAiB7B,EAASlF,EAAMyF,GAE7CF,EAcT,SAASqB,EAAS7G,EAAIwC,EAAKhD,GACzB,IACE,MAAO,CAAEsH,KAAM,SAAUtH,IAAKQ,EAAGuB,KAAKiB,EAAKhD,IAC3C,MAAOc,GACP,MAAO,CAAEwG,KAAM,QAAStH,IAAKc,IAhBjCiE,EAAQW,KAAOA,EAoBf,IAAIY,EAAyB,iBACzBiB,EAAyB,iBACzBf,EAAoB,YACpBE,EAAoB,YAIpBK,EAAmB,GAMvB,SAAShB,KACT,SAAS0B,KACT,SAASC,KAIT,IAAIC,EAAoB,GACxBlC,EAAOkC,EAAmBvC,GAAgB,WACxC,OAAO1E,QAGT,IAAIkH,EAAWhG,OAAOiG,eAClBC,EAA0BF,GAAYA,EAASA,EAASG,EAAO,MAC/DD,GACAA,IAA4B9C,GAC5BC,EAAOlD,KAAK+F,EAAyB1C,KAGvCuC,EAAoBG,GAGtB,IAAIE,EAAKN,EAA2B7F,UAClCkE,EAAUlE,UAAYD,OAAOqE,OAAO0B,GAYtC,SAASM,EAAsBpG,GAC7B,CAAC,OAAQ,QAAS,UAAUqC,SAAQ,SAASqC,GAC3Cd,EAAO5D,EAAW0E,GAAQ,SAASvG,GACjC,OAAOU,KAAK0F,QAAQG,EAAQvG,SAkClC,SAASkI,EAAclC,EAAWmC,GAChC,SAASC,EAAO7B,EAAQvG,EAAKL,EAASC,GACpC,IAAIwH,EAASC,EAASrB,EAAUO,GAASP,EAAWhG,GACpD,GAAoB,UAAhBoH,EAAOE,KAEJ,CACL,IAAIe,EAASjB,EAAOpH,IAChBE,EAAQmI,EAAOnI,MACnB,OAAIA,GACiB,iBAAVA,GACP+E,EAAOlD,KAAK7B,EAAO,WACdiI,EAAYxI,QAAQO,EAAMoI,SAAShI,MAAK,SAASJ,GACtDkI,EAAO,OAAQlI,EAAOP,EAASC,MAC9B,SAASkB,GACVsH,EAAO,QAAStH,EAAKnB,EAASC,MAI3BuI,EAAYxI,QAAQO,GAAOI,MAAK,SAASiI,GAI9CF,EAAOnI,MAAQqI,EACf5I,EAAQ0I,MACP,SAASlI,GAGV,OAAOiI,EAAO,QAASjI,EAAOR,EAASC,MAvBzCA,EAAOwH,EAAOpH,KA4BlB,IAAIwI,EAgCJ9H,KAAK0F,QA9BL,SAAiBG,EAAQvG,GACvB,SAASyI,IACP,OAAO,IAAIN,GAAY,SAASxI,EAASC,GACvCwI,EAAO7B,EAAQvG,EAAKL,EAASC,MAIjC,OAAO4I,EAaLA,EAAkBA,EAAgBlI,KAChCmI,EAGAA,GACEA,KAkHV,SAAS3B,EAAoBF,EAAUV,GACrC,IAAIK,EAASK,EAASlE,SAASwD,EAAQK,QACvC,GAAIA,IAAWxF,EAAW,CAKxB,GAFAmF,EAAQU,SAAW,KAEI,UAAnBV,EAAQK,OAAoB,CAE9B,GAAIK,EAASlE,SAAiB,SAG5BwD,EAAQK,OAAS,SACjBL,EAAQlG,IAAMe,EACd+F,EAAoBF,EAAUV,GAEP,UAAnBA,EAAQK,QAGV,OAAOQ,EAIXb,EAAQK,OAAS,QACjBL,EAAQlG,IAAM,IAAI6C,UAChB,kDAGJ,OAAOkE,EAGT,IAAIK,EAASC,EAASd,EAAQK,EAASlE,SAAUwD,EAAQlG,KAEzD,GAAoB,UAAhBoH,EAAOE,KAIT,OAHApB,EAAQK,OAAS,QACjBL,EAAQlG,IAAMoH,EAAOpH,IACrBkG,EAAQU,SAAW,KACZG,EAGT,IAAI9G,EAAOmH,EAAOpH,IAElB,OAAMC,EAOFA,EAAKG,MAGP8F,EAAQU,EAAS8B,YAAczI,EAAKC,MAGpCgG,EAAQyC,KAAO/B,EAASgC,QAQD,WAAnB1C,EAAQK,SACVL,EAAQK,OAAS,OACjBL,EAAQlG,IAAMe,GAUlBmF,EAAQU,SAAW,KACZG,GANE9G,GA3BPiG,EAAQK,OAAS,QACjBL,EAAQlG,IAAM,IAAI6C,UAAU,oCAC5BqD,EAAQU,SAAW,KACZG,GAoDX,SAAS8B,EAAaC,GACpB,IAAIC,EAAQ,CAAEC,OAAQF,EAAK,IAEvB,KAAKA,IACPC,EAAME,SAAWH,EAAK,IAGpB,KAAKA,IACPC,EAAMG,WAAaJ,EAAK,GACxBC,EAAMI,SAAWL,EAAK,IAGxBpI,KAAK0I,WAAWtF,KAAKiF,GAGvB,SAASM,EAAcN,GACrB,IAAI3B,EAAS2B,EAAMO,YAAc,GACjClC,EAAOE,KAAO,gBACPF,EAAOpH,IACd+I,EAAMO,WAAalC,EAGrB,SAASjB,EAAQN,GAIfnF,KAAK0I,WAAa,CAAC,CAAEJ,OAAQ,SAC7BnD,EAAY3B,QAAQ2E,EAAcnI,MAClCA,KAAK6I,OAAM,GA8Bb,SAASxB,EAAOyB,GACd,GAAIA,EAAU,CACZ,IAAIC,EAAiBD,EAASpE,GAC9B,GAAIqE,EACF,OAAOA,EAAe1H,KAAKyH,GAG7B,GAA6B,mBAAlBA,EAASb,KAClB,OAAOa,EAGT,IAAKE,MAAMF,EAASrI,QAAS,CAC3B,IAAIC,GAAK,EAAGuH,EAAO,SAASA,IAC1B,OAASvH,EAAIoI,EAASrI,QACpB,GAAI8D,EAAOlD,KAAKyH,EAAUpI,GAGxB,OAFAuH,EAAKzI,MAAQsJ,EAASpI,GACtBuH,EAAKvI,MAAO,EACLuI,EAOX,OAHAA,EAAKzI,MAAQa,EACb4H,EAAKvI,MAAO,EAELuI,GAGT,OAAOA,EAAKA,KAAOA,GAKvB,MAAO,CAAEA,KAAMhC,GAIjB,SAASA,IACP,MAAO,CAAEzG,MAAOa,EAAWX,MAAM,GA+MnC,OA7mBAqH,EAAkB5F,UAAY6F,EAC9BjC,EAAOuC,EAAI,cAAeN,GAC1BjC,EAAOiC,EAA4B,cAAeD,GAClDA,EAAkBkC,YAAclE,EAC9BiC,EACAnC,EACA,qBAaFR,EAAQ6E,oBAAsB,SAASC,GACrC,IAAIC,EAAyB,mBAAXD,GAAyBA,EAAO5H,YAClD,QAAO6H,IACHA,IAASrC,GAG2B,uBAAnCqC,EAAKH,aAAeG,EAAK5H,QAIhC6C,EAAQgF,KAAO,SAASF,GAQtB,OAPIjI,OAAOoI,eACTpI,OAAOoI,eAAeH,EAAQnC,IAE9BmC,EAAOI,UAAYvC,EACnBjC,EAAOoE,EAAQtE,EAAmB,sBAEpCsE,EAAOhI,UAAYD,OAAOqE,OAAO+B,GAC1B6B,GAOT9E,EAAQmF,MAAQ,SAASlK,GACvB,MAAO,CAAEsI,QAAStI,IAsEpBiI,EAAsBC,EAAcrG,WACpC4D,EAAOyC,EAAcrG,UAAWwD,GAAqB,WACnD,OAAO3E,QAETqE,EAAQmD,cAAgBA,EAKxBnD,EAAQoF,MAAQ,SAASxE,EAASC,EAASnF,EAAMoF,EAAasC,QACxC,IAAhBA,IAAwBA,EAAc9H,SAE1C,IAAImC,EAAO,IAAI0F,EACbxC,EAAKC,EAASC,EAASnF,EAAMoF,GAC7BsC,GAGF,OAAOpD,EAAQ6E,oBAAoBhE,GAC/BpD,EACAA,EAAKmG,OAAOrI,MAAK,SAAS+H,GACxB,OAAOA,EAAOjI,KAAOiI,EAAOnI,MAAQsC,EAAKmG,WAuKjDV,EAAsBD,GAEtBvC,EAAOuC,EAAIzC,EAAmB,aAO9BE,EAAOuC,EAAI5C,GAAgB,WACzB,OAAO1E,QAGT+E,EAAOuC,EAAI,YAAY,WACrB,MAAO,wBAkCTjD,EAAQvB,KAAO,SAASF,GACtB,IAAIE,EAAO,GACX,IAAK,IAAIzD,KAAOuD,EACdE,EAAKM,KAAK/D,GAMZ,OAJAyD,EAAK4G,UAIE,SAASzB,IACd,KAAOnF,EAAKrC,QAAQ,CAClB,IAAIpB,EAAMyD,EAAK6G,MACf,GAAItK,KAAOuD,EAGT,OAFAqF,EAAKzI,MAAQH,EACb4I,EAAKvI,MAAO,EACLuI,EAQX,OADAA,EAAKvI,MAAO,EACLuI,IAsCX5D,EAAQgD,OAASA,EAMjB5B,EAAQtE,UAAY,CAClBI,YAAakE,EAEboD,MAAO,SAASe,GAcd,GAbA5J,KAAK6J,KAAO,EACZ7J,KAAKiI,KAAO,EAGZjI,KAAKsG,KAAOtG,KAAKuG,MAAQlG,EACzBL,KAAKN,MAAO,EACZM,KAAKkG,SAAW,KAEhBlG,KAAK6F,OAAS,OACd7F,KAAKV,IAAMe,EAEXL,KAAK0I,WAAWlF,QAAQmF,IAEnBiB,EACH,IAAK,IAAIpI,KAAQxB,KAEQ,MAAnBwB,EAAKsI,OAAO,IACZvF,EAAOlD,KAAKrB,KAAMwB,KACjBwH,OAAOxH,EAAKF,MAAM,MACrBtB,KAAKwB,GAAQnB,IAMrB0J,KAAM,WACJ/J,KAAKN,MAAO,EAEZ,IACIsK,EADYhK,KAAK0I,WAAW,GACLE,WAC3B,GAAwB,UAApBoB,EAAWpD,KACb,MAAMoD,EAAW1K,IAGnB,OAAOU,KAAKiK,MAGdzD,kBAAmB,SAAS0D,GAC1B,GAAIlK,KAAKN,KACP,MAAMwK,EAGR,IAAI1E,EAAUxF,KACd,SAASmK,EAAOC,EAAKC,GAYnB,OAXA3D,EAAOE,KAAO,QACdF,EAAOpH,IAAM4K,EACb1E,EAAQyC,KAAOmC,EAEXC,IAGF7E,EAAQK,OAAS,OACjBL,EAAQlG,IAAMe,KAGNgK,EAGZ,IAAK,IAAI3J,EAAIV,KAAK0I,WAAWjI,OAAS,EAAGC,GAAK,IAAKA,EAAG,CACpD,IAAI2H,EAAQrI,KAAK0I,WAAWhI,GACxBgG,EAAS2B,EAAMO,WAEnB,GAAqB,SAAjBP,EAAMC,OAIR,OAAO6B,EAAO,OAGhB,GAAI9B,EAAMC,QAAUtI,KAAK6J,KAAM,CAC7B,IAAIS,EAAW/F,EAAOlD,KAAKgH,EAAO,YAC9BkC,EAAahG,EAAOlD,KAAKgH,EAAO,cAEpC,GAAIiC,GAAYC,EAAY,CAC1B,GAAIvK,KAAK6J,KAAOxB,EAAME,SACpB,OAAO4B,EAAO9B,EAAME,UAAU,GACzB,GAAIvI,KAAK6J,KAAOxB,EAAMG,WAC3B,OAAO2B,EAAO9B,EAAMG,iBAGjB,GAAI8B,GACT,GAAItK,KAAK6J,KAAOxB,EAAME,SACpB,OAAO4B,EAAO9B,EAAME,UAAU,OAG3B,CAAA,IAAIgC,EAMT,MAAM,IAAIxE,MAAM,0CALhB,GAAI/F,KAAK6J,KAAOxB,EAAMG,WACpB,OAAO2B,EAAO9B,EAAMG,gBAU9B/B,OAAQ,SAASG,EAAMtH,GACrB,IAAK,IAAIoB,EAAIV,KAAK0I,WAAWjI,OAAS,EAAGC,GAAK,IAAKA,EAAG,CACpD,IAAI2H,EAAQrI,KAAK0I,WAAWhI,GAC5B,GAAI2H,EAAMC,QAAUtI,KAAK6J,MACrBtF,EAAOlD,KAAKgH,EAAO,eACnBrI,KAAK6J,KAAOxB,EAAMG,WAAY,CAChC,IAAIgC,EAAenC,EACnB,OAIAmC,IACU,UAAT5D,GACS,aAATA,IACD4D,EAAalC,QAAUhJ,GACvBA,GAAOkL,EAAahC,aAGtBgC,EAAe,MAGjB,IAAI9D,EAAS8D,EAAeA,EAAa5B,WAAa,GAItD,OAHAlC,EAAOE,KAAOA,EACdF,EAAOpH,IAAMA,EAETkL,GACFxK,KAAK6F,OAAS,OACd7F,KAAKiI,KAAOuC,EAAahC,WAClBnC,GAGFrG,KAAKyK,SAAS/D,IAGvB+D,SAAU,SAAS/D,EAAQ+B,GACzB,GAAoB,UAAhB/B,EAAOE,KACT,MAAMF,EAAOpH,IAcf,MAXoB,UAAhBoH,EAAOE,MACS,aAAhBF,EAAOE,KACT5G,KAAKiI,KAAOvB,EAAOpH,IACM,WAAhBoH,EAAOE,MAChB5G,KAAKiK,KAAOjK,KAAKV,IAAMoH,EAAOpH,IAC9BU,KAAK6F,OAAS,SACd7F,KAAKiI,KAAO,OACa,WAAhBvB,EAAOE,MAAqB6B,IACrCzI,KAAKiI,KAAOQ,GAGPpC,GAGTqE,OAAQ,SAASlC,GACf,IAAK,IAAI9H,EAAIV,KAAK0I,WAAWjI,OAAS,EAAGC,GAAK,IAAKA,EAAG,CACpD,IAAI2H,EAAQrI,KAAK0I,WAAWhI,GAC5B,GAAI2H,EAAMG,aAAeA,EAGvB,OAFAxI,KAAKyK,SAASpC,EAAMO,WAAYP,EAAMI,UACtCE,EAAcN,GACPhC,IAKbsE,MAAS,SAASrC,GAChB,IAAK,IAAI5H,EAAIV,KAAK0I,WAAWjI,OAAS,EAAGC,GAAK,IAAKA,EAAG,CACpD,IAAI2H,EAAQrI,KAAK0I,WAAWhI,GAC5B,GAAI2H,EAAMC,SAAWA,EAAQ,CAC3B,IAAI5B,EAAS2B,EAAMO,WACnB,GAAoB,UAAhBlC,EAAOE,KAAkB,CAC3B,IAAIgE,EAASlE,EAAOpH,IACpBqJ,EAAcN,GAEhB,OAAOuC,GAMX,MAAM,IAAI7E,MAAM,0BAGlB8E,cAAe,SAAS/B,EAAUd,EAAYE,GAa5C,OAZAlI,KAAKkG,SAAW,CACdlE,SAAUqF,EAAOyB,GACjBd,WAAYA,EACZE,QAASA,GAGS,SAAhBlI,KAAK6F,SAGP7F,KAAKV,IAAMe,GAGNgG,IAQJhC,GAOsByG,EAAOzG,SAGtC,IACE0G,mBAAqB3G,EACrB,MAAO4G,GAWmB,iBAAfC,WACTA,WAAWF,mBAAqB3G,EAEhC8G,SAAS,IAAK,yBAAdA,CAAwC9G,YC/uB5C+G,EAAiBC,UC0BJC,wBAkBCC,2DAfwB,CAClCC,MAAO,2BAGqB,CAC5BC,QAAS,CAAE5E,KAAM,SACjB6E,UAAW,GACXC,aAAc,mCAGe,CAC7BC,QAAQ,EACRC,YAAY,SAIPjG,MAAQ,CACX2F,cAAatL,KAAK6L,eAAkBP,GACpCQ,SAAU,GACVC,OAAQ/L,KAAKgM,YACbC,cAAe,GACfC,kBAAmB,GACnBC,gBAAiB,8CAIrB,SAAWC,qBACF,IAAIzM,SAAQ,SAACV,GAClBoN,YAAW,eAEHC,EADMC,EAAK5G,MAAMmG,SAAS1I,KAAKgJ,GACnB,EAClBG,EAAK5G,MAAMmG,SAASQ,GAAKE,UAAY,IAAIC,KACzCF,EAAKG,wBAELzN,EAAQqN,KACPC,EAAK5G,MAAM2F,OAAOC,uCAIzB,SAAcoB,EAAeP,MACvBA,IAAYpM,KAAK2F,MAAMmG,SAASa,GAAQ,KAClCH,EAAcxM,KAAK2F,MAAMmG,SAASa,GAAlCH,eACH7G,MAAMmG,SAASa,GAASP,OACxBzG,MAAMmG,SAASa,GAAOH,UAAYA,OAGpC7G,MAAMmG,SAASa,GAAOC,UAAY,IAAIH,UACtCC,qDAGP,SAAcC,QACPhH,MAAMmG,SAASa,GAAOE,UAAY,IAAIJ,UACtCC,mDAGP,kBACS1M,KAAK2F,MAAMmG,oCAGpB,SAAYA,QACLgB,qBACAnH,MAAMmG,WAAeA,QACrBY,qDAGP,gBACO/G,MAAMmG,SAAW,QACjBY,6DAGP,2BACO/G,MAAMuG,kBAAkBa,KAAI,SAACC,UAAMA,EAAEC,EAAKtH,MAAMmG,iDAGvD,SAAqBoB,QACdvH,MAAMuG,kBAAkB9I,KAAK8J,0CAGpC,SAAwBA,OAChBZ,EAAMtM,KAAK2F,MAAMuG,kBAAkBiB,QAAQD,QAE5CvH,MAAMwG,gBAAgBG,GAAO,6CAGpC,SACEd,EACA4B,cAEMrB,EAAiB,CACrBP,eAAcxL,KAAKqN,sBAAyB7B,GAC5CC,UAAW,GACXC,aAAc,WAIT,IAAI/L,SAAQ,SAACV,EAASC,OACtBsM,EAAQG,OAAQ,CAQnBI,EAAOL,aAAatI,MAPG,SAACkK,GACjBA,EAAS7N,MAGZP,EAAOoO,EAAS7N,OAFhBR,EAAQqO,MAQVF,GACFrB,EAAOL,aAAatI,KAAKgK,GAG3BG,EAAK5H,MAAMoG,OAASA,EACpBwB,EAAK5H,MAAMsG,cAAc7I,KAAK2I,GAC9BwB,EAAKC,oBAAoBzB,EAAOP,SAE5BA,EAAQG,QACV1M,EAAQ,CAAE2H,KAAM,OAAQpH,MAAO,gDAKrC,gBACOmG,MAAMoG,OAAS/L,KAAKgM,iBACpBwB,oBAAoBxN,KAAKgM,YAAYR,yCAG5C,iBACiCxL,KAAK2F,MAAMoG,OAAlCP,IAAAA,QAASC,IAAAA,aACZD,EAAQG,UAAUF,EAAUhL,OAAS,UAInC+K,gDAGT,WACEA,EACA8B,mFAEsDtN,KAAK2F,MAAMoG,OAAhD0B,IAATjC,QAAkBC,IAAAA,UAAWC,IAAAA,aACjCF,IAAYiC,wBACR,IAAI1H,MAAM,6BAEbyF,EAAQG,QAAkC,IAAxBD,EAAajL,6BAC5B,IAAIsF,MAAM,qCAGlB0F,EAAUrI,KAAKkK,QACVE,oBAAoBhC,EAAS8B,IAE9B9B,EAAQI,6CACJ5L,KAAK4L,WAAW,CACpBhF,KAAM,OACN8G,QAASJ,EAAS9N,MAClBO,MAAM,YAIV2L,EAAaqB,KAAI,SAACC,UAAMA,EAAEM,uIAG5B,kBACStN,KAAK2F,MAAMoG,OAAON,6CAG3B,SACED,EACA8B,QAEK3H,MAAMwG,gBAAgBY,KAAI,SAACC,UAAMA,EAAExB,EAAS8B,wCAGnD,SAAmBJ,QACZvH,MAAMwG,gBAAgB/I,KAAK8J,wCAGlC,SAAsBA,OACdZ,EAAMtM,KAAK2F,MAAMwG,gBAAgBgB,QAAQD,QAE1CvH,MAAMwG,gBAAgBG,GAAO,sCAGpC,kBACStM,KAAK2F,MAAM2F,gBClNtB,IAiBI9F,EAjBAmI,EAAeC,OAAOD,cAAgBC,OAAOC,mBAW7CpO,EAAQoG,IACV,IAAIiI,EAAQ,IAAIC,MAAM,SAEtB,OADAD,EAAME,KAAO,IAAIjI,MAAM,mBAAqBF,GACrCiI,GAaT,MAAMG,EAIJ1M,YAAa2M,EAAQC,EAAS,MAK5BnO,KAAKkO,OAASA,EACdlO,KAAKmO,OAASA,EAKdnO,KAAK2F,MAAQ,WAEb3F,KAAKoO,GAAKC,SAASC,yBACnBtO,KAAKuO,QA3CUzO,CAAAA,IACjB,IAAI0O,EAAK1O,EACNsB,WACAqN,QAAQ,mCAAoC,IAC5CA,QAAQ,KAAM,IACbC,EAAO,IAAIC,KAAK,CAACH,IACrB,OAAO,IAAII,OAAOC,IAAIC,gBAAgBJ,KAqCrBK,CAAad,EAAcM,SAE1C,IAAIS,EAAWhP,KACfA,KAAKuO,QAAQU,iBAAiB,WAAWC,IACvC,IAAIpB,EAAQ,IAAIC,MAAM,iBACtBD,EAAME,KAAO,IAAIW,KAAK,CAACO,EAAElB,MAAO,CAAEpH,KAAMoI,EAASG,WACjDH,EAASZ,GAAGgB,cAActB,GACH,aAAnBkB,EAASrJ,OACXqJ,EAASZ,GAAGgB,cAAc,IAAIrB,MAAM,YAmB1CsB,MAAOC,GACL,GAAmB,aAAftP,KAAK2F,MACP,OAAO3F,KAAKoO,GAAGgB,cAAc3P,EAAM,UAGrCO,KAAK2F,MAAQ,YAERH,IACHA,EAAU,IAAImI,EAAa3N,KAAKmO,SAElCnO,KAAKuP,MAAQvP,KAAKkO,OAAOqB,QACzBvP,KAAKwP,MAAQhK,EAAQiK,wBAAwBzP,KAAKuP,OAClDvP,KAAK0P,UAAYlK,EAAQmK,sBAAsB,KAAM,EAAG,GAExD3P,KAAKuO,QAAQqB,YAAY,CAAC,OAAQpK,EAAQqK,aAE1C7P,KAAK0P,UAAUI,eAAiBZ,IACX,cAAflP,KAAK2F,OACP3F,KAAKuO,QAAQqB,YAAY,CAAC,SAAUV,EAAEa,YAAYC,eAAe,MAIrEhQ,KAAKwP,MAAMS,QAAQjQ,KAAK0P,WACxB1P,KAAK0P,UAAUO,QAAQzK,EAAQ0K,aAE/BlQ,KAAKoO,GAAGgB,cAAc,IAAIrB,MAAM,UAE5BuB,IACFtP,KAAKmQ,QAAUC,aAAY,KACN,cAAfpQ,KAAK2F,OAAuB3F,KAAKqQ,gBACpCf,IAgBPvF,OACE,MAAmB,aAAf/J,KAAK2F,MACA3F,KAAKoO,GAAGgB,cAAc3P,EAAM,UAGrCO,KAAKqQ,cACLrQ,KAAK2F,MAAQ,WACb3F,KAAKuP,MAAMe,YAAY9M,SAAQ+M,IAC7BA,EAAMxG,UAER/J,KAAK0P,UAAUc,aACfxQ,KAAKwP,MAAMgB,aACJC,cAAczQ,KAAKmQ,UAa5BO,QACE,MAAmB,cAAf1Q,KAAK2F,MACA3F,KAAKoO,GAAGgB,cAAc3P,EAAM,WAGrCO,KAAK2F,MAAQ,SACN3F,KAAKoO,GAAGgB,cAAc,IAAIrB,MAAM,WAazC4C,SACE,MAAmB,WAAf3Q,KAAK2F,MACA3F,KAAKoO,GAAGgB,cAAc3P,EAAM,YAGrCO,KAAK2F,MAAQ,YACN3F,KAAKoO,GAAGgB,cAAc,IAAIrB,MAAM,YAazCsC,cACE,MAAmB,aAAfrQ,KAAK2F,MACA3F,KAAKoO,GAAGgB,cAAc3P,EAAM,gBAG9BO,KAAKuO,QAAQqB,YAAY,CAAC,OAAQpK,EAAQqK,aAiBnDZ,oBAAqBhP,GACnBD,KAAKoO,GAAGa,oBAAoBhP,GAY9B2Q,uBAAwB3Q,GACtBD,KAAKoO,GAAGwC,uBAAuB3Q,GAUjCmP,iBAAkBnP,GAChBD,KAAKoO,GAAGgB,iBAAiBnP,MAQfkB,UAAUgO,SAAW,cAWrB0B,gBAAkB1B,GACvBlB,EAAc9M,UAAUgO,WAAaA,IAYhC2B,cAAgBC,UAAUC,eAAiBrD,IAY3CY,QChRC,KACb,IAEI0C,EAAW,GA8DfC,UAAYhC,IACQ,WAAdA,EAAElB,KAAK,GA7Db,SAAiBmD,GACf,IAAI1Q,EAAS0Q,EAAO1Q,OAChBuN,EAAO,IAAIoD,WANM,EAMK3Q,GAC1B,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAQC,IAAK,CAC/B,IAAIiM,EARe,EAQPjM,EACR2Q,EAASF,EAAOzQ,GAChB2Q,EAAS,EACXA,EAAS,EACAA,GAAU,IACnBA,GAAU,GAEZA,GAAkB,MAClBrD,EAAKrB,GAAS0E,EACdrD,EAAKrB,EAAQ,GAAK0E,GAAU,EAE9BJ,EAAS7N,KAAK4K,GA+CZsD,CAAOpC,EAAElB,KAAK,IACS,SAAdkB,EAAElB,KAAK,IA7CpB,SAAe6B,GACb,IAAI0B,EAAeN,EAASxQ,OAASwQ,EAAS,GAAGxQ,OAAS,EACtDA,EAASwQ,EAASxQ,OAAS8Q,EAC3BC,EAAM,IAAIJ,WAAW,GAAK3Q,GAC1BgR,EAAO,IAAIC,SAASF,EAAIL,QAG5BM,EAAKE,UAAU,EAAG,YAAY,GAE9BF,EAAKE,UAAU,EAAG,GAAKlR,GAAQ,GAE/BgR,EAAKE,UAAU,EAAG,YAAY,GAE9BF,EAAKE,UAAU,GAAI,YAAY,GAE/BF,EAAKE,UAAU,GAAI,IAAI,GAEvBF,EAAKG,UAAU,GAAI,GAAG,GAEtBH,EAAKG,UAAU,GAAI,GAAG,GAEtBH,EAAKE,UAAU,GAAI9B,GAAY,GAE/B4B,EAAKE,UAAU,GA7CM,EA6CF9B,GAA+B,GAElD4B,EAAKG,UAAU,GA/CM,GA+CgB,GAErCH,EAAKG,UAAU,GAAI,IAAsB,GAEzCH,EAAKE,UAAU,GAAI,YAAY,GAE/BF,EAAKE,UAAU,GAAIlR,GAAQ,GAG3B,IAAK,IAAIC,EAAI,EAAGA,EAAIuQ,EAASxQ,OAAQC,IACnC8Q,EAAIK,IAAIZ,EAASvQ,GAAIA,EAAI6Q,EAAe,IAG1CN,EAAW,GACXrB,YAAY4B,EAAIL,OAAQ,CAACK,EAAIL,SAO3BW,CAAK5C,EAAElB,KAAK,UCnEL+D,sFAgBJnE,OAAOK,gBACVL,OAAOK,cAAgB+D,QAEpBC,aAAe,8DAGtB,sFACMjS,KAAKkS,4CACAlS,6BAGY+Q,UAAUC,aAAamB,aAAa,CACvDC,OAAO,EACPC,OAAO,kBAFHnE,cAIDgE,GAAK,IAAIjE,cAAcC,QACvB+D,aAAe,qBAEbjS,yIAGT,gHACS,IAAIL,SAAQ,SAACV,OACbsN,EAAK2F,SACF,IAAInM,MAAM,wBAGlBwG,EAAK0F,aAAe,GAEpB1F,EAAK2F,GAAGjD,iBAAiB,SAAS,WAChChQ,OAKFsN,EAAK2F,GAAGjD,iBAAiB,iBAAiB,SAACC,GACrCA,EAAElB,KAAKsE,KAAO,GAChB/F,EAAK0F,aAAa7O,KAAK8L,EAAElB,SAI7BzB,EAAK2F,GAAG7C,yIAIZ,gHACS,IAAI1P,SAAQ,SAACV,OACbgO,EAAKiF,SACF,IAAInM,MAAM,wBAGlBkH,EAAKiF,GAAGjD,iBAAiB,QAAQ,WAC/BhQ,EAAQ,IAAI0P,KAAK1B,EAAKgF,kBAGxBhF,EAAKiF,GAAGnI,8HApEZ,kBACO/J,KAAK4D,gBACHA,SAAW,IAAImO,GAGf/R,KAAK4D,kBCRD,SAAS2O,EAAehS,EAAKG,GAC1C,OCLa,SAAyBH,GACtC,GAAIK,MAAMgB,QAAQrB,GAAM,OAAOA,EDIxBiS,CAAejS,IELT,SAA+BA,EAAKG,GACjD,IAAI+R,EAAY,MAAPlS,EAAc,KAAyB,oBAAXwB,QAA0BxB,EAAIwB,OAAOC,WAAazB,EAAI,cAE3F,GAAU,MAANkS,EAAJ,CACA,IAIIC,EAAIC,EAJJC,EAAO,GACPC,GAAK,EACLC,GAAK,EAIT,IACE,IAAKL,EAAKA,EAAGpR,KAAKd,KAAQsS,GAAMH,EAAKD,EAAGxK,QAAQvI,QAC9CkT,EAAKxP,KAAKsP,EAAGlT,QAETkB,GAAKkS,EAAKnS,SAAWC,GAH4BmS,GAAK,IAK5D,MAAOzS,GACP0S,GAAK,EACLH,EAAKvS,UAEL,IACOyS,GAAsB,MAAhBJ,EAAW,QAAWA,EAAW,iBAE5C,GAAIK,EAAI,MAAMH,GAIlB,OAAOC,GFtBuBG,CAAqBxS,EAAKG,IAAMwB,EAA2B3B,EAAKG,IGLjF,WACb,MAAM,IAAIyB,UAAU,6IHIgF6Q,KDDzFjB,uDKJuDjH,qBAAkK,IAAImI,EAAE,IAAI/D,EAAE,IAAIjO,EAAE,KAAKiS,EAAE,cAAcxS,EAAE,SAASyS,EAAE,SAASC,EAAE,OAAOC,EAAE,MAAMvS,EAAE,OAAOwS,EAAE,QAAQtG,EAAE,UAAUuG,EAAE,OAAOC,EAAE,OAAOC,EAAE,eAAeC,EAAE,6FAA6FC,EAAE,sFAAsFC,EAAE,CAACpS,KAAK,KAAKqS,SAAS,2DAA2DC,MAAM,KAAKC,OAAO,wFAAwFD,MAAM,MAAME,EAAE,SAASf,EAAE/D,EAAEjO,GAAG,IAAIiS,EAAEe,OAAOhB,GAAG,OAAOC,GAAGA,EAAEzS,QAAQyO,EAAE+D,EAAE,GAAGrS,MAAMsO,EAAE,EAAEgE,EAAEzS,QAAQyT,KAAKjT,GAAGgS,GAAGkB,EAAE,CAAChB,EAAEa,EAAEI,EAAE,SAASnB,GAAG,IAAI/D,GAAG+D,EAAEoB,YAAYpT,EAAEqT,KAAKC,IAAIrF,GAAGgE,EAAEoB,KAAKE,MAAMvT,EAAE,IAAIP,EAAEO,EAAE,GAAG,OAAOiO,GAAG,EAAE,IAAI,KAAK8E,EAAEd,EAAE,EAAE,KAAK,IAAIc,EAAEtT,EAAE,EAAE,MAAMsT,EAAE,SAASf,EAAE/D,EAAEjO,GAAG,GAAGiO,EAAEuF,OAAOxT,EAAEwT,OAAO,OAAOxB,EAAEhS,EAAEiO,GAAG,IAAIgE,EAAE,IAAIjS,EAAEyT,OAAOxF,EAAEwF,SAASzT,EAAE0T,QAAQzF,EAAEyF,SAASjU,EAAEwO,EAAEK,QAAQqF,IAAI1B,EAAEI,GAAGH,EAAElS,EAAEP,EAAE,EAAE0S,EAAElE,EAAEK,QAAQqF,IAAI1B,GAAGC,GAAG,EAAE,GAAGG,GAAG,UAAUJ,GAAGjS,EAAEP,IAAIyS,EAAEzS,EAAE0S,EAAEA,EAAE1S,KAAK,IAAI2S,EAAE,SAASJ,GAAG,OAAOA,EAAE,EAAEqB,KAAKO,KAAK5B,IAAI,EAAEqB,KAAKE,MAAMvB,IAAI6B,EAAE,SAAS7B,GAAG,MAAM,CAACW,EAAEN,EAAEK,EAAEJ,EAAEwB,EAAEjU,EAAE0S,EAAEH,EAAE2B,EAAExB,EAAExG,EAAEoG,EAAEY,EAAEb,EAAEA,EAAEzS,EAAEuU,GAAG/B,EAAEgC,EAAElI,GAAGiG,IAAIgB,OAAOhB,GAAG,IAAIkC,cAAc1G,QAAQ,KAAK,KAAK2E,EAAE,SAASH,GAAG,YAAO,IAASA,IAAI+B,EAAE,KAAKI,EAAE,GAAGA,EAAEJ,GAAGpB,EAAE,IAAIkB,EAAE,SAAS7B,GAAG,OAAOA,aAAaoC,GAAGC,EAAE,SAASrC,EAAE/D,EAAEjO,GAAG,IAAIiS,EAAE,IAAID,EAAE,OAAO+B,EAAE,GAAG,iBAAiB/B,EAAEmC,EAAEnC,KAAKC,EAAED,GAAG/D,IAAIkG,EAAEnC,GAAG/D,EAAEgE,EAAED,OAAO,CAAC,IAAIvS,EAAEuS,EAAEzR,KAAK4T,EAAE1U,GAAGuS,EAAEC,EAAExS,EAAE,OAAOO,GAAGiS,IAAI8B,EAAE9B,GAAGA,IAAIjS,GAAG+T,GAAGD,EAAE,SAAS9B,EAAE/D,GAAG,GAAG4F,EAAE7B,GAAG,OAAOA,EAAE1D,QAAQ,IAAItO,EAAE,iBAAiBiO,EAAEA,EAAE,GAAG,OAAOjO,EAAEwT,KAAKxB,EAAEhS,EAAEhB,KAAKC,UAAU,IAAImV,EAAEpU,IAAIsU,EAAEpB,EAAEoB,EAAE7B,EAAE4B,EAAEC,EAAE7U,EAAEoU,EAAES,EAAER,EAAE,SAAS9B,EAAE/D,GAAG,OAAO6F,EAAE9B,EAAE,CAACuC,OAAOtG,EAAEuG,GAAGC,IAAIxG,EAAEyG,GAAGC,EAAE1G,EAAE2G,GAAGC,QAAQ5G,EAAE4G,WAAW,IAAIT,EAAE,WAAW,SAASzB,EAAEX,GAAGjT,KAAKyV,GAAGH,EAAErC,EAAEuC,OAAO,MAAK,GAAIxV,KAAK+V,MAAM9C,GAAG,IAAIe,EAAEJ,EAAEzS,UAAU,OAAO6S,EAAE+B,MAAM,SAAS9C,GAAGjT,KAAKgW,GAAG,SAAS/C,GAAG,IAAI/D,EAAE+D,EAAEwB,KAAKxT,EAAEgS,EAAEyC,IAAI,GAAG,OAAOxG,EAAE,OAAO,IAAIzC,KAAKwJ,KAAK,GAAGV,EAAEnC,EAAElE,GAAG,OAAO,IAAIzC,KAAK,GAAGyC,aAAazC,KAAK,OAAO,IAAIA,KAAKyC,GAAG,GAAG,iBAAiBA,IAAI,MAAMxN,KAAKwN,GAAG,CAAC,IAAIgE,EAAEhE,EAAEgH,MAAMxC,GAAG,GAAGR,EAAE,CAAC,IAAIxS,EAAEwS,EAAE,GAAG,GAAG,EAAEC,GAAGD,EAAE,IAAI,KAAKiD,UAAU,EAAE,GAAG,OAAOlV,EAAE,IAAIwL,KAAKA,KAAK2J,IAAIlD,EAAE,GAAGxS,EAAEwS,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEC,IAAI,IAAI1G,KAAKyG,EAAE,GAAGxS,EAAEwS,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEC,IAAI,OAAO,IAAI1G,KAAKyC,GAAzX,CAA6X+D,GAAGjT,KAAK6V,GAAG5C,EAAE2C,GAAG,GAAG5V,KAAKqW,QAAQrC,EAAEqC,KAAK,WAAW,IAAIpD,EAAEjT,KAAKgW,GAAGhW,KAAKsW,GAAGrD,EAAEsD,cAAcvW,KAAKwW,GAAGvD,EAAEwD,WAAWzW,KAAK0W,GAAGzD,EAAE0D,UAAU3W,KAAK4W,GAAG3D,EAAE4D,SAAS7W,KAAK8W,GAAG7D,EAAE8D,WAAW/W,KAAKgX,GAAG/D,EAAEgE,aAAajX,KAAKkX,GAAGjE,EAAEkE,aAAanX,KAAKoX,IAAInE,EAAEoE,mBAAmBrD,EAAEsD,OAAO,WAAW,OAAO/B,GAAGvB,EAAEuD,QAAQ,WAAW,QAAQvX,KAAKgW,GAAG5U,aAAaqS,IAAIO,EAAEwD,OAAO,SAASvE,EAAE/D,GAAG,IAAIjO,EAAE8T,EAAE9B,GAAG,OAAOjT,KAAKyX,QAAQvI,IAAIjO,GAAGA,GAAGjB,KAAK0X,MAAMxI,IAAI8E,EAAE2D,QAAQ,SAAS1E,EAAE/D,GAAG,OAAO6F,EAAE9B,GAAGjT,KAAKyX,QAAQvI,IAAI8E,EAAE4D,SAAS,SAAS3E,EAAE/D,GAAG,OAAOlP,KAAK0X,MAAMxI,GAAG6F,EAAE9B,IAAIe,EAAE6D,GAAG,SAAS5E,EAAE/D,EAAEjO,GAAG,OAAOsU,EAAEnC,EAAEH,GAAGjT,KAAKkP,GAAGlP,KAAK6R,IAAI5Q,EAAEgS,IAAIe,EAAE8D,KAAK,WAAW,OAAOxD,KAAKE,MAAMxU,KAAK+X,UAAU,MAAM/D,EAAE+D,QAAQ,WAAW,OAAO/X,KAAKgW,GAAGgC,WAAWhE,EAAEyD,QAAQ,SAASxE,EAAE/D,GAAG,IAAIjO,EAAEjB,KAAKkT,IAAIqC,EAAEnC,EAAElE,IAAIA,EAAElC,EAAEuI,EAAET,EAAE7B,GAAGQ,EAAE,SAASR,EAAE/D,GAAG,IAAIxO,EAAE6U,EAAER,EAAE9T,EAAE0U,GAAGlJ,KAAK2J,IAAInV,EAAEqV,GAAGpH,EAAE+D,GAAG,IAAIxG,KAAKxL,EAAEqV,GAAGpH,EAAE+D,GAAGhS,GAAG,OAAOiS,EAAExS,EAAEA,EAAEgX,MAAMrE,IAAIK,EAAE,SAAST,EAAE/D,GAAG,OAAOqG,EAAER,EAAE9T,EAAEgX,SAAShF,GAAG9S,MAAMc,EAAEgX,OAAO,MAAM/E,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,CAAC,GAAG,GAAG,GAAG,MAAM5R,MAAM4N,IAAIjO,IAAI0S,EAAE3T,KAAK4W,GAAGhD,EAAE5T,KAAKwW,GAAGxC,EAAEhU,KAAK0W,GAAGvC,EAAE,OAAOnU,KAAK2V,GAAG,MAAM,IAAI,OAAO3I,GAAG,KAAKuG,EAAE,OAAOL,EAAEO,EAAE,EAAE,GAAGA,EAAE,GAAG,IAAI,KAAKH,EAAE,OAAOJ,EAAEO,EAAE,EAAEG,GAAGH,EAAE,EAAEG,EAAE,GAAG,KAAK9S,EAAE,IAAIkU,EAAEhV,KAAKkY,UAAUC,WAAW,EAAE/C,GAAGzB,EAAEqB,EAAErB,EAAE,EAAEA,GAAGqB,EAAE,OAAOvB,EAAEP,EAAEc,EAAEoB,EAAEpB,GAAG,EAAEoB,GAAGxB,GAAG,KAAKP,EAAE,KAAKG,EAAE,OAAOE,EAAES,EAAE,QAAQ,GAAG,KAAKf,EAAE,OAAOM,EAAES,EAAE,UAAU,GAAG,KAAKhB,EAAE,OAAOO,EAAES,EAAE,UAAU,GAAG,KAAKzT,EAAE,OAAOgT,EAAES,EAAE,eAAe,GAAG,QAAQ,OAAOnU,KAAKuP,UAAUyE,EAAE0D,MAAM,SAASzE,GAAG,OAAOjT,KAAKyX,QAAQxE,GAAE,IAAKe,EAAEoE,KAAK,SAASnF,EAAE/D,GAAG,IAAIjO,EAAEH,EAAEyU,EAAET,EAAE7B,GAAGjG,EAAE,OAAOhN,KAAK2V,GAAG,MAAM,IAAIlC,GAAGxS,EAAE,GAAGA,EAAEoS,GAAGrG,EAAE,OAAO/L,EAAEuS,GAAGxG,EAAE,OAAO/L,EAAEqS,GAAGtG,EAAE,QAAQ/L,EAAEsS,GAAGvG,EAAE,WAAW/L,EAAEmS,GAAGpG,EAAE,QAAQ/L,EAAEkS,GAAGnG,EAAE,UAAU/L,EAAEP,GAAGsM,EAAE,UAAU/L,EAAEiS,GAAGlG,EAAE,eAAe/L,GAAGH,GAAG4S,EAAE5S,IAAIuS,EAAErT,KAAK0W,IAAIxH,EAAElP,KAAK4W,IAAI1H,EAAE,GAAGpO,IAAIwS,GAAGxS,IAAIyS,EAAE,CAAC,IAAII,EAAE3T,KAAKuP,QAAQsC,IAAI2B,EAAE,GAAGG,EAAEqC,GAAGvC,GAAGC,GAAGC,EAAE0C,OAAOrW,KAAKgW,GAAGrC,EAAE9B,IAAI2B,EAAEc,KAAK+D,IAAIrY,KAAK0W,GAAG/C,EAAE2E,gBAAgBtC,QAAQvC,GAAGzT,KAAKgW,GAAGvC,GAAGC,GAAG,OAAO1T,KAAKqW,OAAOrW,MAAMgU,EAAEnC,IAAI,SAASoB,EAAE/D,GAAG,OAAOlP,KAAKuP,QAAQ6I,KAAKnF,EAAE/D,IAAI8E,EAAEuE,IAAI,SAAStF,GAAG,OAAOjT,KAAKuV,EAAET,EAAE7B,OAAOe,EAAEY,IAAI,SAAS1B,EAAElG,GAAG,IAAIwG,EAAEC,EAAEzT,KAAKkT,EAAEsF,OAAOtF,GAAG,IAAIQ,EAAE6B,EAAET,EAAE9H,GAAG2G,EAAE,SAASV,GAAG,IAAI/D,EAAE6F,EAAEtB,GAAG,OAAO8B,EAAER,EAAE7F,EAAEuF,KAAKvF,EAAEuF,OAAOH,KAAKmE,MAAMxF,EAAEC,IAAIO,IAAI,GAAGC,IAAIJ,EAAE,OAAOtT,KAAK6R,IAAIyB,EAAEtT,KAAKwW,GAAGtD,GAAG,GAAGQ,IAAIH,EAAE,OAAOvT,KAAK6R,IAAI0B,EAAEvT,KAAKsW,GAAGpD,GAAG,GAAGQ,IAAIL,EAAE,OAAOM,EAAE,GAAG,GAAGD,IAAI5S,EAAE,OAAO6S,EAAE,GAAG,IAAIC,GAAGJ,EAAE,GAAGA,EAAEL,GAAGjE,EAAEsE,EAAEJ,GAAGnS,EAAEuS,EAAE9S,GAAGuS,EAAEO,GAAGE,IAAI,EAAEM,EAAEhU,KAAKgW,GAAGgC,UAAU9E,EAAEU,EAAE,OAAO2B,EAAER,EAAEf,EAAEhU,OAAOgU,EAAE0E,SAAS,SAASzF,EAAE/D,GAAG,OAAOlP,KAAK4U,KAAK,EAAE3B,EAAE/D,IAAI8E,EAAE2E,OAAO,SAAS1F,GAAG,IAAI/D,EAAElP,KAAKiB,EAAEjB,KAAKkY,UAAU,IAAIlY,KAAKuX,UAAU,OAAOtW,EAAE2X,aAAanF,EAAE,IAAIP,EAAED,GAAG,uBAAuBvS,EAAE6U,EAAEnB,EAAEpU,MAAMmT,EAAEnT,KAAK8W,GAAG1D,EAAEpT,KAAKgX,GAAG3D,EAAErT,KAAKwW,GAAG1V,EAAEG,EAAE4S,SAASP,EAAErS,EAAE8S,OAAO/G,EAAE,SAASiG,EAAEhS,EAAEP,EAAEyS,GAAG,OAAOF,IAAIA,EAAEhS,IAAIgS,EAAE/D,EAAEgE,KAAKxS,EAAEO,GAAG4X,OAAO,EAAE1F,IAAII,EAAE,SAASN,GAAG,OAAOsC,EAAEpC,EAAEA,EAAE,IAAI,GAAGF,EAAE,MAAMO,EAAEvS,EAAE6X,UAAU,SAAS7F,EAAE/D,EAAEjO,GAAG,IAAIiS,EAAED,EAAE,GAAG,KAAK,KAAK,OAAOhS,EAAEiS,EAAEiC,cAAcjC,GAAGQ,EAAE,CAACqF,GAAG9E,OAAOjU,KAAKsW,IAAIhV,OAAO,GAAG0X,KAAKhZ,KAAKsW,GAAG1C,EAAEP,EAAE,EAAE4F,GAAG1D,EAAEpC,EAAEE,EAAE,EAAE,EAAE,KAAK6F,IAAIlM,EAAE/L,EAAEkY,YAAY9F,EAAEC,EAAE,GAAG8F,KAAKpM,EAAEsG,EAAED,GAAG2B,EAAEhV,KAAK0W,GAAG2C,GAAG9D,EAAEpC,EAAEnT,KAAK0W,GAAG,EAAE,KAAKlD,EAAES,OAAOjU,KAAK4W,IAAI0C,GAAGtM,EAAE/L,EAAEsY,YAAYvZ,KAAK4W,GAAG9V,EAAE,GAAG0Y,IAAIxM,EAAE/L,EAAEwY,cAAczZ,KAAK4W,GAAG9V,EAAE,GAAG4Y,KAAK5Y,EAAEd,KAAK4W,IAAI+C,EAAE1F,OAAOd,GAAGyG,GAAGrE,EAAEpC,EAAEA,EAAE,EAAE,KAAKnG,EAAEuG,EAAE,GAAGsG,GAAGtG,EAAE,GAAGF,EAAEG,EAAEL,EAAEC,GAAE,GAAI0G,EAAEtG,EAAEL,EAAEC,GAAE,GAAIY,EAAEC,OAAOb,GAAG2G,GAAGxE,EAAEpC,EAAEC,EAAE,EAAE,KAAKD,EAAEc,OAAOjU,KAAKkX,IAAI8C,GAAGzE,EAAEpC,EAAEnT,KAAKkX,GAAG,EAAE,KAAK+C,IAAI1E,EAAEpC,EAAEnT,KAAKoX,IAAI,EAAE,KAAK8C,EAAExZ,GAAG,OAAOwS,EAAEzE,QAAQkF,YAAYV,EAAE/D,GAAG,OAAOA,GAAGwE,EAAET,IAAIvS,EAAE+N,QAAQ,IAAI,QAAQuF,EAAEK,UAAU,WAAW,OAAO,IAAIC,KAAKmE,MAAMzY,KAAKgW,GAAGmE,oBAAoB,KAAKnG,EAAEoG,KAAK,SAASlH,EAAEM,EAAEC,GAAG,IAAIC,EAAEC,EAAE4B,EAAET,EAAEtB,GAAGI,EAAEmB,EAAE7B,GAAGc,GAAGJ,EAAES,YAAYrU,KAAKqU,aAAanF,EAAEiF,EAAEnU,KAAK4T,EAAEoB,EAAEO,EAAEvB,EAAEhU,KAAK4T,GAAG,OAAOoB,GAAGtB,EAAE,GAAGA,EAAEH,GAAGyB,EAAE,GAAGtB,EAAEJ,GAAG0B,EAAEtB,EAAE1G,GAAGgI,EAAE,EAAEtB,EAAE5S,IAAIqT,EAAEH,GAAG,OAAON,EAAEL,IAAIc,EAAEH,GAAG,MAAMN,EAAEN,GAAGe,EAAElT,EAAEyS,EAAEP,GAAGgB,EAAEjF,EAAEwE,EAAEhT,GAAGyT,EAAElB,EAAES,GAAGC,IAAIQ,EAAEV,EAAEuB,EAAEO,EAAElC,EAAE2B,IAAIhB,EAAEsE,YAAY,WAAW,OAAOtY,KAAK0X,MAAMpE,GAAGoD,IAAI1C,EAAEkE,QAAQ,WAAW,OAAO9C,EAAEpV,KAAKyV,KAAKzB,EAAEwB,OAAO,SAASvC,EAAE/D,GAAG,IAAI+D,EAAE,OAAOjT,KAAKyV,GAAG,IAAIxU,EAAEjB,KAAKuP,QAAQ2D,EAAEoC,EAAErC,EAAE/D,GAAE,GAAI,OAAOgE,IAAIjS,EAAEwU,GAAGvC,GAAGjS,GAAG+S,EAAEzE,MAAM,WAAW,OAAOgG,EAAER,EAAE/U,KAAKgW,GAAGhW,OAAOgU,EAAEiE,OAAO,WAAW,OAAO,IAAIxL,KAAKzM,KAAK+X,YAAY/D,EAAEqG,OAAO,WAAW,OAAOra,KAAKuX,UAAUvX,KAAKsa,cAAc,MAAMtG,EAAEsG,YAAY,WAAW,OAAOta,KAAKgW,GAAGsE,eAAetG,EAAE5S,SAAS,WAAW,OAAOpB,KAAKgW,GAAGuE,eAAe3G,EAAtwI,GAA2wI4G,EAAEnF,EAAElU,UAAU,OAAO4T,EAAE5T,UAAUqZ,EAAE,CAAC,CAAC,MAAMtH,GAAG,CAAC,KAAKxS,GAAG,CAAC,KAAKyS,GAAG,CAAC,KAAKC,GAAG,CAAC,KAAKC,GAAG,CAAC,KAAKC,GAAG,CAAC,KAAKC,GAAG,CAAC,KAAKC,IAAIhQ,kBAAkByP,GAAGuH,EAAEvH,EAAE,IAAI,SAAS/D,GAAG,OAAOlP,KAAK6X,GAAG3I,EAAE+D,EAAE,GAAGA,EAAE,QAAQ8B,EAAE0F,OAAO,SAASxH,EAAE/D,GAAG,OAAO+D,EAAEyH,KAAKzH,EAAE/D,EAAEmG,EAAEN,GAAG9B,EAAEyH,IAAG,GAAI3F,GAAGA,EAAES,OAAOF,EAAEP,EAAE4F,QAAQ7F,EAAEC,EAAE+C,KAAK,SAAS7E,GAAG,OAAO8B,EAAE,IAAI9B,IAAI8B,EAAE6F,GAAGxF,EAAEJ,GAAGD,EAAE8F,GAAGzF,EAAEL,EAAED,EAAE,GAAGC,EAAtwM7F,uBCO5E,SAAS4L,SACdC,IAAAA,eACAC,IAAAA,cAKMC,EAAUF,EACTG,IAAYC,UAAMC,SAASrJ,EAAmBsJ,yBACvBF,UAAMC,UAAS,MAAtCE,OAASC,WACUJ,UAAMC,cAAzBhJ,OAAOoJ,OAERC,EAAcN,UAAMO,aACxB,SAACjc,OACOD,EAA6B,CACjCoH,KAAM,QACNpH,MAAOC,EAAM2M,QACb3M,MAAAA,GAEFwb,EAAQU,kBAAkBX,EAAexb,KAE3C,CAACwb,EAAeC,IAGZW,EAAcT,UAAMO,sBAAY,qGAE5BR,EAASW,oCACTX,EAASY,qBACfP,GAAW,mDAEXE,iEAED,CAACP,EAAUO,IAERM,EAAaZ,UAAMO,sBAAY,2GAEjBR,EAASc,oBAAnB3I,SACNmI,EAASnI,GACTkI,GAAW,mDAEXE,iEAED,CAACP,EAAUO,IAERQ,EAAed,UAAMO,aAAY,cACjCtJ,EAAO,KACH5S,EAA6B,CACjCoH,KAAM,QACNpH,MAAO,QACP4S,MAAAA,GAEF6I,EAAQU,kBAAkBX,EAAexb,GACzCgc,OAASnb,MAEV,CAAC2a,EAAe5I,EAAO6I,IAEpBiB,EAAiBlB,EAAckB,eACjClB,EAAckB,eACd,cAGFf,wBAACgB,OACCC,GAAI,CACFC,KAAM,WACNC,QAAS,eACA,CACPD,KAAM,WACNE,SAAU,eAEC,CACXC,GAAI,KAIPlB,GACCH,wBAACsB,UACC7V,KAAK,SACL8V,QAASd,EACTe,UAAWrB,EACXsB,QAAQ,YACRC,MAAM,UACNC,UAAW3B,wBAAC4B,6CAKdzB,GACAH,wBAACsB,UACC7V,KAAK,SACL8V,QAASX,EACTY,SAAUrB,EACVsB,QAAQ,YACRC,MAAM,UACNC,UAAW3B,wBAAC4B,iCAKhB5B,wBAACsB,UACC7V,KAAK,SACL8V,QAAST,EACTU,UAAWvK,EACXwK,QAAQ,YACRC,MAAM,UACNC,UAAW3B,wBAAC4B,qBAEXb,IClGF,SAASc,SACdjC,IAAAA,eACAC,IAAAA,cAKMC,EAAUF,MACUI,UAAMC,SAAiB,OAA1C6B,OAAOC,OAERC,EAAmBhC,UAAMO,aAC7B,SAAC0B,OAEOC,EAAoB,MACtBD,MACG,IAAI1c,EAAI,EAAGA,EAAI0c,EAAS3c,OAAQC,GAAK,EAAG,KACrC4c,EAAOF,EAASG,KAAK7c,GACvB4c,GACFD,EAAUja,KAAKka,GAIrBJ,EAASG,KAEX,IAGIG,EAAcrC,UAAMO,aAAY,cAChCuB,EAAMxc,OAAS,EAAG,KAEdgd,EAA0B,CAAE7W,KAAM,OAAQpH,MADlCyd,EAAMlQ,KAAI,SAACuG,UAAMA,EAAE9R,QAAMJ,WACgB6b,MAAAA,GACvDhC,EAAQU,kBAAkBX,EAAeyC,MAE1C,CAACzC,EAAeC,EAASgC,IAEtBf,EAAiBlB,EAAckB,eACjClB,EAAckB,eACd,cAGFf,wBAACgB,OACCC,GAAI,CACFC,KAAM,WACNqB,SAAU,OACVpB,QAAS,OACTqB,cAAe,iBACN,CACPtB,KAAM,WACNqB,SAAU,oBAEC,CACXE,GAAI,KAIRzC,wBAAC0C,YACEZ,EAAMlQ,KAAI,SAACuG,UACV6H,+BAAK9b,cAAQiU,EAAE9R,iBAAQ8R,EAAEhB,OACvB6I,wBAAC2C,gBACD3C,wBAAC4C,YAAS1e,IAAKiU,EAAE9R,MACf2Z,wBAAC6C,oBACC7C,wBAAC4B,4BAEH5B,wBAAC8C,cAAWC,MAAO,CAAEC,aAAc,aAAc5B,SAAU,IACxDjJ,EAAE9R,YAOb2Z,wBAACgB,OACCC,GAAI,CACFE,QAAS,eACA,CACPD,KAAM,WACNE,SAAU,eAEC,CACXC,GAAI,KAIRrB,wBAACsB,UACCE,UAAU,EACVyB,UAAU,QACVxB,QAAQ,YACRC,MAAM,UACNC,UAAW3B,wBAAC4B,qCAGZ5B,iCACEvU,KAAK,OACLyX,OAAQrD,EAAcqD,OACtBC,SAAUtD,EAAcsD,SACxBC,SAAU,SAACrP,UAAYiO,EAAiBjO,EAAE5L,OAAO2Z,QACjDiB,MAAO,CAAE5B,QAAS,WAGtBnB,wBAACsB,UACC7V,KAAK,SACL8V,QAASc,EACTb,SAA2B,IAAjBM,EAAMxc,OAChBmc,QAAQ,YACRC,MAAM,UACNC,UAAW3B,wBAAC4B,qBAEXb,KCrHJ,SAASsC,SACdC,IAAAA,GACArS,IAAAA,QACAsS,IAAAA,SACAC,IAAAA,YAOIvS,EAAQS,iBACHsO,+BAAKsD,GAAIA,QAGZG,EAAWxS,EAAQQ,UAAYR,EAAQQ,UAAYR,EAAQI,UAE3DqS,EACJ1D,wBAACgB,OACCI,SAAU,EACVuC,WAAY,EACZtC,GAAIpQ,EAAQrM,KAAO,EAAI,EACvBgf,GAAI3S,EAAQrM,KAAO,EAAI,GAEvBob,wBAAC6D,UAAOC,IAAK7S,EAAQ8S,SAAUC,IAAK/S,EAAQgT,UAI1CC,EACJlE,wBAACgB,OAAIuB,SAAS,OAAO4B,GAAI,GACvBnE,wBAAC8C,cAAWrB,QAAQ,QAAQ2C,MAAOnT,EAAQrM,KAAO,QAAU,QACzDqM,EAAQ8S,WAKTM,EACJrE,wBAACgB,OAAIuB,SAAS,OAAO4B,GAAI,GACvBnE,wBAAC8C,cACCrB,QAAQ,QACR2C,MAAOnT,EAAQrM,KAAO,QAAU,OAChC8c,MAAM,iBAEL+B,MAAAA,SAAAA,EAAUa,mBAAmB,GAAI,CAChCC,KAAM,UACNC,OAAQ,qBAOdxE,wBAACyE,QAAKC,OACJ1E,wBAACgB,OAAIuB,SAAS,OAAOpB,QAAQ,OAAOqB,cAAc,UAC/Ce,GACCvD,wBAAC8C,cAAWsB,MAAM,UACfX,MAAAA,SAAAA,EAAUkB,sBAGf3E,wBAACgB,OACCsC,GAAIA,EACJf,SAAS,OACTqC,GAAI,EACJC,GAAI5T,EAAQrM,KAAO,MAAQ,EAC3BkgB,GAAI7T,EAAQrM,KAAO,EAAI,MACvBuc,QAAQ,OACR4D,eAAgB9T,EAAQrM,KAAO,WAAa,aAC5Cme,MAAO,CAAEC,aAAc,eAEtB/R,EAAQgT,SAAWhT,EAAQrM,MAAQ8e,EACpC1D,wBAACgB,OAAII,SAAU,EAAGD,QAAQ,OAAOqB,cAAc,UAC5CvR,EAAQ8S,UAAYG,EACrBlE,wBAACgB,OACCuB,SAAS,OACTyC,GAAI,EACJC,GAAI,EACJC,QAASjU,EAAQrM,KAAO,eAAiB,mBACzC8c,MAAOzQ,EAAQrM,KAAO,uBAAyB,eAC/CugB,aAAc,EACdC,UAAW,GAEO,SAAjBnU,EAAQxF,MACPuU,wBAAC8C,cAAWrB,QAAQ,QAAQsB,MAAO,CAAEsC,WAAY,aAC9CpU,EAAQsB,SAGK,QAAjBtB,EAAQxF,MAAkBuU,mCAAM/O,EAAQsB,UAE1CiR,GAAYa,GAEdpT,EAAQgT,QAAUhT,EAAQrM,MAAQ8e,KCtFtC,SAAS4B,SACd1F,IAAAA,eACAC,IAAAA,cAKMC,EAAUF,MACYI,UAAMC,SAAmB,OAA9C/T,OAAQqZ,OAETC,EAAexF,UAAMO,aACzB,SAAClc,GACM6H,EAAOuZ,SAASphB,GAGnBkhB,EAAUrZ,EAAOpE,QAAO,SAACmS,UAAMA,IAAM5V,MAFrCkhB,cAAcrZ,IAAQ7H,OAK1B,CAAC6H,IAGGmW,EAAcrC,UAAMO,aAAY,eAC9BmF,EAAU7F,EAAc6F,QAAQ5d,QAAO,SAACnC,UAC5CuG,EAAOuZ,SAAS9f,EAAEtB,UAGdie,EAAiC,CACrC7W,KAAM,eACNpH,MAAOqhB,EAAQ9T,KAAI,SAACjM,UAAMA,EAAEggB,QAAM1f,WAClCyf,QAAAA,GAEF5F,EAAQU,kBAAkBX,EAAeyC,GACzCiD,EAAU,MACT,CAAC1F,EAAeC,EAAS5T,IAEtB6U,EAAiBlB,EAAckB,eACjClB,EAAckB,eACd,cAGFf,wBAACgB,OACCC,GAAI,CACFC,KAAM,WACNC,QAAS,OACTqB,cAAe,iBACN,CACPtB,KAAM,WACNqB,SAAU,oBAEC,CACXE,GAAI,KAIP5C,EAAc6F,QAAQ9T,KAAI,SAACjM,UAC1Bqa,wBAACsB,UACCpd,IAAK2b,EAAc6F,QAAQ1T,QAAQrM,GACnC8F,KAAK,SACLpH,MAAOsB,EAAEtB,MACTkd,QAAS,SAACxN,UAAYyR,EAAazR,EAAE6R,cAAcvhB,QACnDod,QAAUvV,EAAOuZ,SAAS9f,EAAEtB,OAAsB,YAAb,WACrCqd,MAAM,WAEL/b,EAAEggB,SAGP3F,wBAACsB,UACC7V,KAAK,SACL8V,QAASc,EACTb,SAA4B,IAAlBtV,EAAO5G,OACjBmc,QAAQ,YACRC,MAAM,UACNC,UAAW3B,wBAAC4B,qBAEXb,IC7EF,SAAS8E,SACdjG,IAAAA,eACAC,IAAAA,cAKMC,EAAUF,EAEVyC,EAAcrC,UAAMO,aACxB,SAAClc,OACO8L,EAAS0P,EAAc6F,QAAQI,MAAK,SAACngB,UAAMA,EAAEtB,QAAUA,SACxD8L,QACG,IAAIvF,+BAAwBvG,QAE9Bie,EAA4B,CAChC7W,KAAM,SACNpH,MAAO8L,EAAOwV,KACdxV,OAAAA,GAEF2P,EAAQU,kBAAkBX,EAAeyC,KAE3C,CAACzC,EAAeC,WAIhBE,wBAACgB,OACCC,GAAI,CACFC,KAAM,WACNC,QAAS,OACTqB,cAAe,iBACN,CACPtB,KAAM,WACNqB,SAAU,oBAEC,CACXE,GAAI,KAIP5C,EAAc6F,QAAQ9T,KAAI,SAACjM,UAC1Bqa,wBAACsB,UACCpd,IAAK2b,EAAc6F,QAAQ1T,QAAQrM,GACnC8F,KAAK,SACLpH,MAAOsB,EAAEtB,MACTkd,QAAS,SAACxN,UAAYsO,EAAYtO,EAAE6R,cAAcvhB,QAClDod,QAAQ,YACRC,MAAM,WAEL/b,EAAEggB,UCjDN,SAASI,SACdnG,IAAAA,eACAC,IAAAA,cAKMC,EAAUF,MACUI,UAAMC,SAASJ,EAAcmG,iBAAhD3hB,OAAO4hB,OAER5D,EAAcrC,UAAMO,aAAY,cAChClc,EAAO,KACHie,EAA0B,CAAE7W,KAAM,OAAQpH,MAAAA,GAChDyb,EAAQU,kBAAkBX,EAAeyC,GACzC2D,EAAS,OAEV,CAACpG,EAAeC,EAASzb,IAEtB6hB,EAAgBlG,UAAMO,aAC1B,SAACxM,GACKA,EAAEoS,YAAYC,aAIJ,UAAVrS,EAAE7P,KAAoB6P,EAAEsS,WAC1BtS,EAAEuS,iBACFjE,OAGJ,CAACA,IAGGtB,EAAiBlB,EAAckB,eACjClB,EAAckB,eACd,cAGFf,wBAACgB,OACCC,GAAI,CACFC,KAAM,WACNC,QAAS,eACA,CACPD,KAAM,WACNE,SAAU,eAEC,CACXC,GAAI,mBAEW,CACfH,KAAM,cAIVlB,wBAACuG,aACCC,YAAa3G,EAAc2G,YAC3BniB,MAAOA,EACP+e,SAAU,SAACrP,UAAYkS,EAASlS,EAAE5L,OAAO9D,QACzCoiB,aACAC,aACAC,WAAY,CAAEC,UAAWV,GACzBzE,QAAQ,WACRoF,QAAS,KAEX7G,wBAACsB,UACC7V,KAAK,SACL8V,QAASc,EACTb,UAAWnd,EACXod,QAAQ,YACRC,MAAM,UACNC,UAAW3B,wBAAC4B,qBAEXb,0ECvDF,gBAKCjB,IAJNF,mBAKgCI,UAAMC,SAASH,EAAQgH,kBAAhDnW,OAAUoW,WACW/G,UAAMC,SAASH,EAAQkH,uBAA5CC,OAAQC,OAETC,EAASnH,UAAMoH,OAAuB,MACtCC,EAASrH,UAAMO,aAAY,WAC3B4G,EAAOG,UACTH,EAAOG,QAAQC,UAAYJ,EAAOG,QAAQE,gBAG3C,CAACL,IACJnH,UAAMyH,WAAU,WASd3H,EAAQ4H,iCAPNX,IAAgBjH,EAAQgH,gBACxBO,OAOFvH,EAAQ6H,+BAJNT,EAAUpH,EAAQkH,oBAClBK,SAID,CAACvH,EAASuH,QAMPO,EAAkB5H,UAAM6H,SAAQ,kBAC/BZ,GAA0B,WAAhBA,EAAOxb,KAGdwb,EACLa,UAHM,OAIR,CAACb,IAEEc,EAAa,CACjBtc,KAAM,OACN8G,QAAS,mBACT3N,MAAM,GAGJojB,EAAWC,EAAM,GACjBC,EAAWD,EAAM,UAGnBjI,wBAACgB,OACCC,GAAI,CACFkH,OAAQ,OACRC,MAAO,OACPzO,EAAG,EACHuL,QAAS,qBACT/D,QAAS,OACTqB,cAAe,iBACN,CACPD,SAAU,oBAEC,CACXE,GAAI,KAIRzC,wBAACgB,OACCC,GAAI,CACFC,KAAM,SACNmH,UAAW,OACXC,wBAAyB,QACzBnH,QAAS,OACTqB,cAAe,iBACN,CACPD,SAAU,SAGdgG,IAAKpB,GAEJxW,EAASiB,KAAI,SAAC4W,OACTjF,GAAW,EACXC,IAAa1D,EAAQ2I,YAAYC,gBAC/B5I,EAAQ2I,YAAYC,eAAiBF,EAAI9W,UAAW,KAClD4V,EAAUW,EACdO,EAAI/W,UAAY+W,EAAI/W,UAAY+W,EAAInX,WAGlCiW,EAAQ9J,OAAO,cAAgBwK,EAASxK,OAAO,cACjD+F,GAAW,GAEbyE,EAAWV,EAEPA,EAAQrI,KAAKiJ,GAAY,IAC3B1E,GAAW,EAEX0E,EAAWZ,QAGE,SAAbkB,EAAI/c,MAAgC,QAAb+c,EAAI/c,KAE3BuU,wBAACqD,GACCnf,IAAKyM,EAASqB,QAAQwW,GACtBlF,oBAAc3S,EAASqB,QAAQwW,GAAO,GACtCvX,QAASuX,EACTjF,SAAUA,EACVC,SAAUA,IAKdxD,wBAACqD,GACCnf,IAAKyM,EAASqB,QAAQwW,GACtBlF,oBAAc3S,EAASqB,QAAQwW,GAAO,GACtCvX,QAAS8W,EACTxE,SAAUA,EACVC,SAAUA,QAKlBxD,wBAACgB,OACCC,GAAI,CACFC,KAAM,WACNC,QAAS,OACTwH,aAAc,mBACL,CACPvH,SAAU,KAIb6F,GAA0B,SAAhBA,EAAOxb,MAChBuU,wBAAC+F,GACCnG,eAAgBE,EAChBD,cAAeoH,IAGlBA,GAA0B,WAAhBA,EAAOxb,MAChBuU,wBAAC6F,GACCjG,eAAgBE,EAChBD,cAAeoH,IAGlBA,GAA0B,iBAAhBA,EAAOxb,MAChBuU,wBAACsF,GACC1F,eAAgBE,EAChBD,cAAeoH,IAGlBA,GAA0B,SAAhBA,EAAOxb,MAChBuU,wBAAC6B,GACCjC,eAAgBE,EAChBD,cAAeoH,IAGlBA,GAA0B,UAAhBA,EAAOxb,MAChBuU,wBAACL,GACCC,eAAgBE,EAChBD,cAAeoH,IAGlBA,GAA0B,WAAhBA,EAAOxb,MAChBuU,wBAAC4H,GACChI,eAAgBE,EAChBD,cAAeoH"}