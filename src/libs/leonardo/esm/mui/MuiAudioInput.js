import { Box, Button, Icon } from '@mui/material';
import React from 'react';
import { AudioMediaRecorder } from '../audio-media-recorder';
export function MuiAudioInput({
  chatController,
  actionRequest
}) {
  const chatCtl = chatController;
  const [audioRec] = React.useState(AudioMediaRecorder.getInstance());
  const [stopped, setStopped] = React.useState(true);
  const [audio, setAudio] = React.useState();
  const handleError = React.useCallback(error => {
    const value = {
      type: 'audio',
      value: error.message,
      error
    };
    chatCtl.setActionResponse(actionRequest, value);
  }, [actionRequest, chatCtl]);
  const handleStart = React.useCallback(async () => {
    try {
      await audioRec.initialize();
      await audioRec.startRecord();
      setStopped(false);
    } catch (error) {
      handleError(error);
    }
  }, [audioRec, handleError]);
  const handleStop = React.useCallback(async () => {
    try {
      const a = await audioRec.stopRecord();
      setAudio(a);
      setStopped(true);
    } catch (error) {
      handleError(error);
    }
  }, [audioRec, handleError]);
  const sendResponse = React.useCallback(() => {
    if (audio) {
      const value = {
        type: 'audio',
        value: 'Audio',
        audio
      };
      chatCtl.setActionResponse(actionRequest, value);
      setAudio(undefined);
    }
  }, [actionRequest, audio, chatCtl]);
  const sendButtonText = actionRequest.sendButtonText ? actionRequest.sendButtonText : 'Send';
  return /*#__PURE__*/React.createElement(Box, {
    sx: {
      flex: '1 1 auto',
      display: 'flex',
      '& > *': {
        flex: '1 1 auto',
        minWidth: 0
      },
      '& > * + *': {
        ml: 1
      }
    }
  }, stopped && /*#__PURE__*/React.createElement(Button, {
    type: "button",
    onClick: handleStart,
    disabled: !stopped,
    variant: "contained",
    color: "primary",
    startIcon: /*#__PURE__*/React.createElement(Icon, null, "keyboard_voice")
  }, "Rec start"), !stopped && /*#__PURE__*/React.createElement(Button, {
    type: "button",
    onClick: handleStop,
    disabled: stopped,
    variant: "contained",
    color: "primary",
    startIcon: /*#__PURE__*/React.createElement(Icon, null, "stop")
  }, "Rec stop"), /*#__PURE__*/React.createElement(Button, {
    type: "button",
    onClick: sendResponse,
    disabled: !audio,
    variant: "contained",
    color: "primary",
    startIcon: /*#__PURE__*/React.createElement(Icon, null, "send")
  }, sendButtonText));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tdWkvTXVpQXVkaW9JbnB1dC50c3giXSwibmFtZXMiOlsiQm94IiwiQnV0dG9uIiwiSWNvbiIsIlJlYWN0IiwiQXVkaW9NZWRpYVJlY29yZGVyIiwiTXVpQXVkaW9JbnB1dCIsImNoYXRDb250cm9sbGVyIiwiYWN0aW9uUmVxdWVzdCIsImNoYXRDdGwiLCJhdWRpb1JlYyIsInVzZVN0YXRlIiwiZ2V0SW5zdGFuY2UiLCJzdG9wcGVkIiwic2V0U3RvcHBlZCIsImF1ZGlvIiwic2V0QXVkaW8iLCJoYW5kbGVFcnJvciIsInVzZUNhbGxiYWNrIiwiZXJyb3IiLCJ2YWx1ZSIsInR5cGUiLCJtZXNzYWdlIiwic2V0QWN0aW9uUmVzcG9uc2UiLCJoYW5kbGVTdGFydCIsImluaXRpYWxpemUiLCJzdGFydFJlY29yZCIsImhhbmRsZVN0b3AiLCJhIiwic3RvcFJlY29yZCIsInNlbmRSZXNwb25zZSIsInVuZGVmaW5lZCIsInNlbmRCdXR0b25UZXh0IiwiZmxleCIsImRpc3BsYXkiLCJtaW5XaWR0aCIsIm1sIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxHQUFULEVBQWNDLE1BQWQsRUFBc0JDLElBQXRCLFFBQWtDLGVBQWxDO0FBQ0EsT0FBT0MsS0FBUCxNQUFrQixPQUFsQjtBQUVBLFNBQVNDLGtCQUFULFFBQW1DLHlCQUFuQztBQUlBLE9BQU8sU0FBU0MsYUFBVCxDQUF1QjtBQUM1QkMsRUFBQUEsY0FENEI7QUFFNUJDLEVBQUFBO0FBRjRCLENBQXZCLEVBTWdCO0FBQ3JCLFFBQU1DLE9BQU8sR0FBR0YsY0FBaEI7QUFDQSxRQUFNLENBQUNHLFFBQUQsSUFBYU4sS0FBSyxDQUFDTyxRQUFOLENBQWVOLGtCQUFrQixDQUFDTyxXQUFuQixFQUFmLENBQW5CO0FBQ0EsUUFBTSxDQUFDQyxPQUFELEVBQVVDLFVBQVYsSUFBd0JWLEtBQUssQ0FBQ08sUUFBTixDQUFlLElBQWYsQ0FBOUI7QUFDQSxRQUFNLENBQUNJLEtBQUQsRUFBUUMsUUFBUixJ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WDtBQUdFLElBQUEsUUFBUSxFQUFFZCxPQUhaO0FBSUUsSUFBQSxPQUFPLEVBQUMsV0FKVjtBQUtFLElBQUEsS0FBSyxFQUFDLFNBTFI7QUFNRSxJQUFBLFNBQVMsZUFBRSxvQkFBQyxJQUFEO0FBTmIsZ0JBMUJKLGVBcUNFLG9CQUFDLE1BQUQ7QUFDRSxJQUFBLElBQUksRUFBQyxRQURQO0FBRUUsSUFBQSxPQUFPLEVBQUVpQixZQUZYO0FBR0UsSUFBQSxRQUFRLEVBQUUsQ0FBQ2YsS0FIYjtBQUlFLElBQUEsT0FBTyxFQUFDLFdBSlY7QUFLRSxJQUFBLEtBQUssRUFBQyxTQUxSO0FBTUUsSUFBQSxTQUFTLGVBQUUsb0JBQUMsSUFBRDtBQU5iLEtBUUdpQixjQVJILENBckNGLENBREY7QUFrREQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3gsIEJ1dHRvbiwgSWNvbiB9IGZyb20gJ0BtdWkvbWF0ZXJpYWwnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgQXVkaW9NZWRpYVJlY29yZGVyIH0gZnJvbSAnLi4vYXVkaW8tbWVkaWEtcmVjb3JkZXInO1xuaW1wb3J0IHsgQ2hhdENvbnRyb2xsZXIgfSBmcm9tICcuLi9jaGF0LWNvbnRyb2xsZXInO1xuaW1wb3J0IHsgQXVkaW9BY3Rpb25SZXF1ZXN0LCBBdWRpb0FjdGlvblJlc3BvbnNlIH0gZnJvbSAnLi4vY2hhdC10eXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBNdWlBdWRpb0lucHV0KHtcbiAgY2hhdENvbnRyb2xsZXIsXG4gIGFjdGlvblJlcXVlc3QsXG59OiB7XG4gIGNoYXRDb250cm9sbGVyOiBDaGF0Q29udHJvbGxlcjtcbiAgYWN0aW9uUmVxdWVzdDogQXVkaW9BY3Rpb25SZXF1ZXN0O1xufSk6IFJlYWN0LlJlYWN0RWxlbWVudCB7XG4gIGNvbnN0IGNoYXRDdGwgPSBjaGF0Q29udHJvbGxlcjtcbiAgY29uc3QgW2F1ZGlvUmVjXSA9IFJlYWN0LnVzZVN0YXRlKEF1ZGlvTWVkaWFSZWNvcmRlci5nZXRJbnN0YW5jZSgpKTtcbiAgY29uc3QgW3N0b3BwZWQsIHNldFN0b3BwZWRdID0gUmVhY3QudXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFthdWRpbywgc2V0QXVkaW9dID0gUmVhY3QudXNlU3RhdGU8QmxvYiB8IHVuZGVmaW5lZD4oKTtcblxuICBjb25zdCBoYW5kbGVFcnJvciA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIChlcnJvcjogRXJyb3IpOiB2b2lkID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlOiBBdWRpb0FjdGlvblJlc3BvbnNlID0ge1xuICAgICAgICB0eXBlOiAnYXVkaW8nLFxuICAgICAgICB2YWx1ZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgZXJyb3IsXG4gICAgICB9O1xuICAgICAgY2hhdEN0bC5zZXRBY3Rpb25SZXNwb25zZShhY3Rpb25SZXF1ZXN0LCB2YWx1ZSk7XG4gICAgfSxcbiAgICBbYWN0aW9uUmVxdWVzdCwgY2hhdEN0bF0sXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlU3RhcnQgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGF1ZGlvUmVjLmluaXRpYWxpemUoKTtcbiAgICAgIGF3YWl0IGF1ZGlvUmVjLnN0YXJ0UmVjb3JkKCk7XG4gICAgICBzZXRTdG9wcGVkKGZhbHNlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaGFuZGxlRXJyb3IoZXJyb3IgYXMgRXJyb3IpO1xuICAgIH1cbiAgfSwgW2F1ZGlvUmVjLCBoYW5kbGVFcnJvcl0pO1xuXG4gIGNvbnN0IGhhbmRsZVN0b3AgPSBSZWFjdC51c2VDYWxsYmFjayhhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGEgPSBhd2FpdCBhdWRpb1JlYy5zdG9wUmVjb3JkKCk7XG4gICAgICBzZXRBdWRpbyhhKTtcbiAgICAgIHNldFN0b3BwZWQodHJ1ZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGhhbmRsZUVycm9yKGVycm9yIGFzIEVycm9yKTtcbiAgICB9XG4gIH0sIFthdWRpb1JlYywgaGFuZGxlRXJyb3JdKTtcblxuICBjb25zdCBzZW5kUmVzcG9uc2UgPSBSZWFjdC51c2VDYWxsYmFjaygoKTogdm9pZCA9PiB7XG4gICAgaWYgKGF1ZGlvKSB7XG4gICAgICBjb25zdCB2YWx1ZTogQXVkaW9BY3Rpb25SZXNwb25zZSA9IHtcbiAgICAgICAgdHlwZTogJ2F1ZGlvJyxcbiAgICAgICAgdmFsdWU6ICdBdWRpbycsXG4gICAgICAgIGF1ZGlvLFxuICAgICAgfTtcbiAgICAgIGNoYXRDdGwuc2V0QWN0aW9uUmVzcG9uc2UoYWN0aW9uUmVxdWVzdCwgdmFsdWUpO1xuICAgICAgc2V0QXVkaW8odW5kZWZpbmVkKTtcbiAgICB9XG4gIH0sIFthY3Rpb25SZXF1ZXN0LCBhdWRpbywgY2hhdEN0bF0pO1xuXG4gIGNvbnN0IHNlbmRCdXR0b25UZXh0ID0gYWN0aW9uUmVxdWVzdC5zZW5kQnV0dG9uVGV4dFxuICAgID8gYWN0aW9uUmVxdWVzdC5zZW5kQnV0dG9uVGV4dFxuICAgIDogJ1NlbmQnO1xuXG4gIHJldHVybiAoXG4gICAgPEJveFxuICAgICAgc3g9e3tcbiAgICAgICAgZmxleDogJzEgMSBhdXRvJyxcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAnJiA+IConOiB7XG4gICAgICAgICAgZmxleDogJzEgMSBhdXRvJyxcbiAgICAgICAgICBtaW5XaWR0aDogMCxcbiAgICAgICAgfSxcbiAgICAgICAgJyYgPiAqICsgKic6IHtcbiAgICAgICAgICBtbDogMSxcbiAgICAgICAgfSxcbiAgICAgIH19XG4gICAgPlxuICAgICAge3N0b3BwZWQgJiYgKFxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlU3RhcnR9XG4gICAgICAgICAgZGlzYWJsZWQ9eyFzdG9wcGVkfVxuICAgICAgICAgIHZhcmlhbnQ9XCJjb250YWluZWRcIlxuICAgICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgICAgc3RhcnRJY29uPXs8SWNvbj5rZXlib2FyZF92b2ljZTwvSWNvbj59XG4gICAgICAgID5cbiAgICAgICAgICBSZWMgc3RhcnRcbiAgICAgICAgPC9CdXR0b24+XG4gICAgICApfVxuICAgICAgeyFzdG9wcGVkICYmIChcbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVN0b3B9XG4gICAgICAgICAgZGlzYWJsZWQ9e3N0b3BwZWR9XG4gICAgICAgICAgdmFyaWFudD1cImNvbnRhaW5lZFwiXG4gICAgICAgICAgY29sb3I9XCJwcmltYXJ5XCJcbiAgICAgICAgICBzdGFydEljb249ezxJY29uPnN0b3A8L0ljb24+fVxuICAgICAgICA+XG4gICAgICAgICAgUmVjIHN0b3BcbiAgICAgICAgPC9CdXR0b24+XG4gICAgICApfVxuICAgICAgPEJ1dHRvblxuICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgb25DbGljaz17c2VuZFJlc3BvbnNlfVxuICAgICAgICBkaXNhYmxlZD17IWF1ZGlvfVxuICAgICAgICB2YXJpYW50PVwiY29udGFpbmVkXCJcbiAgICAgICAgY29sb3I9XCJwcmltYXJ5XCJcbiAgICAgICAgc3RhcnRJY29uPXs8SWNvbj5zZW5kPC9JY29uPn1cbiAgICAgID5cbiAgICAgICAge3NlbmRCdXR0b25UZXh0fVxuICAgICAgPC9CdXR0b24+XG4gICAgPC9Cb3g+XG4gICk7XG59XG4iXX0=