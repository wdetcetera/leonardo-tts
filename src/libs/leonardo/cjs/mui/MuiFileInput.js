"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MuiFileInput = MuiFileInput;

var _material = require("@mui/material");

var _react = _interopRequireDefault(require("react"));

function MuiFileInput({
  chatController,
  actionRequest
}) {
  const chatCtl = chatController;

  const [files, setFiles] = _react.default.useState([]);

  const handleFileChange = _react.default.useCallback(fileList => {
    // Convert FileList to File[]
    const fileArray = [];

    if (fileList) {
      for (let i = 0; i < fileList.length; i += 1) {
        const file = fileList.item(i);

        if (file) {
          fileArray.push(file);
        }
      }
    }

    setFiles(fileArray);
  }, []);

  const setResponse = _react.default.useCallback(() => {
    if (files.length > 0) {
      const value = files.map(f => f.name).toString();
      const res = {
        type: 'file',
        value,
        files
      };
      chatCtl.setActionResponse(actionRequest, res);
    }
  }, [actionRequest, chatCtl, files]);

  const sendButtonText = actionRequest.sendButtonText ? actionRequest.sendButtonText : '>';
  return /*#__PURE__*/_react.default.createElement(_material.Box, {
    sx: {
      flex: '1 1 auto',
      maxWidth: '100%',
      display: 'flex',
      flexDirection: 'column',
      '& > *': {
        flex: '0 0 auto',
        maxWidth: '100%'
      },
      '& > * + *': {
        mt: 1
      }
    }
  }, /*#__PURE__*/_react.default.createElement(_material.List, null, files.map(f => /*#__PURE__*/_react.default.createElement("div", {
    key: `${f.name}-${f.size}`
  }, /*#__PURE__*/_react.default.createElement(_material.Divider, null), /*#__PURE__*/_react.default.createElement(_material.ListItem, {
    key: f.name
  }, /*#__PURE__*/_react.default.createElement(_material.ListItemIcon, null, /*#__PURE__*/_react.default.createElement(_material.Icon, null, "attach_file")), /*#__PURE__*/_react.default.createElement(_material.Typography, {
    style: {
      overflowWrap: 'break-word',
      minWidth: 0
    }
  }, f.name))))), /*#__PURE__*/_react.default.createElement(_material.Box, {
    sx: {
      display: 'flex',
      '& > *': {
        flex: '1 1 auto',
        minWidth: 0
      },
      '& > * + *': {
        ml: 1
      }
    }
  }, /*#__PURE__*/_react.default.createElement(_material.Button, {
    disabled: false,
    component: "label",
    variant: "contained",
    color: "primary",
    startIcon: /*#__PURE__*/_react.default.createElement(_material.Icon, null, "folder")
  }, "Select file", /*#__PURE__*/_react.default.createElement("input", {
    type: "file",
    accept: actionRequest.accept,
    multiple: actionRequest.multiple,
    onChange: e => handleFileChange(e.target.files),
    style: {
      display: 'none'
    }
  })), /*#__PURE__*/_react.default.createElement(_material.Button, {
    type: "button",
    onClick: setResponse,
    disabled: files.length === 0,
    variant: "contained",
    color: "primary",
    startIcon: /*#__PURE__*/_react.default.createElement(_material.Icon, null, "send")
  }, sendButtonText)));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tdWkvTXVpRmlsZUlucHV0LnRzeCJdLCJuYW1lcyI6WyJNdWlGaWxlSW5wdXQiLCJjaGF0Q29udHJvbGxlciIsImFjdGlvblJlcXVlc3QiLCJjaGF0Q3RsIiwiZmlsZXMiLCJzZXRGaWxlcyIsIlJlYWN0IiwidXNlU3RhdGUiLCJoYW5kbGVGaWxlQ2hhbmdlIiwidXNlQ2FsbGJhY2siLCJmaWxlTGlzdCIsImZpbGVBcnJheSIsImkiLCJsZW5ndGgiLCJmaWxlIiwiaXRlbSIsInB1c2giLCJzZXRSZXNwb25zZSIsInZhbHVlIiwibWFwIiwiZiIsIm5hbWUiLCJ0b1N0cmluZyIsInJlcyIsInR5cGUiLCJzZXRBY3Rpb25SZXNwb25zZSIsInNlbmRCdXR0b25UZXh0IiwiZmxleCIsIm1heFdpZHRoIiwiZGlzcGxheSIsImZsZXhEaXJlY3Rpb24iLCJtdCIsInNpemUiLCJvdmVyZmxvd1dyYXAiLCJtaW5XaWR0aCIsIm1sIiwiYWNjZXB0IiwibXVsdGlwbGUiLCJlIiwidGFyZ2V0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFVQTs7QUFLTyxTQUFTQSxZQUFULENBQXNCO0FBQzNCQyxFQUFBQSxjQUQyQjtBQUUzQkMsRUFBQUE7QUFGMkIsQ0FBdEIsRUFNZ0I7QUFDckIsUUFBTUMsT0FBTyxHQUFHRixjQUFoQjs7QUFDQSxRQUFNLENBQUNHLEtBQUQsRUFBUUMsUUFBUixJQUFvQkMsZUFBTUMsUUFBTixDQUF1QixFQUF2QixDQUExQjs7QUFFQSxRQUFNQyxnQkFBZ0IsR0FBR0YsZUFBTUcsV0FBTixDQUN0QkMsUUFBRCxJQUFxQztBQUNuQztBQUNBLFVBQU1DLFNBQWlCLEdBQUcsRUFBMUI7O0FBQ0EsUUFBSUQsUUFBSixFQUFjO0FBQ1osV0FBSyxJQUFJRSxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRixRQUFRLENBQUNHLE1BQTdCLEVBQXFDRCxDQUFDLElBQUksQ0FBMUMsRUFBNkM7QUFDM0MsY0FBTUUsSUFB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QUFhOUIsZ0JBQWdCLENBQUM4QixDQUFDLENBQUNDLE1BQUYsQ0FBU25DLEtBQVYsQ0FKekM7QUFLRSxJQUFBLEtBQUssRUFBRTtBQUFFeUIsTUFBQUEsT0FBTyxFQUFFO0FBQVg7QUFMVCxJQVJGLENBWkYsZUE0QkUsNkJBQUMsZ0JBQUQ7QUFDRSxJQUFBLElBQUksRUFBQyxRQURQO0FBRUUsSUFBQSxPQUFPLEVBQUVaLFdBRlg7QUFHRSxJQUFBLFFBQVEsRUFBRWIsS0FBSyxDQUFDUyxNQUFOLEtBQWlCLENBSDdCO0FBSUUsSUFBQSxPQUFPLEVBQUMsV0FKVjtBQUtFLElBQUEsS0FBSyxFQUFDLFNBTFI7QUFNRSxJQUFBLFNBQVMsZUFBRSw2QkFBQyxjQUFEO0FBTmIsS0FRR2EsY0FSSCxDQTVCRixDQS9CRixDQURGO0FBeUVEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQm94LFxuICBCdXR0b24sXG4gIERpdmlkZXIsXG4gIEljb24sXG4gIExpc3QsXG4gIExpc3RJdGVtLFxuICBMaXN0SXRlbUljb24sXG4gIFR5cG9ncmFwaHksXG59IGZyb20gJ0BtdWkvbWF0ZXJpYWwnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgQ2hhdENvbnRyb2xsZXIgfSBmcm9tICcuLi9jaGF0LWNvbnRyb2xsZXInO1xuaW1wb3J0IHsgRmlsZUFjdGlvblJlcXVlc3QsIEZpbGVBY3Rpb25SZXNwb25zZSB9IGZyb20gJy4uL2NoYXQtdHlwZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gTXVpRmlsZUlucHV0KHtcbiAgY2hhdENvbnRyb2xsZXIsXG4gIGFjdGlvblJlcXVlc3QsXG59OiB7XG4gIGNoYXRDb250cm9sbGVyOiBDaGF0Q29udHJvbGxlcjtcbiAgYWN0aW9uUmVxdWVzdDogRmlsZUFjdGlvblJlcXVlc3Q7XG59KTogUmVhY3QuUmVhY3RFbGVtZW50IHtcbiAgY29uc3QgY2hhdEN0bCA9IGNoYXRDb250cm9sbGVyO1xuICBjb25zdCBbZmlsZXMsIHNldEZpbGVzXSA9IFJlYWN0LnVzZVN0YXRlPEZpbGVbXT4oW10pO1xuXG4gIGNvbnN0IGhhbmRsZUZpbGVDaGFuZ2UgPSBSZWFjdC51c2VDYWxsYmFjayhcbiAgICAoZmlsZUxpc3Q6IEZpbGVMaXN0IHwgbnVsbCk6IHZvaWQgPT4ge1xuICAgICAgLy8gQ29udmVydCBGaWxlTGlzdCB0byBGaWxlW11cbiAgICAgIGNvbnN0IGZpbGVBcnJheTogRmlsZVtdID0gW107XG4gICAgICBpZiAoZmlsZUxpc3QpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlTGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlTGlzdC5pdGVtKGkpO1xuICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICBmaWxlQXJyYXkucHVzaChmaWxlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNldEZpbGVzKGZpbGVBcnJheSk7XG4gICAgfSxcbiAgICBbXSxcbiAgKTtcblxuICBjb25zdCBzZXRSZXNwb25zZSA9IFJlYWN0LnVzZUNhbGxiYWNrKCgpOiB2b2lkID0+IHtcbiAgICBpZiAoZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdmFsdWUgPSBmaWxlcy5tYXAoKGYpID0+IGYubmFtZSkudG9TdHJpbmcoKTtcbiAgICAgIGNvbnN0IHJlczogRmlsZUFjdGlvblJlc3BvbnNlID0geyB0eXBlOiAnZmlsZScsIHZhbHVlLCBmaWxlcyB9O1xuICAgICAgY2hhdEN0bC5zZXRBY3Rpb25SZXNwb25zZShhY3Rpb25SZXF1ZXN0LCByZXMpO1xuICAgIH1cbiAgfSwgW2FjdGlvblJlcXVlc3QsIGNoYXRDdGwsIGZpbGVzXSk7XG5cbiAgY29uc3Qgc2VuZEJ1dHRvblRleHQgPSBhY3Rpb25SZXF1ZXN0LnNlbmRCdXR0b25UZXh0XG4gICAgPyBhY3Rpb25SZXF1ZXN0LnNlbmRCdXR0b25UZXh0XG4gICAgOiAnU2VuZCc7XG5cbiAgcmV0dXJuIChcbiAgICA8Qm94XG4gICAgICBzeD17e1xuICAgICAgICBmbGV4OiAnMSAxIGF1dG8nLFxuICAgICAgICBtYXhXaWR0aDogJzEwMCUnLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICAnJiA+IConOiB7XG4gICAgICAgICAgZmxleDogJzAgMCBhdXRvJyxcbiAgICAgICAgICBtYXhXaWR0aDogJzEwMCUnLFxuICAgICAgICB9LFxuICAgICAgICAnJiA+ICogKyAqJzoge1xuICAgICAgICAgIG10OiAxLFxuICAgICAgICB9LFxuICAgICAgfX1cbiAgICA+XG4gICAgICA8TGlzdD5cbiAgICAgICAge2ZpbGVzLm1hcCgoZikgPT4gKFxuICAgICAgICAgIDxkaXYga2V5PXtgJHtmLm5hbWV9LSR7Zi5zaXplfWB9PlxuICAgICAgICAgICAgPERpdmlkZXIgLz5cbiAgICAgICAgICAgIDxMaXN0SXRlbSBrZXk9e2YubmFtZX0+XG4gICAgICAgICAgICAgIDxMaXN0SXRlbUljb24+XG4gICAgICAgICAgICAgICAgPEljb24+YXR0YWNoX2ZpbGU8L0ljb24+XG4gICAgICAgICAgICAgIDwvTGlzdEl0ZW1JY29uPlxuICAgICAgICAgICAgICA8VHlwb2dyYXBoeSBzdHlsZT17eyBvdmVyZmxvd1dyYXA6ICdicmVhay13b3JkJywgbWluV2lkdGg6IDAgfX0+XG4gICAgICAgICAgICAgICAge2YubmFtZX1cbiAgICAgICAgICAgICAgPC9UeXBvZ3JhcGh5PlxuICAgICAgICAgICAgICB7LyogPExpc3RJdGVtVGV4dCBwcmltYXJ5PXtmLm5hbWV9IC8+ICovfVxuICAgICAgICAgICAgPC9MaXN0SXRlbT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSl9XG4gICAgICA8L0xpc3Q+XG4gICAgICA8Qm94XG4gICAgICAgIHN4PXt7XG4gICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICcmID4gKic6IHtcbiAgICAgICAgICAgIGZsZXg6ICcxIDEgYXV0bycsXG4gICAgICAgICAgICBtaW5XaWR0aDogMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgICcmID4gKiArIConOiB7XG4gICAgICAgICAgICBtbDogMSxcbiAgICAgICAgICB9LFxuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgZGlzYWJsZWQ9e2ZhbHNlfVxuICAgICAgICAgIGNvbXBvbmVudD1cImxhYmVsXCJcbiAgICAgICAgICB2YXJpYW50PVwiY29udGFpbmVkXCJcbiAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgIHN0YXJ0SWNvbj17PEljb24+Zm9sZGVyPC9JY29uPn1cbiAgICAgICAgPlxuICAgICAgICAgIFNlbGVjdCBmaWxlXG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgICAgICBhY2NlcHQ9e2FjdGlvblJlcXVlc3QuYWNjZXB0fVxuICAgICAgICAgICAgbXVsdGlwbGU9e2FjdGlvblJlcXVlc3QubXVsdGlwbGV9XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpOiB2b2lkID0+IGhhbmRsZUZpbGVDaGFuZ2UoZS50YXJnZXQuZmlsZXMpfVxuICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ25vbmUnIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBvbkNsaWNrPXtzZXRSZXNwb25zZX1cbiAgICAgICAgICBkaXNhYmxlZD17ZmlsZXMubGVuZ3RoID09PSAwfVxuICAgICAgICAgIHZhcmlhbnQ9XCJjb250YWluZWRcIlxuICAgICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgICAgc3RhcnRJY29uPXs8SWNvbj5zZW5kPC9JY29uPn1cbiAgICAgICAgPlxuICAgICAgICAgIHtzZW5kQnV0dG9uVGV4dH1cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICA8L0JveD5cbiAgICA8L0JveD5cbiAgKTtcbn1cbiJdfQ==